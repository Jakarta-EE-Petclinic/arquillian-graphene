<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8">
<!--[if IE]><meta http-equiv="X-UA-Compatible" content="IE=edge"><![endif]-->
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<meta name="generator" content="Asciidoctor 1.5.5">
<title>Arquillian Graphene 2</title>
<link rel="stylesheet" href="https://fonts.googleapis.com/css?family=Open+Sans:300,300italic,400,400italic,600,600italic%7CNoto+Serif:400,400italic,700,700italic%7CDroid+Sans+Mono:400,700">
<style>
/* Asciidoctor default stylesheet | MIT License | http://asciidoctor.org */
/* Remove comment around @import statement below when using as a custom stylesheet */
/*@import "https://fonts.googleapis.com/css?family=Open+Sans:300,300italic,400,400italic,600,600italic%7CNoto+Serif:400,400italic,700,700italic%7CDroid+Sans+Mono:400,700";*/
article,aside,details,figcaption,figure,footer,header,hgroup,main,nav,section,summary{display:block}
audio,canvas,video{display:inline-block}
audio:not([controls]){display:none;height:0}
[hidden],template{display:none}
script{display:none!important}
html{font-family:sans-serif;-ms-text-size-adjust:100%;-webkit-text-size-adjust:100%}
a{background:transparent}
a:focus{outline:thin dotted}
a:active,a:hover{outline:0}
h1{font-size:2em;margin:.67em 0}
abbr[title]{border-bottom:1px dotted}
b,strong{font-weight:bold}
dfn{font-style:italic}
hr{-moz-box-sizing:content-box;box-sizing:content-box;height:0}
mark{background:#ff0;color:#000}
code,kbd,pre,samp{font-family:monospace;font-size:1em}
pre{white-space:pre-wrap}
q{quotes:"\201C" "\201D" "\2018" "\2019"}
small{font-size:80%}
sub,sup{font-size:75%;line-height:0;position:relative;vertical-align:baseline}
sup{top:-.5em}
sub{bottom:-.25em}
img{border:0}
svg:not(:root){overflow:hidden}
figure{margin:0}
fieldset{border:1px solid silver;margin:0 2px;padding:.35em .625em .75em}
legend{border:0;padding:0}
button,input,select,textarea{font-family:inherit;font-size:100%;margin:0}
button,input{line-height:normal}
button,select{text-transform:none}
button,html input[type="button"],input[type="reset"],input[type="submit"]{-webkit-appearance:button;cursor:pointer}
button[disabled],html input[disabled]{cursor:default}
input[type="checkbox"],input[type="radio"]{box-sizing:border-box;padding:0}
input[type="search"]{-webkit-appearance:textfield;-moz-box-sizing:content-box;-webkit-box-sizing:content-box;box-sizing:content-box}
input[type="search"]::-webkit-search-cancel-button,input[type="search"]::-webkit-search-decoration{-webkit-appearance:none}
button::-moz-focus-inner,input::-moz-focus-inner{border:0;padding:0}
textarea{overflow:auto;vertical-align:top}
table{border-collapse:collapse;border-spacing:0}
*,*:before,*:after{-moz-box-sizing:border-box;-webkit-box-sizing:border-box;box-sizing:border-box}
html,body{font-size:100%}
body{background:#fff;color:rgba(0,0,0,.8);padding:0;margin:0;font-family:"Noto Serif","DejaVu Serif",serif;font-weight:400;font-style:normal;line-height:1;position:relative;cursor:auto;tab-size:4;-moz-osx-font-smoothing:grayscale;-webkit-font-smoothing:antialiased}
a:hover{cursor:pointer}
img,object,embed{max-width:100%;height:auto}
object,embed{height:100%}
img{-ms-interpolation-mode:bicubic}
.left{float:left!important}
.right{float:right!important}
.text-left{text-align:left!important}
.text-right{text-align:right!important}
.text-center{text-align:center!important}
.text-justify{text-align:justify!important}
.hide{display:none}
img,object,svg{display:inline-block;vertical-align:middle}
textarea{height:auto;min-height:50px}
select{width:100%}
.center{margin-left:auto;margin-right:auto}
.spread{width:100%}
p.lead,.paragraph.lead>p,#preamble>.sectionbody>.paragraph:first-of-type p{font-size:1.21875em;line-height:1.6}
.subheader,.admonitionblock td.content>.title,.audioblock>.title,.exampleblock>.title,.imageblock>.title,.listingblock>.title,.literalblock>.title,.stemblock>.title,.openblock>.title,.paragraph>.title,.quoteblock>.title,table.tableblock>.title,.verseblock>.title,.videoblock>.title,.dlist>.title,.olist>.title,.ulist>.title,.qlist>.title,.hdlist>.title{line-height:1.45;color:#7a2518;font-weight:400;margin-top:0;margin-bottom:.25em}
div,dl,dt,dd,ul,ol,li,h1,h2,h3,#toctitle,.sidebarblock>.content>.title,h4,h5,h6,pre,form,p,blockquote,th,td{margin:0;padding:0;direction:ltr}
a{color:#2156a5;text-decoration:underline;line-height:inherit}
a:hover,a:focus{color:#1d4b8f}
a img{border:none}
p{font-family:inherit;font-weight:400;font-size:1em;line-height:1.6;margin-bottom:1.25em;text-rendering:optimizeLegibility}
p aside{font-size:.875em;line-height:1.35;font-style:italic}
h1,h2,h3,#toctitle,.sidebarblock>.content>.title,h4,h5,h6{font-family:"Open Sans","DejaVu Sans",sans-serif;font-weight:300;font-style:normal;color:#ba3925;text-rendering:optimizeLegibility;margin-top:1em;margin-bottom:.5em;line-height:1.0125em}
h1 small,h2 small,h3 small,#toctitle small,.sidebarblock>.content>.title small,h4 small,h5 small,h6 small{font-size:60%;color:#e99b8f;line-height:0}
h1{font-size:2.125em}
h2{font-size:1.6875em}
h3,#toctitle,.sidebarblock>.content>.title{font-size:1.375em}
h4,h5{font-size:1.125em}
h6{font-size:1em}
hr{border:solid #ddddd8;border-width:1px 0 0;clear:both;margin:1.25em 0 1.1875em;height:0}
em,i{font-style:italic;line-height:inherit}
strong,b{font-weight:bold;line-height:inherit}
small{font-size:60%;line-height:inherit}
code{font-family:"Droid Sans Mono","DejaVu Sans Mono",monospace;font-weight:400;color:rgba(0,0,0,.9)}
ul,ol,dl{font-size:1em;line-height:1.6;margin-bottom:1.25em;list-style-position:outside;font-family:inherit}
ul,ol,ul.no-bullet,ol.no-bullet{margin-left:1.5em}
ul li ul,ul li ol{margin-left:1.25em;margin-bottom:0;font-size:1em}
ul.square li ul,ul.circle li ul,ul.disc li ul{list-style:inherit}
ul.square{list-style-type:square}
ul.circle{list-style-type:circle}
ul.disc{list-style-type:disc}
ul.no-bullet{list-style:none}
ol li ul,ol li ol{margin-left:1.25em;margin-bottom:0}
dl dt{margin-bottom:.3125em;font-weight:bold}
dl dd{margin-bottom:1.25em}
abbr,acronym{text-transform:uppercase;font-size:90%;color:rgba(0,0,0,.8);border-bottom:1px dotted #ddd;cursor:help}
abbr{text-transform:none}
blockquote{margin:0 0 1.25em;padding:.5625em 1.25em 0 1.1875em;border-left:1px solid #ddd}
blockquote cite{display:block;font-size:.9375em;color:rgba(0,0,0,.6)}
blockquote cite:before{content:"\2014 \0020"}
blockquote cite a,blockquote cite a:visited{color:rgba(0,0,0,.6)}
blockquote,blockquote p{line-height:1.6;color:rgba(0,0,0,.85)}
@media only screen and (min-width:768px){h1,h2,h3,#toctitle,.sidebarblock>.content>.title,h4,h5,h6{line-height:1.2}
h1{font-size:2.75em}
h2{font-size:2.3125em}
h3,#toctitle,.sidebarblock>.content>.title{font-size:1.6875em}
h4{font-size:1.4375em}}
table{background:#fff;margin-bottom:1.25em;border:solid 1px #dedede}
table thead,table tfoot{background:#f7f8f7;font-weight:bold}
table thead tr th,table thead tr td,table tfoot tr th,table tfoot tr td{padding:.5em .625em .625em;font-size:inherit;color:rgba(0,0,0,.8);text-align:left}
table tr th,table tr td{padding:.5625em .625em;font-size:inherit;color:rgba(0,0,0,.8)}
table tr.even,table tr.alt,table tr:nth-of-type(even){background:#f8f8f7}
table thead tr th,table tfoot tr th,table tbody tr td,table tr td,table tfoot tr td{display:table-cell;line-height:1.6}
h1,h2,h3,#toctitle,.sidebarblock>.content>.title,h4,h5,h6{line-height:1.2;word-spacing:-.05em}
h1 strong,h2 strong,h3 strong,#toctitle strong,.sidebarblock>.content>.title strong,h4 strong,h5 strong,h6 strong{font-weight:400}
.clearfix:before,.clearfix:after,.float-group:before,.float-group:after{content:" ";display:table}
.clearfix:after,.float-group:after{clear:both}
*:not(pre)>code{font-size:.9375em;font-style:normal!important;letter-spacing:0;padding:.1em .5ex;word-spacing:-.15em;background-color:#f7f7f8;-webkit-border-radius:4px;border-radius:4px;line-height:1.45;text-rendering:optimizeSpeed;word-wrap:break-word}
*:not(pre)>code.nobreak{word-wrap:normal}
*:not(pre)>code.nowrap{white-space:nowrap}
pre,pre>code{line-height:1.45;color:rgba(0,0,0,.9);font-family:"Droid Sans Mono","DejaVu Sans Mono",monospace;font-weight:400;text-rendering:optimizeSpeed}
em em{font-style:normal}
strong strong{font-weight:400}
.keyseq{color:rgba(51,51,51,.8)}
kbd{font-family:"Droid Sans Mono","DejaVu Sans Mono",monospace;display:inline-block;color:rgba(0,0,0,.8);font-size:.65em;line-height:1.45;background-color:#f7f7f7;border:1px solid #ccc;-webkit-border-radius:3px;border-radius:3px;-webkit-box-shadow:0 1px 0 rgba(0,0,0,.2),0 0 0 .1em white inset;box-shadow:0 1px 0 rgba(0,0,0,.2),0 0 0 .1em #fff inset;margin:0 .15em;padding:.2em .5em;vertical-align:middle;position:relative;top:-.1em;white-space:nowrap}
.keyseq kbd:first-child{margin-left:0}
.keyseq kbd:last-child{margin-right:0}
.menuseq,.menu{color:rgba(0,0,0,.8)}
b.button:before,b.button:after{position:relative;top:-1px;font-weight:400}
b.button:before{content:"[";padding:0 3px 0 2px}
b.button:after{content:"]";padding:0 2px 0 3px}
p a>code:hover{color:rgba(0,0,0,.9)}
#header,#content,#footnotes,#footer{width:100%;margin-left:auto;margin-right:auto;margin-top:0;margin-bottom:0;max-width:62.5em;*zoom:1;position:relative;padding-left:.9375em;padding-right:.9375em}
#header:before,#header:after,#content:before,#content:after,#footnotes:before,#footnotes:after,#footer:before,#footer:after{content:" ";display:table}
#header:after,#content:after,#footnotes:after,#footer:after{clear:both}
#content{margin-top:1.25em}
#content:before{content:none}
#header>h1:first-child{color:rgba(0,0,0,.85);margin-top:2.25rem;margin-bottom:0}
#header>h1:first-child+#toc{margin-top:8px;border-top:1px solid #ddddd8}
#header>h1:only-child,body.toc2 #header>h1:nth-last-child(2){border-bottom:1px solid #ddddd8;padding-bottom:8px}
#header .details{border-bottom:1px solid #ddddd8;line-height:1.45;padding-top:.25em;padding-bottom:.25em;padding-left:.25em;color:rgba(0,0,0,.6);display:-ms-flexbox;display:-webkit-flex;display:flex;-ms-flex-flow:row wrap;-webkit-flex-flow:row wrap;flex-flow:row wrap}
#header .details span:first-child{margin-left:-.125em}
#header .details span.email a{color:rgba(0,0,0,.85)}
#header .details br{display:none}
#header .details br+span:before{content:"\00a0\2013\00a0"}
#header .details br+span.author:before{content:"\00a0\22c5\00a0";color:rgba(0,0,0,.85)}
#header .details br+span#revremark:before{content:"\00a0|\00a0"}
#header #revnumber{text-transform:capitalize}
#header #revnumber:after{content:"\00a0"}
#content>h1:first-child:not([class]){color:rgba(0,0,0,.85);border-bottom:1px solid #ddddd8;padding-bottom:8px;margin-top:0;padding-top:1rem;margin-bottom:1.25rem}
#toc{border-bottom:1px solid #efefed;padding-bottom:.5em}
#toc>ul{margin-left:.125em}
#toc ul.sectlevel0>li>a{font-style:italic}
#toc ul.sectlevel0 ul.sectlevel1{margin:.5em 0}
#toc ul{font-family:"Open Sans","DejaVu Sans",sans-serif;list-style-type:none}
#toc li{line-height:1.3334;margin-top:.3334em}
#toc a{text-decoration:none}
#toc a:active{text-decoration:underline}
#toctitle{color:#7a2518;font-size:1.2em}
@media only screen and (min-width:768px){#toctitle{font-size:1.375em}
body.toc2{padding-left:15em;padding-right:0}
#toc.toc2{margin-top:0!important;background-color:#f8f8f7;position:fixed;width:15em;left:0;top:0;border-right:1px solid #efefed;border-top-width:0!important;border-bottom-width:0!important;z-index:1000;padding:1.25em 1em;height:100%;overflow:auto}
#toc.toc2 #toctitle{margin-top:0;margin-bottom:.8rem;font-size:1.2em}
#toc.toc2>ul{font-size:.9em;margin-bottom:0}
#toc.toc2 ul ul{margin-left:0;padding-left:1em}
#toc.toc2 ul.sectlevel0 ul.sectlevel1{padding-left:0;margin-top:.5em;margin-bottom:.5em}
body.toc2.toc-right{padding-left:0;padding-right:15em}
body.toc2.toc-right #toc.toc2{border-right-width:0;border-left:1px solid #efefed;left:auto;right:0}}
@media only screen and (min-width:1280px){body.toc2{padding-left:20em;padding-right:0}
#toc.toc2{width:20em}
#toc.toc2 #toctitle{font-size:1.375em}
#toc.toc2>ul{font-size:.95em}
#toc.toc2 ul ul{padding-left:1.25em}
body.toc2.toc-right{padding-left:0;padding-right:20em}}
#content #toc{border-style:solid;border-width:1px;border-color:#e0e0dc;margin-bottom:1.25em;padding:1.25em;background:#f8f8f7;-webkit-border-radius:4px;border-radius:4px}
#content #toc>:first-child{margin-top:0}
#content #toc>:last-child{margin-bottom:0}
#footer{max-width:100%;background-color:rgba(0,0,0,.8);padding:1.25em}
#footer-text{color:rgba(255,255,255,.8);line-height:1.44}
.sect1{padding-bottom:.625em}
@media only screen and (min-width:768px){.sect1{padding-bottom:1.25em}}
.sect1+.sect1{border-top:1px solid #efefed}
#content h1>a.anchor,h2>a.anchor,h3>a.anchor,#toctitle>a.anchor,.sidebarblock>.content>.title>a.anchor,h4>a.anchor,h5>a.anchor,h6>a.anchor{position:absolute;z-index:1001;width:1.5ex;margin-left:-1.5ex;display:block;text-decoration:none!important;visibility:hidden;text-align:center;font-weight:400}
#content h1>a.anchor:before,h2>a.anchor:before,h3>a.anchor:before,#toctitle>a.anchor:before,.sidebarblock>.content>.title>a.anchor:before,h4>a.anchor:before,h5>a.anchor:before,h6>a.anchor:before{content:"\00A7";font-size:.85em;display:block;padding-top:.1em}
#content h1:hover>a.anchor,#content h1>a.anchor:hover,h2:hover>a.anchor,h2>a.anchor:hover,h3:hover>a.anchor,#toctitle:hover>a.anchor,.sidebarblock>.content>.title:hover>a.anchor,h3>a.anchor:hover,#toctitle>a.anchor:hover,.sidebarblock>.content>.title>a.anchor:hover,h4:hover>a.anchor,h4>a.anchor:hover,h5:hover>a.anchor,h5>a.anchor:hover,h6:hover>a.anchor,h6>a.anchor:hover{visibility:visible}
#content h1>a.link,h2>a.link,h3>a.link,#toctitle>a.link,.sidebarblock>.content>.title>a.link,h4>a.link,h5>a.link,h6>a.link{color:#ba3925;text-decoration:none}
#content h1>a.link:hover,h2>a.link:hover,h3>a.link:hover,#toctitle>a.link:hover,.sidebarblock>.content>.title>a.link:hover,h4>a.link:hover,h5>a.link:hover,h6>a.link:hover{color:#a53221}
.audioblock,.imageblock,.literalblock,.listingblock,.stemblock,.videoblock{margin-bottom:1.25em}
.admonitionblock td.content>.title,.audioblock>.title,.exampleblock>.title,.imageblock>.title,.listingblock>.title,.literalblock>.title,.stemblock>.title,.openblock>.title,.paragraph>.title,.quoteblock>.title,table.tableblock>.title,.verseblock>.title,.videoblock>.title,.dlist>.title,.olist>.title,.ulist>.title,.qlist>.title,.hdlist>.title{text-rendering:optimizeLegibility;text-align:left;font-family:"Noto Serif","DejaVu Serif",serif;font-size:1rem;font-style:italic}
table.tableblock>caption.title{white-space:nowrap;overflow:visible;max-width:0}
.paragraph.lead>p,#preamble>.sectionbody>.paragraph:first-of-type p{color:rgba(0,0,0,.85)}
table.tableblock #preamble>.sectionbody>.paragraph:first-of-type p{font-size:inherit}
.admonitionblock>table{border-collapse:separate;border:0;background:none;width:100%}
.admonitionblock>table td.icon{text-align:center;width:80px}
.admonitionblock>table td.icon img{max-width:none}
.admonitionblock>table td.icon .title{font-weight:bold;font-family:"Open Sans","DejaVu Sans",sans-serif;text-transform:uppercase}
.admonitionblock>table td.content{padding-left:1.125em;padding-right:1.25em;border-left:1px solid #ddddd8;color:rgba(0,0,0,.6)}
.admonitionblock>table td.content>:last-child>:last-child{margin-bottom:0}
.exampleblock>.content{border-style:solid;border-width:1px;border-color:#e6e6e6;margin-bottom:1.25em;padding:1.25em;background:#fff;-webkit-border-radius:4px;border-radius:4px}
.exampleblock>.content>:first-child{margin-top:0}
.exampleblock>.content>:last-child{margin-bottom:0}
.sidebarblock{border-style:solid;border-width:1px;border-color:#e0e0dc;margin-bottom:1.25em;padding:1.25em;background:#f8f8f7;-webkit-border-radius:4px;border-radius:4px}
.sidebarblock>:first-child{margin-top:0}
.sidebarblock>:last-child{margin-bottom:0}
.sidebarblock>.content>.title{color:#7a2518;margin-top:0;text-align:center}
.exampleblock>.content>:last-child>:last-child,.exampleblock>.content .olist>ol>li:last-child>:last-child,.exampleblock>.content .ulist>ul>li:last-child>:last-child,.exampleblock>.content .qlist>ol>li:last-child>:last-child,.sidebarblock>.content>:last-child>:last-child,.sidebarblock>.content .olist>ol>li:last-child>:last-child,.sidebarblock>.content .ulist>ul>li:last-child>:last-child,.sidebarblock>.content .qlist>ol>li:last-child>:last-child{margin-bottom:0}
.literalblock pre,.listingblock pre:not(.highlight),.listingblock pre[class="highlight"],.listingblock pre[class^="highlight "],.listingblock pre.CodeRay,.listingblock pre.prettyprint{background:#f7f7f8}
.sidebarblock .literalblock pre,.sidebarblock .listingblock pre:not(.highlight),.sidebarblock .listingblock pre[class="highlight"],.sidebarblock .listingblock pre[class^="highlight "],.sidebarblock .listingblock pre.CodeRay,.sidebarblock .listingblock pre.prettyprint{background:#f2f1f1}
.literalblock pre,.literalblock pre[class],.listingblock pre,.listingblock pre[class]{-webkit-border-radius:4px;border-radius:4px;word-wrap:break-word;padding:1em;font-size:.8125em}
.literalblock pre.nowrap,.literalblock pre[class].nowrap,.listingblock pre.nowrap,.listingblock pre[class].nowrap{overflow-x:auto;white-space:pre;word-wrap:normal}
@media only screen and (min-width:768px){.literalblock pre,.literalblock pre[class],.listingblock pre,.listingblock pre[class]{font-size:.90625em}}
@media only screen and (min-width:1280px){.literalblock pre,.literalblock pre[class],.listingblock pre,.listingblock pre[class]{font-size:1em}}
.literalblock.output pre{color:#f7f7f8;background-color:rgba(0,0,0,.9)}
.listingblock pre.highlightjs{padding:0}
.listingblock pre.highlightjs>code{padding:1em;-webkit-border-radius:4px;border-radius:4px}
.listingblock pre.prettyprint{border-width:0}
.listingblock>.content{position:relative}
.listingblock code[data-lang]:before{display:none;content:attr(data-lang);position:absolute;font-size:.75em;top:.425rem;right:.5rem;line-height:1;text-transform:uppercase;color:#999}
.listingblock:hover code[data-lang]:before{display:block}
.listingblock.terminal pre .command:before{content:attr(data-prompt);padding-right:.5em;color:#999}
.listingblock.terminal pre .command:not([data-prompt]):before{content:"$"}
table.pyhltable{border-collapse:separate;border:0;margin-bottom:0;background:none}
table.pyhltable td{vertical-align:top;padding-top:0;padding-bottom:0;line-height:1.45}
table.pyhltable td.code{padding-left:.75em;padding-right:0}
pre.pygments .lineno,table.pyhltable td:not(.code){color:#999;padding-left:0;padding-right:.5em;border-right:1px solid #ddddd8}
pre.pygments .lineno{display:inline-block;margin-right:.25em}
table.pyhltable .linenodiv{background:none!important;padding-right:0!important}
.quoteblock{margin:0 1em 1.25em 1.5em;display:table}
.quoteblock>.title{margin-left:-1.5em;margin-bottom:.75em}
.quoteblock blockquote,.quoteblock blockquote p{color:rgba(0,0,0,.85);font-size:1.15rem;line-height:1.75;word-spacing:.1em;letter-spacing:0;font-style:italic;text-align:justify}
.quoteblock blockquote{margin:0;padding:0;border:0}
.quoteblock blockquote:before{content:"\201c";float:left;font-size:2.75em;font-weight:bold;line-height:.6em;margin-left:-.6em;color:#7a2518;text-shadow:0 1px 2px rgba(0,0,0,.1)}
.quoteblock blockquote>.paragraph:last-child p{margin-bottom:0}
.quoteblock .attribution{margin-top:.5em;margin-right:.5ex;text-align:right}
.quoteblock .quoteblock{margin-left:0;margin-right:0;padding:.5em 0;border-left:3px solid rgba(0,0,0,.6)}
.quoteblock .quoteblock blockquote{padding:0 0 0 .75em}
.quoteblock .quoteblock blockquote:before{display:none}
.verseblock{margin:0 1em 1.25em 1em}
.verseblock pre{font-family:"Open Sans","DejaVu Sans",sans;font-size:1.15rem;color:rgba(0,0,0,.85);font-weight:300;text-rendering:optimizeLegibility}
.verseblock pre strong{font-weight:400}
.verseblock .attribution{margin-top:1.25rem;margin-left:.5ex}
.quoteblock .attribution,.verseblock .attribution{font-size:.9375em;line-height:1.45;font-style:italic}
.quoteblock .attribution br,.verseblock .attribution br{display:none}
.quoteblock .attribution cite,.verseblock .attribution cite{display:block;letter-spacing:-.025em;color:rgba(0,0,0,.6)}
.quoteblock.abstract{margin:0 0 1.25em 0;display:block}
.quoteblock.abstract blockquote,.quoteblock.abstract blockquote p{text-align:left;word-spacing:0}
.quoteblock.abstract blockquote:before,.quoteblock.abstract blockquote p:first-of-type:before{display:none}
table.tableblock{max-width:100%;border-collapse:separate}
table.tableblock td>.paragraph:last-child p>p:last-child,table.tableblock th>p:last-child,table.tableblock td>p:last-child{margin-bottom:0}
table.tableblock,th.tableblock,td.tableblock{border:0 solid #dedede}
table.grid-all th.tableblock,table.grid-all td.tableblock{border-width:0 1px 1px 0}
table.grid-all tfoot>tr>th.tableblock,table.grid-all tfoot>tr>td.tableblock{border-width:1px 1px 0 0}
table.grid-cols th.tableblock,table.grid-cols td.tableblock{border-width:0 1px 0 0}
table.grid-all *>tr>.tableblock:last-child,table.grid-cols *>tr>.tableblock:last-child{border-right-width:0}
table.grid-rows th.tableblock,table.grid-rows td.tableblock{border-width:0 0 1px 0}
table.grid-all tbody>tr:last-child>th.tableblock,table.grid-all tbody>tr:last-child>td.tableblock,table.grid-all thead:last-child>tr>th.tableblock,table.grid-rows tbody>tr:last-child>th.tableblock,table.grid-rows tbody>tr:last-child>td.tableblock,table.grid-rows thead:last-child>tr>th.tableblock{border-bottom-width:0}
table.grid-rows tfoot>tr>th.tableblock,table.grid-rows tfoot>tr>td.tableblock{border-width:1px 0 0 0}
table.frame-all{border-width:1px}
table.frame-sides{border-width:0 1px}
table.frame-topbot{border-width:1px 0}
th.halign-left,td.halign-left{text-align:left}
th.halign-right,td.halign-right{text-align:right}
th.halign-center,td.halign-center{text-align:center}
th.valign-top,td.valign-top{vertical-align:top}
th.valign-bottom,td.valign-bottom{vertical-align:bottom}
th.valign-middle,td.valign-middle{vertical-align:middle}
table thead th,table tfoot th{font-weight:bold}
tbody tr th{display:table-cell;line-height:1.6;background:#f7f8f7}
tbody tr th,tbody tr th p,tfoot tr th,tfoot tr th p{color:rgba(0,0,0,.8);font-weight:bold}
p.tableblock>code:only-child{background:none;padding:0}
p.tableblock{font-size:1em}
td>div.verse{white-space:pre}
ol{margin-left:1.75em}
ul li ol{margin-left:1.5em}
dl dd{margin-left:1.125em}
dl dd:last-child,dl dd:last-child>:last-child{margin-bottom:0}
ol>li p,ul>li p,ul dd,ol dd,.olist .olist,.ulist .ulist,.ulist .olist,.olist .ulist{margin-bottom:.625em}
ul.unstyled,ol.unnumbered,ul.checklist,ul.none{list-style-type:none}
ul.unstyled,ol.unnumbered,ul.checklist{margin-left:.625em}
ul.checklist li>p:first-child>.fa-square-o:first-child,ul.checklist li>p:first-child>.fa-check-square-o:first-child{width:1em;font-size:.85em}
ul.checklist li>p:first-child>input[type="checkbox"]:first-child{width:1em;position:relative;top:1px}
ul.inline{margin:0 auto .625em auto;margin-left:-1.375em;margin-right:0;padding:0;list-style:none;overflow:hidden}
ul.inline>li{list-style:none;float:left;margin-left:1.375em;display:block}
ul.inline>li>*{display:block}
.unstyled dl dt{font-weight:400;font-style:normal}
ol.arabic{list-style-type:decimal}
ol.decimal{list-style-type:decimal-leading-zero}
ol.loweralpha{list-style-type:lower-alpha}
ol.upperalpha{list-style-type:upper-alpha}
ol.lowerroman{list-style-type:lower-roman}
ol.upperroman{list-style-type:upper-roman}
ol.lowergreek{list-style-type:lower-greek}
.hdlist>table,.colist>table{border:0;background:none}
.hdlist>table>tbody>tr,.colist>table>tbody>tr{background:none}
td.hdlist1,td.hdlist2{vertical-align:top;padding:0 .625em}
td.hdlist1{font-weight:bold;padding-bottom:1.25em}
.literalblock+.colist,.listingblock+.colist{margin-top:-.5em}
.colist>table tr>td:first-of-type{padding:0 .75em;line-height:1}
.colist>table tr>td:last-of-type{padding:.25em 0}
.thumb,.th{line-height:0;display:inline-block;border:solid 4px #fff;-webkit-box-shadow:0 0 0 1px #ddd;box-shadow:0 0 0 1px #ddd}
.imageblock.left,.imageblock[style*="float: left"]{margin:.25em .625em 1.25em 0}
.imageblock.right,.imageblock[style*="float: right"]{margin:.25em 0 1.25em .625em}
.imageblock>.title{margin-bottom:0}
.imageblock.thumb,.imageblock.th{border-width:6px}
.imageblock.thumb>.title,.imageblock.th>.title{padding:0 .125em}
.image.left,.image.right{margin-top:.25em;margin-bottom:.25em;display:inline-block;line-height:0}
.image.left{margin-right:.625em}
.image.right{margin-left:.625em}
a.image{text-decoration:none;display:inline-block}
a.image object{pointer-events:none}
sup.footnote,sup.footnoteref{font-size:.875em;position:static;vertical-align:super}
sup.footnote a,sup.footnoteref a{text-decoration:none}
sup.footnote a:active,sup.footnoteref a:active{text-decoration:underline}
#footnotes{padding-top:.75em;padding-bottom:.75em;margin-bottom:.625em}
#footnotes hr{width:20%;min-width:6.25em;margin:-.25em 0 .75em 0;border-width:1px 0 0 0}
#footnotes .footnote{padding:0 .375em 0 .225em;line-height:1.3334;font-size:.875em;margin-left:1.2em;text-indent:-1.05em;margin-bottom:.2em}
#footnotes .footnote a:first-of-type{font-weight:bold;text-decoration:none}
#footnotes .footnote:last-of-type{margin-bottom:0}
#content #footnotes{margin-top:-.625em;margin-bottom:0;padding:.75em 0}
.gist .file-data>table{border:0;background:#fff;width:100%;margin-bottom:0}
.gist .file-data>table td.line-data{width:99%}
div.unbreakable{page-break-inside:avoid}
.big{font-size:larger}
.small{font-size:smaller}
.underline{text-decoration:underline}
.overline{text-decoration:overline}
.line-through{text-decoration:line-through}
.aqua{color:#00bfbf}
.aqua-background{background-color:#00fafa}
.black{color:#000}
.black-background{background-color:#000}
.blue{color:#0000bf}
.blue-background{background-color:#0000fa}
.fuchsia{color:#bf00bf}
.fuchsia-background{background-color:#fa00fa}
.gray{color:#606060}
.gray-background{background-color:#7d7d7d}
.green{color:#006000}
.green-background{background-color:#007d00}
.lime{color:#00bf00}
.lime-background{background-color:#00fa00}
.maroon{color:#600000}
.maroon-background{background-color:#7d0000}
.navy{color:#000060}
.navy-background{background-color:#00007d}
.olive{color:#606000}
.olive-background{background-color:#7d7d00}
.purple{color:#600060}
.purple-background{background-color:#7d007d}
.red{color:#bf0000}
.red-background{background-color:#fa0000}
.silver{color:#909090}
.silver-background{background-color:#bcbcbc}
.teal{color:#006060}
.teal-background{background-color:#007d7d}
.white{color:#bfbfbf}
.white-background{background-color:#fafafa}
.yellow{color:#bfbf00}
.yellow-background{background-color:#fafa00}
span.icon>.fa{cursor:default}
.admonitionblock td.icon [class^="fa icon-"]{font-size:2.5em;text-shadow:1px 1px 2px rgba(0,0,0,.5);cursor:default}
.admonitionblock td.icon .icon-note:before{content:"\f05a";color:#19407c}
.admonitionblock td.icon .icon-tip:before{content:"\f0eb";text-shadow:1px 1px 2px rgba(155,155,0,.8);color:#111}
.admonitionblock td.icon .icon-warning:before{content:"\f071";color:#bf6900}
.admonitionblock td.icon .icon-caution:before{content:"\f06d";color:#bf3400}
.admonitionblock td.icon .icon-important:before{content:"\f06a";color:#bf0000}
.conum[data-value]{display:inline-block;color:#fff!important;background-color:rgba(0,0,0,.8);-webkit-border-radius:100px;border-radius:100px;text-align:center;font-size:.75em;width:1.67em;height:1.67em;line-height:1.67em;font-family:"Open Sans","DejaVu Sans",sans-serif;font-style:normal;font-weight:bold}
.conum[data-value] *{color:#fff!important}
.conum[data-value]+b{display:none}
.conum[data-value]:after{content:attr(data-value)}
pre .conum[data-value]{position:relative;top:-.125em}
b.conum *{color:inherit!important}
.conum:not([data-value]):empty{display:none}
dt,th.tableblock,td.content,div.footnote{text-rendering:optimizeLegibility}
h1,h2,p,td.content,span.alt{letter-spacing:-.01em}
p strong,td.content strong,div.footnote strong{letter-spacing:-.005em}
p,blockquote,dt,td.content,span.alt{font-size:1.0625rem}
p{margin-bottom:1.25rem}
.sidebarblock p,.sidebarblock dt,.sidebarblock td.content,p.tableblock{font-size:1em}
.exampleblock>.content{background-color:#fffef7;border-color:#e0e0dc;-webkit-box-shadow:0 1px 4px #e0e0dc;box-shadow:0 1px 4px #e0e0dc}
.print-only{display:none!important}
@media print{@page{margin:1.25cm .75cm}
*{-webkit-box-shadow:none!important;box-shadow:none!important;text-shadow:none!important}
a{color:inherit!important;text-decoration:underline!important}
a.bare,a[href^="#"],a[href^="mailto:"]{text-decoration:none!important}
a[href^="http:"]:not(.bare):after,a[href^="https:"]:not(.bare):after{content:"(" attr(href) ")";display:inline-block;font-size:.875em;padding-left:.25em}
abbr[title]:after{content:" (" attr(title) ")"}
pre,blockquote,tr,img,object,svg{page-break-inside:avoid}
thead{display:table-header-group}
svg{max-width:100%}
p,blockquote,dt,td.content{font-size:1em;orphans:3;widows:3}
h2,h3,#toctitle,.sidebarblock>.content>.title{page-break-after:avoid}
#toc,.sidebarblock,.exampleblock>.content{background:none!important}
#toc{border-bottom:1px solid #ddddd8!important;padding-bottom:0!important}
.sect1{padding-bottom:0!important}
.sect1+.sect1{border:0!important}
#header>h1:first-child{margin-top:1.25rem}
body.book #header{text-align:center}
body.book #header>h1:first-child{border:0!important;margin:2.5em 0 1em 0}
body.book #header .details{border:0!important;display:block;padding:0!important}
body.book #header .details span:first-child{margin-left:0!important}
body.book #header .details br{display:block}
body.book #header .details br+span:before{content:none!important}
body.book #toc{border:0!important;text-align:left!important;padding:0!important;margin:0!important}
body.book #toc,body.book #preamble,body.book h1.sect0,body.book .sect1>h2{page-break-before:always}
.listingblock code[data-lang]:before{display:block}
#footer{background:none!important;padding:0 .9375em}
#footer-text{color:rgba(0,0,0,.6)!important;font-size:.9em}
.hide-on-print{display:none!important}
.print-only{display:block!important}
.hide-for-print{display:none!important}
.show-for-print{display:inherit!important}}
</style>
<link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/4.6.3/css/font-awesome.min.css">
<style>
/* Stylesheet for CodeRay to match GitHub theme | MIT License | http://foundation.zurb.com */
/*pre.CodeRay {background-color:#f7f7f8;}*/
.CodeRay .line-numbers{border-right:1px solid #d8d8d8;padding:0 0.5em 0 .25em}
.CodeRay span.line-numbers{display:inline-block;margin-right:.5em;color:rgba(0,0,0,.3)}
.CodeRay .line-numbers strong{color:rgba(0,0,0,.4)}
table.CodeRay{border-collapse:separate;border-spacing:0;margin-bottom:0;border:0;background:none}
table.CodeRay td{vertical-align: top;line-height:1.45}
table.CodeRay td.line-numbers{text-align:right}
table.CodeRay td.line-numbers>pre{padding:0;color:rgba(0,0,0,.3)}
table.CodeRay td.code{padding:0 0 0 .5em}
table.CodeRay td.code>pre{padding:0}
.CodeRay .debug{color:#fff !important;background:#000080 !important}
.CodeRay .annotation{color:#007}
.CodeRay .attribute-name{color:#000080}
.CodeRay .attribute-value{color:#700}
.CodeRay .binary{color:#509}
.CodeRay .comment{color:#998;font-style:italic}
.CodeRay .char{color:#04d}
.CodeRay .char .content{color:#04d}
.CodeRay .char .delimiter{color:#039}
.CodeRay .class{color:#458;font-weight:bold}
.CodeRay .complex{color:#a08}
.CodeRay .constant,.CodeRay .predefined-constant{color:#008080}
.CodeRay .color{color:#099}
.CodeRay .class-variable{color:#369}
.CodeRay .decorator{color:#b0b}
.CodeRay .definition{color:#099}
.CodeRay .delimiter{color:#000}
.CodeRay .doc{color:#970}
.CodeRay .doctype{color:#34b}
.CodeRay .doc-string{color:#d42}
.CodeRay .escape{color:#666}
.CodeRay .entity{color:#800}
.CodeRay .error{color:#808}
.CodeRay .exception{color:inherit}
.CodeRay .filename{color:#099}
.CodeRay .function{color:#900;font-weight:bold}
.CodeRay .global-variable{color:#008080}
.CodeRay .hex{color:#058}
.CodeRay .integer,.CodeRay .float{color:#099}
.CodeRay .include{color:#555}
.CodeRay .inline{color:#000}
.CodeRay .inline .inline{background:#ccc}
.CodeRay .inline .inline .inline{background:#bbb}
.CodeRay .inline .inline-delimiter{color:#d14}
.CodeRay .inline-delimiter{color:#d14}
.CodeRay .important{color:#555;font-weight:bold}
.CodeRay .interpreted{color:#b2b}
.CodeRay .instance-variable{color:#008080}
.CodeRay .label{color:#970}
.CodeRay .local-variable{color:#963}
.CodeRay .octal{color:#40e}
.CodeRay .predefined{color:#369}
.CodeRay .preprocessor{color:#579}
.CodeRay .pseudo-class{color:#555}
.CodeRay .directive{font-weight:bold}
.CodeRay .type{font-weight:bold}
.CodeRay .predefined-type{color:inherit}
.CodeRay .reserved,.CodeRay .keyword {color:#000;font-weight:bold}
.CodeRay .key{color:#808}
.CodeRay .key .delimiter{color:#606}
.CodeRay .key .char{color:#80f}
.CodeRay .value{color:#088}
.CodeRay .regexp .delimiter{color:#808}
.CodeRay .regexp .content{color:#808}
.CodeRay .regexp .modifier{color:#808}
.CodeRay .regexp .char{color:#d14}
.CodeRay .regexp .function{color:#404;font-weight:bold}
.CodeRay .string{color:#d20}
.CodeRay .string .string .string{background:#ffd0d0}
.CodeRay .string .content{color:#d14}
.CodeRay .string .char{color:#d14}
.CodeRay .string .delimiter{color:#d14}
.CodeRay .shell{color:#d14}
.CodeRay .shell .delimiter{color:#d14}
.CodeRay .symbol{color:#990073}
.CodeRay .symbol .content{color:#a60}
.CodeRay .symbol .delimiter{color:#630}
.CodeRay .tag{color:#008080}
.CodeRay .tag-special{color:#d70}
.CodeRay .variable{color:#036}
.CodeRay .insert{background:#afa}
.CodeRay .delete{background:#faa}
.CodeRay .change{color:#aaf;background:#007}
.CodeRay .head{color:#f8f;background:#505}
.CodeRay .insert .insert{color:#080}
.CodeRay .delete .delete{color:#800}
.CodeRay .change .change{color:#66f}
.CodeRay .head .head{color:#f4f}
</style>
</head>
<body class="article toc2 toc-left">
<div id="header">
<h1>Arquillian Graphene 2</h1>
<div id="toc" class="toc2">
<div id="toctitle">Table of Contents</div>
<ul class="sectlevel1">
<li><a href="#_overview">1. Overview</a></li>
<li><a href="#_getting_started">2. Getting Started</a>
<ul class="sectlevel2">
<li><a href="#project-setup">2.1. Project Setup</a></li>
<li><a href="#starting-with-testing-from-java">2.2. Starting With Testing From Java</a></li>
<li><a href="#advanced-use-cases">2.3. Advanced Use Cases</a></li>
<li><a href="#under-the-hood">2.4. Under the Hood</a></li>
<li><a href="#using-drone">2.5. Using Drone</a></li>
<li><a href="#running-graphene-tests-from-an-ide">2.6. Running Graphene Tests From An IDE</a></li>
<li><a href="#framework-integration-options">2.7. Framework Integration Options</a></li>
<li><a href="#using-webdriver">2.8. Using WebDriver</a></li>
<li><a href="#using-drone-1">2.9. Using Drone</a></li>
<li><a href="#testing-ajax-1">2.10. Testing AJAX</a></li>
</ul>
</li>
<li><a href="#_graphene_configuration">3. Graphene Configuration</a>
<ul class="sectlevel2">
<li><a href="#webdriver-configuration">3.1. WebDriver Configuration</a></li>
<li><a href="#graphene-configuration-1">3.2. Graphene Configuration</a></li>
</ul>
</li>
<li><a href="#_graphene_utility_class">4. Graphene Utility Class</a>
<ul class="sectlevel2">
<li><a href="#static-import-of-graphene-utility-class">4.1. Static Import of Graphene Utility Class</a></li>
</ul>
</li>
<li><a href="#_waiting_api">5. Waiting API</a>
<ul class="sectlevel2">
<li><a href="#fluent-api">5.1. Fluent API</a></li>
<li><a href="#using-predicate">5.2. Using Predicate</a></li>
<li><a href="#using-conditions-only">5.3. Using Conditions Only</a></li>
</ul>
</li>
<li><a href="#_request_guards">6. Request Guards</a>
<ul class="sectlevel2">
<li><a href="#basic-usage">6.1. Basic Usage</a></li>
<li><a href="#use-cases">6.2. Use Cases</a></li>
</ul>
</li>
<li><a href="#_page_abstractions">7. Page Abstractions</a>
<ul class="sectlevel2">
<li><a href="#_there_comes_page_objects_pattern_to_improve_this">7.1. There Comes Page Objects Pattern To Improve This.</a></li>
<li><a href="#_therefore_graphene_introduces_a_new_concept_called_page_fragments_to_improve_this">7.2. Therefore Graphene introduces a new concept, called Page Fragments to improve this.</a></li>
<li><a href="#page-objects">7.3. Page Objects</a></li>
<li><a href="#page-fragments">7.4. Page Fragments</a></li>
<li><a href="#location-of-pages">7.5. Location of Pages</a></li>
</ul>
</li>
<li><a href="#_location_strategies">8. Location Strategies</a>
<ul class="sectlevel2">
<li><a href="#extending-the-location-strategy">8.1. Extending The Location Strategy</a></li>
<li><a href="#delegate-to-webelement">8.2. Delegate to WebElement</a></li>
<li><a href="#findby-annotation">8.3. FindBy annotation</a></li>
<li><a href="#jquery-locating-strategy">8.4. JQuery Locating Strategy</a></li>
<li><a href="#grapheneelement">8.5. GrapheneElement</a></li>
<li><a href="#inframe-annotation">8.6. InFrame Annotation</a></li>
</ul>
</li>
<li><a href="#_dependency_injection">9. Dependency Injection</a></li>
<li><a href="#_parallel_browsers">10. Parallel Browsers</a>
<ul class="sectlevel2">
<li><a href="#usage">10.1. Usage</a></li>
<li><a href="#using-page-abstractions-with-multiple-browsers">10.2. Using Page Abstractions With Multiple Browsers</a></li>
</ul>
</li>
<li><a href="#_javascript_interface">11. JavaScript Interface</a>
<ul class="sectlevel2">
<li><a href="#basic-usage">11.1. Basic Usage</a></li>
<li><a href="#more-advanced-stuff">11.2. More Advanced Stuff</a></li>
<li><a href="#customization">11.3. Customization</a></li>
</ul>
</li>
<li><a href="#_guardajax_input_sendkeys_abc">12. guardAjax(input).sendKeys("abc");</a>
<ul class="sectlevel2">
<li><a href="#issue">12.1. Issue</a></li>
<li><a href="#analysis">12.2. Analysis</a></li>
<li><a href="#solution">12.3. Solution</a></li>
</ul>
</li>
<li><a href="#_advanced_techniques">13. Advanced Techniques</a>
<ul class="sectlevel2">
<li><a href="#graphene-context-and-proxy">13.1. Graphene Context And Proxy</a></li>
<li><a href="#page-extensions-technique">13.2. Page Extensions</a></li>
<li><a href="#graphene-interceptors">13.3. Graphene Interceptors</a></li>
</ul>
</li>
<li><a href="#project-info">14. Project Info</a>
<ul class="sectlevel2">
<li><a href="#getting-started">14.1. Getting Started Guide</a></li>
</ul>
</li>
<li><a href="#contributing">15. Contributing</a></li>
<li><a href="#building-the-project">16. Building the Project</a>
<ul class="sectlevel2">
<li><a href="#prerequisities">16.1. Prerequisites</a></li>
<li><a href="#how-to-build-project">16.2. How-to build Project</a></li>
<li><a href="#running-integration-tests">16.3. Running Integration Tests</a></li>
</ul>
</li>
</ul>
</div>
</div>
<div id="content">
<div id="preamble">
<div class="sectionbody">
<div class="paragraph">
<p><span class="image"><a class="image" href="https://travis-ci.org/arquillian/arquillian-graphene"><img src="https://travis-ci.org/arquillian/arquillian-graphene.svg?branch=master" alt="Build Status"></a></span></p>
</div>
<div class="paragraph">
<p><strong>&#8216;Robust Functional Tests leveraging WebDriver with flavour of neat AJAX-ready API&#8217;</strong></p>
</div>
</div>
</div>
<div class="sect1">
<h2 id="_overview"><a class="anchor" href="#_overview"></a>1. Overview</h2>
<div class="sectionbody">
<div class="paragraph">
<p>Graphene 2 project is designed as a set of extensions for
<a href="http://docs.seleniumhq.org/">Selenium WebDriver</a> project focused
on <strong>rapid development</strong> and <strong>usability</strong> in Java environment.</p>
</div>
<div class="ulist">
<ul>
<li>
<p>API is <strong>straight forward</strong> and enforces tester to
write <strong>Ajax-enabled</strong> and <strong>reusable</strong> tests and test abstractions</p>
</li>
<li>
<p>encourages to write tests in a <a href="#_page_abstractions">consistent
level of abstraction</a> using <a href="#page-objects"><strong>Page Objects</strong></a> and
<strong><a href="#page-fragments">Page Fragments</a></strong></p>
</li>
<li>
<p>the code is <strong>robust</strong> with <strong>improved readability</strong></p>
<div class="ulist">
<ul>
<li>
<p>supports <strong><a href="#_request_guards">request guarding</a></strong> and
<strong>interception</strong></p>
</li>
<li>
<p>exposes fluent <strong><a href="#_waiting_api">Waiting API</a></strong></p>
</li>
</ul>
</div>
</li>
<li>
<p><strong>allows</strong> <strong>WebDriver API interception</strong></p>
</li>
<li>
<p>focuses on test <strong>portability across browsers</strong></p>
</li>
<li>
<p>it enables <strong>JQuery selectors as a location strategy</strong> which is familiar
to web development community</p>
</li>
<li>
<p>brings concepts for on-the-fly <strong>injection of extensions to a page
code</strong> (enabling advanced testing features)</p>
</li>
<li>
<p>can take screenshots while testing (see
<a href="https://github.com/arquillian/arquillian-graphene/blob/master/extension/screenshooter">screenshooter extension</a>),
and together with other useful info generate neat reports (see
<a href="https://github.com/arquillian/arquillian-recorder">Arquillian Recorder extension</a>).</p>
</li>
<li>
<p>integrates with <strong>Arquillian Core</strong> and <strong>Arquillian Drone</strong> extension</p>
<div class="ulist">
<ul>
<li>
<p>in order to set up browser and container integration easily</p>
</li>
</ul>
</div>
</li>
</ul>
</div>
<div class="paragraph">
<p>With all the concepts above, Graphene 2 brings power to space of
enterprise Java-based testing.</p>
</div>
</div>
</div>
<div class="sect1">
<h2 id="_getting_started"><a class="anchor" href="#_getting_started"></a>2. Getting Started</h2>
<div class="sectionbody">
<div class="paragraph">
<p>Graphene strongly ties to Arquillian Core and its extensions Containers
and Drone to manage lifecycle of the application server, selenium server
and Graphene.</p>
</div>
<div class="paragraph">
<p>In the common scenarios, you only need to choose container you would
like to deploy application into and the framework you would like to use
for testing.</p>
</div>
<div class="sect2">
<h3 id="project-setup"><a class="anchor" href="#project-setup"></a>2.1. Project Setup</h3>
<div class="sect3">
<h4 id="maven-project-dependencies"><a class="anchor" href="#maven-project-dependencies"></a>2.1.1. Maven Project Dependencies</h4>
<div class="paragraph">
<p>In order to setup project dependencies, you need to define library
dependencies. Refer to <a href="#framework-integration-options">Framework Integration Options</a> for more details.</p>
</div>
</div>
</div>
<div class="sect2">
<h3 id="starting-with-testing-from-java"><a class="anchor" href="#starting-with-testing-from-java"></a>2.2. Starting With Testing From Java</h3>
<div class="paragraph">
<p>The simplest possible test would look like this:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="CodeRay highlight"><code data-lang="java"><span class="annotation">@RunWith</span>(Arquillian.class)
<span class="directive">public</span> <span class="type">class</span> <span class="class">BasicTestCase</span> {

    <span class="annotation">@Drone</span>
    WebDriver driver;

    <span class="annotation">@Test</span>
    <span class="directive">public</span> <span class="type">void</span> testOpeningHomePage() {
        driver.get(<span class="string"><span class="delimiter">&quot;</span><span class="content">http://www.google.com</span><span class="delimiter">&quot;</span></span>);

        <span class="predefined-type">String</span> pageTitle = driver.getTitle();

        Assert.assertEquals(pageTitle, <span class="string"><span class="delimiter">&quot;</span><span class="content">Google</span><span class="delimiter">&quot;</span></span>);
    }
}</code></pre>
</div>
</div>
<div class="paragraph">
<p>This test uses @Drone annotation in order to bring browser to your test
case using dependency injection. You can read more about <a href="#using-drone-1">Using Drone</a>, to get
information about which instances to use in which situations.</p>
</div>
<div class="paragraph">
<p>The browser is represented by WebDriver class instance (or its
implementations). For more information about <em>what is WebDriver</em> and how it relates to Graphene,
look at <a href="#using-webdriver">Using WebDriver</a>.</p>
</div>
<div class="paragraph">
<p>This is a really simple case and does not really show where Graphene
excels.</p>
</div>
</div>
<div class="sect2">
<h3 id="advanced-use-cases"><a class="anchor" href="#advanced-use-cases"></a>2.3. Advanced Use Cases</h3>
<div class="sect3">
<h4 id="page-abstractions"><a class="anchor" href="#page-abstractions"></a>2.3.1. Page Abstractions</h4>
<div class="paragraph">
<p>On the high level, Graphene allows you to create reusable abstractions
in form of <a href="#page-objects">Page Objects</a>
(the pattern widely known in Selenium community)
and <a href="#page-fragments">Page
Fragments</a>, which allows you to encapsulate smaller pieces of your page
like JavaScript widgets, UI components or simply forms.</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="CodeRay highlight"><code data-lang="java"><span class="annotation">@RunWith</span>(Arquillian.class)
<span class="directive">public</span> <span class="type">class</span> <span class="class">TestLogin</span> {

    <span class="annotation">@Drone</span>
    WebDriver browser;

    <span class="annotation">@Page</span>
    HomePage homePage;

    <span class="annotation">@Test</span>(expects = LoginFailedException.class)
    <span class="directive">public</span> <span class="type">void</span> testLoginFailed()
        homePage.login(<span class="string"><span class="delimiter">&quot;</span><span class="content">non-existent</span><span class="delimiter">&quot;</span></span>, <span class="string"><span class="delimiter">&quot;</span><span class="content">user</span><span class="delimiter">&quot;</span></span>);
    }
}


<span class="directive">public</span> <span class="type">class</span> <span class="class">HomePage</span> {

    <span class="annotation">@FindBy</span>(<span class="string"><span class="delimiter">&quot;</span><span class="content">.login-form</span><span class="delimiter">&quot;</span></span>)
    LoginDialog loginDialog;

    <span class="annotation">@FindBy</span>(<span class="string"><span class="delimiter">&quot;</span><span class="content">.search</span><span class="delimiter">&quot;</span></span>)
    AutocompleteComponent fulltextSearch;

    <span class="annotation">@FindBy</span>(<span class="string"><span class="delimiter">&quot;</span><span class="content">.events</span><span class="delimiter">&quot;</span></span>)
    CalendarComponent eventCalendar;

    <span class="comment">/**
     * @throws LoginFailedException when login fails
     */</span>
    <span class="directive">public</span> <span class="type">void</span> login(<span class="predefined-type">String</span> user, <span class="predefined-type">String</span> password) {
       loginDialog.setUser(user);
       loginDialog.setPassword(password);
       loginDialog.login();
    }

   <span class="directive">public</span> <span class="type">void</span> switchToEvent(<span class="predefined-type">Date</span> date) {
       eventCalendar.clickOnDate(date);
   }
}</code></pre>
</div>
</div>
<div class="paragraph">
<p>You can read more about using reusable <a href="#_page_abstractions">Page
Abstractions</a>.</p>
</div>
</div>
<div class="sect3">
<h4 id="testing-ajax"><a class="anchor" href="#testing-ajax"></a>2.3.2. Testing AJAX</h4>
<div class="paragraph">
<p>Second big promise of Graphene is make testing of applications using
asynchronous calls heavily (AJAX, WebSocket, &#8230;&#8203;) a simple task.</p>
</div>
<div class="paragraph">
<p>Graphene allows that by exposing compact syntax for describing
conditions which must be met on the page once asynchronous call is
finished.</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="CodeRay highlight"><code data-lang="java"><span class="annotation">@Test</span>
<span class="directive">public</span> <span class="type">void</span> testRegistrationForm()
    guardXhr(nameInput).sendKeys(<span class="string"><span class="delimiter">&quot;</span><span class="content">John</span><span class="delimiter">&quot;</span></span>);
    assertEquals(nameMessage, <span class="string"><span class="delimiter">&quot;</span><span class="content">The username was already registered</span><span class="delimiter">&quot;</span></span>);
}

<span class="annotation">@Test</span>
<span class="directive">public</span> <span class="type">void</span> testRegistrationForm() {
    nameInput.sendKeys(<span class="string"><span class="delimiter">&quot;</span><span class="content">John</span><span class="delimiter">&quot;</span></span>);
    waitAjax(element(nameMessage).textContains(<span class="string"><span class="delimiter">&quot;</span><span class="content">already registered</span><span class="delimiter">&quot;</span></span>));
}</code></pre>
</div>
</div>
<div class="paragraph">
<p>You can read more about <a href="#testing-ajax-1">Testing AJAX</a>, or can go
directly to the documentation of features, which enables
that:</p>
</div>
<div class="sect4">
<h5 id="graphene-utility-class"><a class="anchor" href="#graphene-utility-class"></a>Graphene Utility Class</h5>
<div class="paragraph">
<p><a href="#_graphene_utility_class">Graphene Utility Class</a> enables compact syntax for waiting and guards.</p>
</div>
</div>
<div class="sect4">
<h5 id="request-guards"><a class="anchor" href="#request-guards"></a>Request Guards</h5>
<div class="paragraph">
<p><a href="#_request_guards">Request
Guards</a> bring simplest conditions like wait for a request to finish
(blocking test).</p>
</div>
</div>
</div>
</div>
<div class="sect2">
<h3 id="under-the-hood"><a class="anchor" href="#under-the-hood"></a>2.4. Under the Hood</h3>
<div class="paragraph">
<p>Graphene enables way more features on a low level. Using following features may help you write outstanding tests:</p>
</div>
<div class="sect3">
<h4 id="graphene-context"><a class="anchor" href="#graphene-context"></a>2.4.1. Graphene Context</h4>
<div class="paragraph">
<p>Allows you to obtain current thread-local context of the browser and
"inject" it where you need it without reference propagation.</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="CodeRay highlight"><code data-lang="java">WebDriver browser = GrapheneContext.getContextFor(Default.class).getWebDriver();</code></pre>
</div>
</div>
</div>
<div class="sect3">
<h4 id="javascript-interface"><a class="anchor" href="#javascript-interface"></a>2.4.2. JavaScript Interface</h4>
<div class="paragraph">
<p>Allows you to call JavaScript functions from Java directly.</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="CodeRay highlight"><code data-lang="java"><span class="annotation">@JavaScript</span>
<span class="directive">public</span> <span class="type">interface</span> <span class="class">Document</span> {
    <span class="predefined-type">String</span> getTitle();
}</code></pre>
</div>
</div>
</div>
<div class="sect3">
<h4 id="page-extensions"><a class="anchor" href="#page-extensions"></a>2.4.3. Page Extensions</h4>
<div class="paragraph">
<p>Allows you to bring JavaScript code to the browser.</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="CodeRay highlight"><code data-lang="java"><span class="annotation">@Dependency</span>(<span class="string"><span class="delimiter">&quot;</span><span class="content">requestGuard.js</span><span class="delimiter">&quot;</span></span>)
<span class="annotation">@JavaScript</span>(<span class="string"><span class="delimiter">&quot;</span><span class="content">graphene.requestGuard</span><span class="delimiter">&quot;</span></span>)
<span class="directive">public</span> <span class="type">interface</span> <span class="class">RequestGuard</span> {
    RequestType getRequestDone();
}</code></pre>
</div>
</div>
</div>
</div>
<div class="sect2">
<h3 id="using-drone"><a class="anchor" href="#using-drone"></a>2.5. Using Drone</h3>
<div class="paragraph">
<p>Drone is an extension for Arquillian that manages lifecycle of the Selenium
Server and Selenium clients as Selenium 1.x, Selenium 2.x and Graphene.</p>
</div>
<div class="paragraph">
<p>Refer to <a href="#using-drone-1">Using Drone</a> section for more information.</p>
</div>
</div>
<div class="sect2">
<h3 id="running-graphene-tests-from-an-ide"><a class="anchor" href="#running-graphene-tests-from-an-ide"></a>2.6. Running Graphene Tests From An IDE</h3>
<div class="paragraph">
<p>It is possible to run Graphene tests from any modern IDE. See
<a href="http://arquillian.org/guides/getting_started">Arquillian Getting Started
Guide</a> for more information about how to run and debug tests in Eclipse.</p>
</div>
</div>
<div class="sect2">
<h3 id="framework-integration-options"><a class="anchor" href="#framework-integration-options"></a>2.7. Framework Integration Options</h3>
<div class="paragraph">
<p>In order to setup Graphene&#8217;s library dependencies, you need to choose
between components:</p>
</div>
<div class="ulist">
<ul>
<li>
<p>Test Framework (JUnit, TestNG, &#8230;&#8203;)</p>
</li>
<li>
<p>Arquillian Mode (standalone, container)</p>
</li>
</ul>
</div>
<div class="sect3">
<h4 id="test-framework-options"><a class="anchor" href="#test-framework-options"></a>2.7.1. Test Framework Options</h4>
<div class="paragraph">
<p>For Graphene to fluently work with JUnit and TestNG, you need to include
their dependencies in your POM dependencies section:</p>
</div>
<div class="sect4">
<h5 id="junit"><a class="anchor" href="#junit"></a>JUnit</h5>
<div class="listingblock">
<div class="content">
<pre class="CodeRay highlight"><code data-lang="java">&lt;!-- JUnit --&gt;
&lt;dependency&gt;
    &lt;groupId&gt;junit&lt;/groupId&gt;
    &lt;artifactId&gt;junit&lt;/artifactId&gt;
    &lt;scope&gt;test&lt;/scope&gt;
&lt;/dependency&gt;</code></pre>
</div>
</div>
</div>
<div class="sect4">
<h5 id="testng"><a class="anchor" href="#testng"></a>TestNG</h5>
<div class="listingblock">
<div class="content">
<pre class="CodeRay highlight"><code data-lang="java">&lt;!-- TestNG --&gt;
&lt;dependency&gt;
    &lt;groupId&gt;org.testng&lt;/groupId&gt;
    &lt;artifactId&gt;testng&lt;/artifactId&gt;
    &lt;scope&gt;test&lt;/scope&gt;
&lt;/dependency&gt;</code></pre>
</div>
</div>
</div>
</div>
<div class="sect3">
<h4 id="arquillian-mode-options"><a class="anchor" href="#arquillian-mode-options"></a>2.7.2. Arquillian Mode Options</h4>
<div class="paragraph">
<p>You can choose between following Arquillian modes</p>
</div>
<div class="ulist">
<ul>
<li>
<p><strong>Standalone</strong></p>
<div class="ulist">
<ul>
<li>
<p>runs tests without container integration, only lifecycle of
extensions is managed</p>
</li>
<li>
<p>allows to use Graphene independently of Arquillian containers and
deployment management</p>
</li>
</ul>
</div>
</li>
<li>
<p><strong>Container</strong></p>
<div class="ulist">
<ul>
<li>
<p>runs tests with container, managed lifecycle of container including
deployment</p>
</li>
<li>
<p>you can still use Graphene without managing lifecycle - just do not
provide @Deployment in your test case and include those in dependencies
section of your POM.</p>
</li>
</ul>
</div>
</li>
</ul>
</div>
<div class="admonitionblock note">
<table>
<tr>
<td class="icon">
<i class="fa icon-note" title="Note"></i>
</td>
<td class="content">
You need to use Arquillian integration specific for your test
framework - following dependencies are for JUnit -  for using TestNG,
you need to replace "junit" keyword with "testng"
</td>
</tr>
</table>
</div>
<div class="sect4">
<h5 id="standalone-mode"><a class="anchor" href="#standalone-mode"></a>Standalone Mode</h5>
<div class="listingblock">
<div class="content">
<pre class="CodeRay highlight"><code data-lang="java">&lt;!-- Arquillian JUnit Standalone --&gt;
&lt;dependency&gt;
    &lt;groupId&gt;org.jboss.arquillian.junit&lt;/groupId&gt;
    &lt;artifactId&gt;arquillian-junit-standalone&lt;/artifactId&gt;
    &lt;scope&gt;test&lt;/scope&gt;
&lt;/dependency&gt;</code></pre>
</div>
</div>
</div>
<div class="sect4">
<h5 id="container-mode"><a class="anchor" href="#container-mode"></a>Container Mode</h5>
<div class="listingblock">
<div class="content">
<pre class="CodeRay highlight"><code data-lang="java">&lt;!-- Arquillian JUnit <span class="predefined-type">Container</span> --&gt;
&lt;dependency&gt;
    &lt;groupId&gt;org.jboss.arquillian.junit&lt;/groupId&gt;
    &lt;artifactId&gt;arquillian-junit-container&lt;/artifactId&gt;
    &lt;scope&gt;test&lt;/scope&gt;
&lt;/dependency&gt;</code></pre>
</div>
</div>
<div class="sect5">
<h6 id="which-version-to-use"><a class="anchor" href="#which-version-to-use"></a>Which Version To Use?</h6>
<div class="paragraph">
<p>To find out which version to use, check out <a href="http://arquillian.org/modules/core-platform/" class="bare">http://arquillian.org/modules/core-platform/</a></p>
</div>
</div>
</div>
</div>
<div class="sect3">
<h4 id="container-management"><a class="anchor" href="#container-management"></a>2.7.3. Container Management</h4>
<div class="paragraph">
<p>Graphene uses Arquillian Containers in order to manage lifecycle of the
application container and deployment.</p>
</div>
<div class="paragraph">
<p>To setup Arquillian to use your favorite container, refer
to 
<a href="https://docs.jboss.org/author/display/ARQ/Container+adapters">Container
adapters</a>.</p>
</div>
</div>
<div class="sect3">
<h4 id="selenium-version"><a class="anchor" href="#selenium-version"></a>2.7.4. Selenium Version</h4>
<div class="paragraph">
<p><strong>Graphene 2</strong> covers integration with <strong>WebDriver</strong> (aka Selenium 2), but
it can be used in the same project together with <strong>Graphene 1</strong> (based on
<strong>Selenium 1</strong>).</p>
</div>
<div class="paragraph">
<p>For more detailed summary of differences, refer
to <a href="#which-graphene-to-use">which Graphene to use?</a></p>
</div>
<div class="paragraph">
<p>When adding following dependencies, all required dependencies should be
brought to your project as transitive dependencies, including:</p>
</div>
<div class="ulist">
<ul>
<li>
<p>Drone</p>
</li>
<li>
<p>WebDriver</p>
</li>
</ul>
</div>
<div class="sect4">
<h5 id="use-graphene"><a class="anchor" href="#use-graphene"></a>Use Graphene:</h5>
<div class="listingblock">
<div class="content">
<pre class="CodeRay highlight"><code data-lang="java">&lt;dependency&gt;
    &lt;groupId&gt;org.jboss.arquillian.graphene&lt;/groupId&gt;
    &lt;artifactId&gt;graphene-webdriver&lt;/artifactId&gt;
    &lt;type&gt;pom&lt;/type&gt;
    &lt;scope&gt;test&lt;/scope&gt;
&lt;/dependency&gt;</code></pre>
</div>
</div>
<div class="sect5">
<h6 id="which-version-to-use-1"><a class="anchor" href="#which-version-to-use-1"></a>Which Version To Use?</h6>
<div class="paragraph">
<p>To find out which version to use, check out <a href="http://arquillian.org/modules/graphene-extension/" class="bare">http://arquillian.org/modules/graphene-extension/</a></p>
</div>
<div class="admonitionblock note">
<table>
<tr>
<td class="icon">
<i class="fa icon-note" title="Note"></i>
</td>
<td class="content">
In order to rewrite dependencies transitively brought by Graphene
(e.g. Drone), you can use BOMs (see bellow)
</td>
</tr>
</table>
</div>
</div>
</div>
</div>
<div class="sect3">
<h4 id="which-graphene-to-use"><a class="anchor" href="#which-graphene-to-use"></a>2.7.5. Which Graphene To Use ?</h4>
<div class="paragraph">
<p>Graphene 1 (GrapheneSelenium) is derived from Selenium 1 (DefaultSelenium) and its base API is type-safe version of Selenium 1.</p>
</div>
<div class="paragraph">
<p>Graphene 2 is built on top of Selenium WebDriver (WebDriver) and it adds more functionality over basic WebDriver API.</p>
</div>
<div class="paragraph">
<p>Summary</p>
</div>
<table class="tableblock frame-all grid-all spread">
<colgroup>
<col style="width: 33.3333%;">
<col style="width: 33.3333%;">
<col style="width: 33.3334%;">
</colgroup>
<tbody>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">Name</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Class</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Features</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">Selenium 1</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">DefaultSelenium</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">-</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">Graphene 1</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">GrapheneSelenium</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">type-safe version of DefaultSelenium + extensions</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">Selenium 2</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">WebDriver and DefaultSelenium</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">-</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">Graphene 2</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">WebDriver</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">extensions for WebDriver</p></td>
</tr>
</tbody>
</table>
<div class="sect4">
<h5 id="_faq"><a class="anchor" href="#_faq"></a>FAQ</h5>
<div class="paragraph">
<p><strong><em>What are differences between Graphene 1 and Graphene 2?</em></strong></p>
</div>
<div class="paragraph">
<p>The differences are same like <a href="http://stackoverflow.com/questions/5692173/selenium-1-to-selenium-2-migration/6025228#6025228">between Selenium 1 and Selenium 2</a>.</p>
</div>
<div class="paragraph">
<p><strong><em>Do I need to migrate tests from Graphene 1 to Graphene 2?</em></strong></p>
</div>
<div class="paragraph">
<p>No, you can use them side by side - Selenium 2 comes with both APIs bundled in one library (DefaultSelenium and WebDriver),
and Graphene 1 and Graphene 2 follows that pattern.<br>
Drone will make sure it instantiates right version for you.</p>
</div>
<div class="paragraph">
<p><strong><em>What version is recommended?</em></strong></p>
</div>
<div class="paragraph">
<p>Graphene 2 is the one which we focus development on - it is planned to have all features of Graphene 1 migrated to Graphene 2.<br>
In the future, Graphene 2 will likely get functions which aren&#8217;t available for Graphene1, e.g.:
<a href="#_page_abstractions">page abstractions.</a></p>
</div>
</div>
</div>
<div class="sect3">
<h4 id="bom-and-dependency-management-usage"><a class="anchor" href="#bom-and-dependency-management-usage"></a>2.7.6. BOM and Dependency Management Usage</h4>
<div class="paragraph">
<p>In order to manage or override dependency versions used in the project,
it is recommended to use
<a href="http://maven.apache.org/guides/introduction/introduction-to-dependency-mechanism.html">BOM</a>s.
By importing BOM to your Maven POM, you manage versions of dependencies,
so you don&#8217;t need to define them explicitly.</p>
</div>
<div class="paragraph">
<p>In connection to Graphene, you may want to use these BOMs:</p>
</div>
<div class="ulist">
<ul>
<li>
<p><a href="http://arquillian.org/modules/core-platform/">arquillian-bom</a></p>
</li>
<li>
<p><a href="http://arquillian.org/modules/drone-extension/">arquillian-drone-bom</a></p>
</li>
<li>
<p><a href="https://github.com/arquillian/arquillian-selenium-bom">selenium-bom</a></p>
</li>
</ul>
</div>
</div>
</div>
<div class="sect2">
<h3 id="using-webdriver"><a class="anchor" href="#using-webdriver"></a>2.8. Using WebDriver</h3>
<div class="paragraph">
<p>Graphene builds on top of Selenium WebDriver project and brings
extensions which helps you write robust Java-based tests simply from
your IDE.</p>
</div>
<div class="paragraph">
<p>Graphene is thus not a standalone project, but an extension over Arquillian
and Selenium projects to make testing easier.</p>
</div>
<div class="sect3">
<h4 id="how-to-learn-webdriver"><a class="anchor" href="#how-to-learn-webdriver"></a>2.8.1. How to Learn WebDriver?</h4>
<div class="paragraph">
<p>You can start with resources
<a href="http://seleniumhq.org/docs/03_webdriver.html">Introducing WebDriver</a> and
<a href="http://seleniumhq.org/docs/04_webdriver_advanced.html">WebDriver&#8217;s
Advanced Usage</a>.</p>
</div>
<div class="paragraph">
<p>After getting yourself familiar with what WebDriver is, you can dive into
Graphene documentation.<br>
If you don&#8217;t find resources on how to achieve something with Graphene,
let&#8217;s try to look on how to achieve that with WebDriver.</p>
</div>
</div>
<div class="sect3">
<h4 id="why-i-need-graphene"><a class="anchor" href="#why-i-need-graphene"></a>2.8.2. Why I Need Graphene?</h4>
<div class="paragraph">
<p>Graphene helps you to bring your test project to the world of Arquillian
as well as it brings you very useful addons.</p>
</div>
<div class="paragraph">
<p>However you can use as much Graphene as you want, since Graphene
integrates with WebDriver non-pervasively.</p>
</div>
</div>
<div class="sect3">
<h4 id="graphene-integration-with-webdriver---under-the-hood"><a class="anchor" href="#graphene-integration-with-webdriver---under-the-hood"></a>2.8.3. Graphene Integration With WebDriver - Under the Hood</h4>
<div class="paragraph">
<p>The integration starts with instantiation of the WebDriver instance
leveraging Arquillian Drone extension.</p>
</div>
<div class="paragraph">
<p>Graphene then takes new instance of WebDriver&#8217;s browser session and
store it in its context.</p>
</div>
<div class="paragraph">
<p>Then Graphene also wraps the WebDriver instance in order to intercept
calls.</p>
</div>
</div>
</div>
<div class="sect2">
<h3 id="using-drone-1"><a class="anchor" href="#using-drone-1"></a>2.9. Using Drone</h3>
<div class="paragraph">
<p>Graphene integrates with Arquillian Drone to simplify process of
instantiation of browser session.<br>
So Drone takes care of WebDriver instance creation and configuration and
then it delegates this session to Graphene.</p>
</div>
<div class="sect3">
<h4 id="configuration"><a class="anchor" href="#configuration"></a>2.9.1. Configuration</h4>
<div class="paragraph">
<p>Graphene shares the configuration with Drone WebDriver, so you can refer
to <a href="http://arquillian.org/arquillian-extension-drone">Drone</a>.</p>
</div>
<div class="paragraph">
<p>In general, configuration is driven by arquillian.xml and can be
overriden by System properties.</p>
</div>
</div>
<div class="sect3">
<h4 id="browser-instantiation"><a class="anchor" href="#browser-instantiation"></a>2.9.2. Browser Instantiation</h4>
<div class="paragraph">
<p>You can ask Drone to instantiate any <strong>specific implementation</strong> of
WebDriver like FirefoxDriver, ChromeDriver or HtmlUnitDriver, e.g.:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="CodeRay highlight"><code data-lang="java"><span class="annotation">@Drone</span>
FirefoxDriver browser;</code></pre>
</div>
</div>
<div class="paragraph">
<p>But it is <strong>recommended</strong> to use WebDriver interface and use
arquillian.xml to choose appropriate browser instance:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="CodeRay highlight"><code data-lang="java"><span class="annotation">@Drone</span>
WebDriver browser;</code></pre>
</div>
</div>
<div class="listingblock">
<div class="content">
<pre class="CodeRay highlight"><code data-lang="java"> &lt;arquillian xmlns=<span class="string"><span class="delimiter">&quot;</span><span class="content">http://jboss.com/arquillian</span><span class="delimiter">&quot;</span></span> xmlns:xsi=<span class="string"><span class="delimiter">&quot;</span><span class="content">http://www.w3.org/2001/XMLSchema-instance</span><span class="delimiter">&quot;</span></span>
    xsi:schemaLocation=<span class="string"><span class="delimiter">&quot;</span><span class="content">http://jboss.org/schema/arquillian http://jboss.org/schema/arquillian/arquillian_1_0.xsd</span><span class="delimiter">&quot;</span></span>&gt;

    &lt;extension qualifier=<span class="string"><span class="delimiter">&quot;</span><span class="content">webdriver</span><span class="delimiter">&quot;</span></span>&gt;
        &lt;property name=<span class="string"><span class="delimiter">&quot;</span><span class="content">browser</span><span class="delimiter">&quot;</span></span>&gt;firefox&lt;/property&gt;
    &lt;/extension&gt;

&lt;/arquillian&gt;</code></pre>
</div>
</div>
<div class="paragraph">
<p>For more configuration options, refer to
<a href="http://arquillian.org/arquillian-extension-drone">Drone</a> and
<a href="http://seleniumhq.org/docs/03_webdriver.html#selenium-webdriver-s-drivers">browser
driver implementations</a>.</p>
</div>
</div>
<div class="sect3">
<h4 id="drone-reusable-session"><a class="anchor" href="#drone-reusable-session"></a>2.9.3. Drone Reusable Session</h4>
<div class="paragraph">
<p>In order to speed up development, Drone comes with Reusable Remote
WebDriver Session feature.</p>
</div>
<div class="paragraph">
<p>This feature ensures that Drone does not close the browser session at
the end of each test, and stores the session handle in permanent storage.</p>
</div>
<div class="paragraph">
<p>Thus after running first test, browser session is still open and next
tests can reuse it.</p>
</div>
<div class="sect4">
<h5 id="speed-up-development"><a class="anchor" href="#speed-up-development"></a>Speed Up Development</h5>
<div class="paragraph">
<p>Since browser session does not have to be opened repeatedly, Drone saves
this time and repeating a test leads into huge time savings.</p>
</div>
<div class="paragraph">
<p>This enables browser automated test development to as close as unit tests
execution time as possible.</p>
</div>
</div>
<div class="sect4">
<h5 id="improved-browser-debugging"><a class="anchor" href="#improved-browser-debugging"></a>Improved Browser Debugging</h5>
<div class="paragraph">
<p>Since session is not closed at the end of test, you can tweak anything
in browser setup you want including setup of browser debuggers (Firebug,
Chrome Dev Tools).</p>
</div>
<div class="paragraph">
<p>You can for example:</p>
</div>
<div class="ulist">
<ul>
<li>
<p>open debugger and watch network usage</p>
</li>
<li>
<p>insert breakpoints to scripts</p>
</li>
<li>
<p>watch browser console</p>
</li>
</ul>
</div>
<div class="admonitionblock note">
<table>
<tr>
<td class="icon">
<i class="fa icon-note" title="Note"></i>
</td>
<td class="content">
It is tempting to use this feature to also speed up test
execution - this is not recommended, since then tests can influence each
other.
</td>
</tr>
</table>
</div>
</div>
<div class="sect4">
<h5 id="using-selenium-server"><a class="anchor" href="#using-selenium-server"></a>Using Selenium Server</h5>
<div class="paragraph">
<p>This feature is available only when using remote WebDriver session. So
you need to <a href="http://seleniumhq.org/download/">download appropriate version
of Selenium Server</a> and start the server:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="CodeRay highlight"><code data-lang="java">java -jar selenium-server-standalone-<span class="float">2.35</span><span class="float">.0</span>.jar</code></pre>
</div>
</div>
<div class="paragraph">
<p>Now Drone can connect to this server and share the session-id across
several tests.</p>
</div>
</div>
<div class="sect4">
<h5 id="turn-on-reusable-browser-session-session"><a class="anchor" href="#turn-on-reusable-browser-session-session"></a>Turn on Reusable Browser Session session</h5>
<div class="paragraph">
<p>You can turn on Reusable Browser Session by following entry:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="CodeRay highlight"><code data-lang="java">&lt;arquillian xmlns=<span class="string"><span class="delimiter">&quot;</span><span class="content">http://jboss.com/arquillian</span><span class="delimiter">&quot;</span></span> xmlns:xsi=<span class="string"><span class="delimiter">&quot;</span><span class="content">http://www.w3.org/2001/XMLSchema-instance</span><span class="delimiter">&quot;</span></span>
    xsi:schemaLocation=<span class="string"><span class="delimiter">&quot;</span><span class="content">http://jboss.org/schema/arquillian http://jboss.org/schema/arquillian/arquillian_1_0.xsd</span><span class="delimiter">&quot;</span></span>&gt;

    &lt;extension qualifier=<span class="string"><span class="delimiter">&quot;</span><span class="content">webdriver</span><span class="delimiter">&quot;</span></span>&gt;
        &lt;property name=<span class="string"><span class="delimiter">&quot;</span><span class="content">remoteReusable</span><span class="delimiter">&quot;</span></span>&gt;<span class="predefined-constant">true</span>&lt;/property&gt;
        &lt;property name=<span class="string"><span class="delimiter">&quot;</span><span class="content">remoteAddress</span><span class="delimiter">&quot;</span></span>&gt;http:<span class="comment">//localhost:4444/wd/hub/&lt;/property&gt;</span>
    &lt;/extension&gt;

&lt;/arquillian&gt;</code></pre>
</div>
</div>
</div>
</div>
</div>
<div class="sect2">
<h3 id="testing-ajax-1"><a class="anchor" href="#testing-ajax-1"></a>2.10. Testing AJAX</h3>
<div class="paragraph">
<p>When testing AJAX-enabled applications, you are facing big deal
of asynchronous behavior:</p>
</div>
<div class="sect3">
<h4 id="waiting-for-the-results-of-actions"><a class="anchor" href="#waiting-for-the-results-of-actions"></a>2.10.1. Waiting for the Results of Actions</h4>
<div class="paragraph">
<p>When calling any action, it takes time before browser&#8217;s request is
processed on the server. Test must be written so that it counts with any time before it can
proceed with execution. This does not include only server processing, but also complex
client-side computations.</p>
</div>
<div class="sect4">
<h5 id="solution-waiting-for-appropriate-conditions"><a class="anchor" href="#solution-waiting-for-appropriate-conditions"></a>Solution: Waiting for Appropriate Conditions</h5>
<div class="paragraph">
<p>When writing tests, you must be aware what changes are happening on a
page as a result of user action and design a appropriate condition to
wait for.</p>
</div>
<div class="paragraph">
<p>Graphene offers two solution to waiting for appropriate conditions:</p>
</div>
<div class="sect5">
<h6 id="waiting-conditions"><a class="anchor" href="#waiting-conditions"></a>Waiting Conditions</h6>
<div class="paragraph">
<p>Graphene uses <code>WebDriverWait</code> object and defines most used waiting
conditions in <a href="#_graphene_utility_class">Graphene Utility Class</a>.</p>
</div>
<div class="paragraph">
<p>When defining waiting conditions, you might use exact or benevolent
conditions:</p>
</div>
<div class="ulist">
<ul>
<li>
<p><strong>benevolent</strong> conditions (e.g. wait for text to appear on the page) are
more robust, but does not test exact page conditions</p>
</li>
<li>
<p><strong>exact</strong> conditions (e.g. wait for given element to have text which is
equal to) tests application behavior more closely, but they are more
error-prone</p>
</li>
</ul>
</div>
<div class="paragraph">
<p>You can read more about <a href="#_waiting_api">Waiting API</a>.</p>
</div>
</div>
<div class="sect5">
<h6 id="request-guards-1"><a class="anchor" href="#request-guards-1"></a>Request Guards</h6>
<div class="paragraph">
<p>More powerful mechanism than conditions -
<a href="#_request_guards">Request Guards</a> - watches request object on the page and
waits for the given browser communication (HTTP, AJAX) to happen.</p>
</div>
<div class="admonitionblock warning">
<table>
<tr>
<td class="icon">
<i class="fa icon-warning" title="Warning"></i>
</td>
<td class="content">
It is not sufficient to use any mechanism for pausing the
test as the mechanism for waiting for conditions (e.g. Thread.sleep) as
it leads to unstable tests and increases execution time. The golden rule
is that each action must have appropriate reaction on the page,
otherwise the UI is not designed well.
</td>
</tr>
</table>
</div>
</div>
</div>
</div>
<div class="sect3">
<h4 id="elements-not-present"><a class="anchor" href="#elements-not-present"></a>2.10.2. Elements Not Present</h4>
<div class="paragraph">
<p>Test must be aware that elements which tests depend on might not be
present immediately, but might be shown after the asynchronous action
is processed.</p>
</div>
<div class="sect4">
<h5 id="solution-defensive-conditions"><a class="anchor" href="#solution-defensive-conditions"></a>Solution: Defensive Conditions</h5>
<div class="paragraph">
<p>Graphene&#8217;s built-in waiting conditions are coded in defensive manner, it
means when you are waiting before the element&#8217;s background becomes red,
the condition will not fail when element is not present.</p>
</div>
</div>
</div>
<div class="sect3">
<h4 id="stale-dom-elements"><a class="anchor" href="#stale-dom-elements"></a>2.10.3. Stale DOM Elements</h4>
<div class="paragraph">
<p>AJAX-based applications often update page content by replacing a
portion of the DOM with another one.<br>
Even though the rendered output might be the same, the element references
might be different.</p>
</div>
<div class="sect4">
<h5 id="solution-staleness-aware-page-abstractions"><a class="anchor" href="#solution-staleness-aware-page-abstractions"></a>Solution: Staleness Aware Page Abstractions</h5>
<div class="paragraph">
<p><a href="#_page_abstractions">Page abstractions</a> created by Graphene are by default
aware of stale element, so they try to re-initialize element reference when
they find out the reference is stale.</p>
</div>
</div>
</div>
</div>
</div>
</div>
<div class="sect1">
<h2 id="_graphene_configuration"><a class="anchor" href="#_graphene_configuration"></a>3. Graphene Configuration</h2>
<div class="sectionbody">
<div class="paragraph">
<p>Graphene is configured using
<a href="http://arquillian.org/arquillian-extension-drone/#configuring-drone-instances">arquillian.xml
or alternatively via system properties</a>.</p>
</div>
<div class="sect2">
<h3 id="webdriver-configuration"><a class="anchor" href="#webdriver-configuration"></a>3.1. WebDriver Configuration</h3>
<div class="paragraph">
<p>Graphene uses WebDriver directly and thus it can be
configured via <code>webdriver</code> extension configuration.</p>
</div>
<div class="paragraph">
<p>Refer to 
<a href="http://arquillian.org/arquillian-extension-drone/#configuring-drone-instances">Selenium
2 configuration</a> options in Drone guide.</p>
</div>
</div>
<div class="sect2">
<h3 id="graphene-configuration-1"><a class="anchor" href="#graphene-configuration-1"></a>3.2. Graphene Configuration</h3>
<div class="paragraph">
<p>Graphene specific configurations can be setup via <code>arquillian.xml</code> as
well:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="CodeRay highlight"><code data-lang="java">&lt;extension qualifier=<span class="string"><span class="delimiter">&quot;</span><span class="content">graphene</span><span class="delimiter">&quot;</span></span>&gt;
<span class="error"> </span> <span class="error"> </span>&lt;property name=<span class="string"><span class="delimiter">&quot;</span><span class="content">waitGuiInterval</span><span class="delimiter">&quot;</span></span>&gt;<span class="integer">3</span>&lt;/property&gt;
&lt;/extension&gt;</code></pre>
</div>
</div>
<table class="tableblock frame-all grid-all spread">
<colgroup>
<col style="width: 11.1111%;">
<col style="width: 55.5555%;">
<col style="width: 33.3334%;">
</colgroup>
<thead>
<tr>
<th class="tableblock halign-left valign-top">Configuration Property</th>
<th class="tableblock halign-left valign-top">Description</th>
<th class="tableblock halign-left valign-top">Default Value</th>
</tr>
</thead>
<tbody>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>waitGuiInterval</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">timeout for Graphene.waitGui method - waits for a short time, typically
waits for client-side operations</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">1 sec</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>waitAjaxInterval</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">timeout for waitAjax - waits for longer time, typically ajax request
with no computational load</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">2 sec</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>waitModelInterval</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">timeout for waitModel - waits for a long time, typically database
requests or other computationally hard operations</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">5 sec</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>waitGuardInterval</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">timeout for request guard methods</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">equals to <code>waitAjaxInterval</code></p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>defaultElementLocatingStrategy</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">default locating strategy when there is empty <code>@FindBy</code> over element</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>idOrName</code></p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>javascriptInstallationLimit</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">timeout for installing JavaScript to the page via page extension
mechanism</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">5 sec </p></td>
</tr>
</tbody>
</table>
<div class="paragraph">
<p>You can also configure Graphene via <strong>System Properties</strong> either from
command line or <code>pom.xml</code>:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="CodeRay highlight"><code data-lang="java">-Darq.extension.graphene.waitAjaxInterval=<span class="integer">3</span></code></pre>
</div>
</div>
<div class="listingblock">
<div class="content">
<pre class="CodeRay highlight"><code data-lang="java">&lt;build&gt;
  &lt;plugins&gt;
    &lt;plugin&gt;
      &lt;artifactId&gt;maven-surefire-plugin&lt;/artifactId&gt;
      &lt;configuration&gt;
        &lt;systemProperties&gt;
          &lt;arq.extension.graphene.waitAjaxInterval&gt;<span class="integer">3</span>&lt;/arq.extension.graphene.waitAjaxInterval&gt;
        &lt;/systemProperties&gt;
      &lt;/configuration&gt;
    &lt;/plugin&gt;
  &lt;/plugins&gt;
&lt;/build&gt;</code></pre>
</div>
</div>
</div>
</div>
</div>
<div class="sect1">
<h2 id="_graphene_utility_class"><a class="anchor" href="#_graphene_utility_class"></a>4. Graphene Utility Class</h2>
<div class="sectionbody">
<div class="paragraph">
<p>Graphene is an entry point for the common one-line operations:</p>
</div>
<div class="ulist">
<ul>
<li>
<p><a href="#waitings">Waitings</a></p>
</li>
<li>
<p><a href="#utility-class-request-guards">Request Guards</a></p>
</li>
<li>
<p><a href="#creating-page-fragments-dynamically">Creating Page Fragments Dynamically</a></p>
</li>
<li>
<p><a href="#page-object-location-encapsulation">Page Object Location Encapsulation</a></p>
</li>
</ul>
</div>
<div class="sect2">
<h3 id="static-import-of-graphene-utility-class"><a class="anchor" href="#static-import-of-graphene-utility-class"></a>4.1. Static Import of Graphene Utility Class</h3>
<div class="paragraph">
<p>The main advantage of the Graphene utility class is, that it includes
set of static methods, which can be used directly from your test:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="CodeRay highlight"><code data-lang="java">Graphene.guardAjax(button).click();</code></pre>
</div>
</div>
<div class="paragraph">
<p>This concept is much stronger when using possibilities of your IDE for
code completion.</p>
</div>
<div class="admonitionblock tip">
<table>
<tr>
<td class="icon">
<i class="fa icon-tip" title="Tip"></i>
</td>
<td class="content">
You can use
<a href="http://help.eclipse.org/juno/index.jsp?topic=%2Forg.eclipse.jdt.doc.user%2Freference%2Fpreferences%2Fjava%2Feditor%2Fref-preferences-content-assist-favorites.htm">Eclipse
Favorites</a> feature and include Graphene into list of utility classes -
you will get suggestions for code-completion out of the box.
</td>
</tr>
</table>
</div>
<div class="sect3">
<h4 id="waitings"><a class="anchor" href="#waitings"></a>4.1.1. Waitings</h4>
<div class="paragraph">
<p>Shortcut for fluent waiting API.</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="CodeRay highlight"><code data-lang="java">waitAjax();
waitGui();
waitModel();

<span class="comment">//e.g.</span>
button.click();
waitGui().withMessage(<span class="string"><span class="delimiter">&quot;</span><span class="content">Popup should be opened after clicking on that button!</span><span class="delimiter">&quot;</span></span>).until().element(popupPanel).is().visible();</code></pre>
</div>
</div>
<div class="paragraph">
<p>See the <a href="#_waiting_api">Waiting API</a> documentation page for more information.</p>
</div>
</div>
<div class="sect3">
<h4 id="utility-class-request-guards"><a class="anchor" href="#utility-class-request-guards"></a>4.1.2. Request Guards</h4>
<div class="paragraph">
<p>It is a shortcut for the Graphene request guards, which are powerful
tools to assert that an AJAX/HTTP or no request was done.</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="CodeRay highlight"><code data-lang="java">guardAjax(<span class="predefined-type">Object</span>);
guardHttp(<span class="predefined-type">Object</span>);
guardNoRequest(<span class="predefined-type">Object</span>);
waitForHttp(<span class="predefined-type">Object</span>);

<span class="comment">//e.g.</span>
guardAjax(button).click();</code></pre>
</div>
</div>
<div class="paragraph">
<p><code>waitForHttp()</code> is a guard as well, even when its name does not tell it.
The difference between the <code>waitForHttp()</code> and the <code>guardHttp()</code> is that
the first one ignores AJAX requests during its waiting period and
the second one does not.</p>
</div>
<div class="paragraph">
<p>See the <a href="#_request_guards">Request Guards</a> documentation page for more information.</p>
</div>
</div>
<div class="sect3">
<h4 id="creating-page-fragments-dynamically"><a class="anchor" href="#creating-page-fragments-dynamically"></a>4.1.3. Creating Page Fragments Dynamically</h4>
<div class="paragraph">
<p>Sometimes you need a way to create a Page Fragment instance not by
injecting it via <code>@FindBy</code>, but dynamically.</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="CodeRay highlight"><code data-lang="java">createPageFragment(<span class="predefined-type">Class</span>&lt;T&gt; clazz, WebElement root);</code></pre>
</div>
</div>
<div class="paragraph">
<p>Consider a Tab Panel widget, for which you want to create a Page
Fragment. You do not know in advance how many tabs it will have and you
want to return an initialized Page Fragment with tabs content each time
user switches to a particular tab. This method is suitable for this.</p>
</div>
</div>
<div class="sect3">
<h4 id="page-object-location-encapsulation"><a class="anchor" href="#page-object-location-encapsulation"></a>4.1.4. Page Object Location Encapsulation</h4>
<div class="paragraph">
<p>You can find more information about Page Object location encapsulation
on <a href="#page-objects">this</a> documentation page.</p>
</div>
<div class="paragraph">
<p>Basically, you can use <code>Graphene.goTo()</code> method like this:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="CodeRay highlight"><code data-lang="java"><span class="annotation">@Location</span>(<span class="string"><span class="delimiter">&quot;</span><span class="content">register.html</span><span class="delimiter">&quot;</span></span>)
<span class="directive">public</span> <span class="type">class</span> <span class="class">RegistrationPage</span> {
  <span class="comment">//all the Page Objects FindBy, etc. goes here</span>
}

<span class="directive">public</span> <span class="type">class</span> <span class="class">TestSuite</span> {

  <span class="directive">public</span> <span class="type">void</span> test() {
    Graphene.goTo(RegistrationPage.class);
    <span class="comment">//testing of the page goes here;</span>
  }

}</code></pre>
</div>
</div>
<div class="paragraph">
<p>Graphene will load <code><a href="http://locahost:8080/register.html" class="bare">http://locahost:8080/register.html</a></code> into your
default browser.</p>
</div>
<div class="admonitionblock note">
<table>
<tr>
<td class="icon">
<i class="fa icon-note" title="Note"></i>
</td>
<td class="content">
You can specify the browser into which the page should be loaded by
passing a browser qualifier as a
<code>Graphene.goTo(Class&lt;?&gt; pageObject, Class&lt;?&gt; browserQualifier)</code>
parameter.
</td>
</tr>
</table>
</div>
</div>
</div>
</div>
</div>
<div class="sect1">
<h2 id="_waiting_api"><a class="anchor" href="#_waiting_api"></a>5. Waiting API</h2>
<div class="sectionbody">
<div class="paragraph">
<p>WebDriver execution is always faster than changing the state of the
page. This powerful API, should help you to synchronize with the tested
page. See also Graphene <a href="#_request_guards">Request Guards</a> as the other
method of synchronizing with the page.</p>
</div>
<div class="paragraph">
<p>The starting point for Wait API is Graphene Utility class and its
methods:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="CodeRay highlight"><code data-lang="java">waitModel(); <span class="comment">//waiting for long client-server operations, e.g. database fetch</span>
waitAjax(); <span class="comment">//waiting for an Ajax update on the page</span>
waitGui(); <span class="comment">//waiting for a GUI client operation</span></code></pre>
</div>
</div>
<div class="paragraph">
<p>They are just aliases on the same mechanism with different timeouts.
Their purpose is to group 3 most common operation types, that require
waiting for them to finish.</p>
</div>
<div class="admonitionblock note">
<table>
<tr>
<td class="icon">
<i class="fa icon-note" title="Note"></i>
</td>
<td class="content">
The waitAjax does <strong>not</strong> require any XHR request to happen.
It&#8217;s just about how long test should wait!
</td>
</tr>
</table>
</div>
<div class="paragraph">
<p>Refer to <a href="#_graphene_configuration">Graphene Configuration</a> page to see the
configuration properties, in case you
want to change default timeouts for those three waiting types.</p>
</div>
<div class="sect2">
<h3 id="fluent-api"><a class="anchor" href="#fluent-api"></a>5.1. Fluent API</h3>
<div class="paragraph">
<p>One of the ways to go with waiting API, is to use its fluent version.
The tree of the possible method calls is:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="CodeRay highlight"><code data-lang="java">waitGui().until().element(webElementOrBy).is().
                                         .is().not().present();
                                                    .enabled();
                                                    .selected();
                                                    .visible();

<span class="comment">//some attribute contains given value</span>
waitGui().until().element(webElementOrBy).attribute(<span class="string"><span class="delimiter">&quot;</span><span class="content">class</span><span class="delimiter">&quot;</span></span>).contains(<span class="string"><span class="delimiter">&quot;</span><span class="content">foo-bar</span><span class="delimiter">&quot;</span></span>);

<span class="comment">//you can explicitly set how often should Graphene poll the page for the result of the waiting condition</span>
waitGui().pollingEvery(<span class="integer">1</span>, <span class="predefined-type">TimeUnit</span>.SECONDS);

<span class="comment">//you can set explicitly the timeout</span>
waitGui().withTimeout(<span class="integer">10</span>, <span class="predefined-type">TimeUnit</span>.SECONDS);

<span class="comment">//you can set the message with which it would fail</span>
waitGui().withMessage(<span class="string"><span class="delimiter">&quot;</span><span class="content">The popup was not shown within the timeout!</span><span class="delimiter">&quot;</span></span>);

<span class="comment">//or ignore some of the exceptions, which are thrown during waiting</span>
waitGui().ignoring(StaleElementReferenceException.class);</code></pre>
</div>
</div>
<div class="paragraph">
<p>Refer to Graphene javadoc for complete picture of all possible
combinations.</p>
</div>
<div class="admonitionblock tip">
<table>
<tr>
<td class="icon">
<i class="fa icon-tip" title="Tip"></i>
</td>
<td class="content">
Use IDE autocomplete feature to work most efficiently with the fluent
API.
</td>
</tr>
</table>
</div>
</div>
<div class="sect2">
<h3 id="using-predicate"><a class="anchor" href="#using-predicate"></a>5.2. Using Predicate</h3>
<div class="paragraph">
<p>Using the fluent builder is the preferred way to keep your tests
readable. Indeed there are cases where you need something more. Use
<code>Predicate</code> condition as a fallback:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="CodeRay highlight"><code data-lang="java">waitGui().until(<span class="keyword">new</span> <span class="predefined-type">Predicate</span>&lt;WebDriver&gt;() {
       <span class="directive">public</span> <span class="type">boolean</span> apply(WebDriver input) {
            <span class="comment">//some complex finding out whether the condition is met</span>
       }
});</code></pre>
</div>
</div>
</div>
<div class="sect2">
<h3 id="using-conditions-only"><a class="anchor" href="#using-conditions-only"></a>5.3. Using Conditions Only</h3>
<div class="paragraph">
<p>Sometimes you just need to assert that a condition is being met, you do
not need to wait for something. Following code will return a <code>boolean</code>
value:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="CodeRay highlight"><code data-lang="java"><span class="keyword">new</span> WebElementConditionFactory(webElement).isEnabled().apply(webDriverInstance);
<span class="keyword">new</span> WebElementConditionFactory(webElement)).attribute(<span class="string"><span class="delimiter">&quot;</span><span class="content">class</span><span class="delimiter">&quot;</span></span>).contains(<span class="string"><span class="delimiter">&quot;</span><span class="content">foo-bar</span><span class="delimiter">&quot;</span></span>).apply(webDriverInstance);</code></pre>
</div>
</div>
</div>
</div>
</div>
<div class="sect1">
<h2 id="_request_guards"><a class="anchor" href="#_request_guards"></a>6. Request Guards</h2>
<div class="sectionbody">
<div class="paragraph">
<p>Its purpose is to guard that the interaction of the user will/will not
raise specific request to the server. It differs between following
types:</p>
</div>
<div class="ulist">
<ul>
<li>
<p>No Request</p>
</li>
<li>
<p>AJAX Request</p>
</li>
<li>
<p>HTTP Request (regular HTTP)</p>
</li>
</ul>
</div>
<div class="sect2">
<h3 id="basic-usage"><a class="anchor" href="#basic-usage"></a>6.1. Basic Usage</h3>
<div class="paragraph">
<p>Request guards are available in <a href="#_graphene_utility_class">Graphene Utility Class</a>.</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="CodeRay highlight"><code data-lang="java"><span class="keyword">import</span> <span class="include">org.openqa.selenium.WebElement</span>;
<span class="keyword">import</span> <span class="include">org.openqa.selenium.support.FindBy</span>;
<span class="keyword">import</span> <span class="include">org.junit.Test</span>;
<span class="keyword">import</span> <span class="include">org.jboss.arquillian.junit.Arquillian</span>;
<span class="keyword">import</span> <span class="include">org.junit.runner.RunWith</span>;

<span class="keyword">import</span> <span class="include">static</span> <span class="include">org.jboss.arquillian.graphene.Graphene.guardHttp</span>;
<span class="keyword">import</span> <span class="include">static</span> <span class="include">org.jboss.arquillian.graphene.Graphene.guardNoRequest</span>;
<span class="keyword">import</span> <span class="include">static</span> <span class="include">org.jboss.arquillian.graphene.Graphene.guardAjax</span>;


<span class="annotation">@RunWih</span>(Arquillian.class)
<span class="directive">public</span> <span class="type">class</span> <span class="class">TestClass</span> {

    <span class="annotation">@FindBy</span>(id=<span class="string"><span class="delimiter">&quot;</span><span class="content">http</span><span class="delimiter">&quot;</span></span>)
<span class="error"> </span><span class="error"> </span><span class="error"> </span> <span class="directive">private</span> WebElement buttonWhichMakesFullPageRefresh;

<span class="error"> </span><span class="error"> </span><span class="error"> </span> <span class="annotation">@FindBy</span>(id=<span class="string"><span class="delimiter">&quot;</span><span class="content">none</span><span class="delimiter">&quot;</span></span>)
<span class="error"> </span><span class="error"> </span><span class="error"> </span> <span class="directive">private</span> WebElement buttonWhichMakesNoRequest;
<span class="error"> </span><span class="error"> </span><span class="error"> </span>
    <span class="annotation">@FindBy</span>(id=<span class="string"><span class="delimiter">&quot;</span><span class="content">ajax</span><span class="delimiter">&quot;</span></span>)
<span class="error"> </span><span class="error"> </span><span class="error"> </span> <span class="directive">private</span> WebElement buttonWhichMakesAjaxRequest;

    <span class="annotation">@Test</span>
    <span class="directive">public</span> <span class="type">void</span> testSimple() {
        guardHttp(buttonWhichMakesFullPageRefresh).click();
        guardAjax(buttonWhichMakesAjaxRequest).click();
        guardNoRequest(buttonWhichMakesNoRequest).click();
    }
}</code></pre>
</div>
</div>
<div class="admonitionblock note">
<table>
<tr>
<td class="icon">
<i class="fa icon-note" title="Note"></i>
</td>
<td class="content">
If the given request isn&#8217;t detected, the <code>RequestGuardException</code> is
thrown.
</td>
</tr>
</table>
</div>
</div>
<div class="sect2">
<h3 id="use-cases"><a class="anchor" href="#use-cases"></a>6.2. Use Cases</h3>
<div class="paragraph">
<p>Guards are able to intercept the given object to verify, that request
which occurs after a method invocation is expected.</p>
</div>
<div class="admonitionblock note">
<table>
<tr>
<td class="icon">
<i class="fa icon-note" title="Note"></i>
</td>
<td class="content">
The request needs to end <strong>within the waiting period</strong>. If the
request is finished before waiting period then guard stops waiting and
test execution proceeds.<br>
On the other hand when request has not been ended within the waiting period
the exception is thrown.
</td>
</tr>
</table>
</div>
<div class="paragraph">
<p>Let&#8217;s examine following scenarios. <code>GuardA</code> means guard on <code>controlA</code>,
<code>GuardB</code> means guard on <code>controlB</code>. <code>XhrA</code> is an ajax request triggered
by <code>controlA</code>, <code>XhrB</code> is an ajax request triggered by <code>controlB</code>.</p>
</div>
<div class="paragraph">
<p>Scenario 1</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="CodeRay highlight"><code data-lang="java">GuardA.start
XhrA.start
GuardA.end        &lt;-RequestGuardException
XhrA.end</code></pre>
</div>
</div>
<div class="paragraph">
<p>In this scenario XHR has started within waiting period but took long
time to finish (slow Internet connection or request execution on
server).<br>
In this case <code>RequestGuardException</code> will be thrown.</p>
</div>
<div class="paragraph">
<p>Scenario 2</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="CodeRay highlight"><code data-lang="java">XhrB.start
GuardA.start
XhrB.end        &lt;-Test proceeds, but test may fail <span class="keyword">if</span> subsequent instructions depend on results of XhrA
GuardA.end
XhrA.start
XhrA.end</code></pre>
</div>
</div>
<div class="paragraph">
<p>Here we have interference of some other request (i.e. page is polling
the server). We guard request that should be triggered by <code>controlA</code> but
during waiting period some other XHR request ends.</p>
</div>
<div class="paragraph">
<p>Currently guards do not have any way to tell which operation did the
request originated from, so the guard will stop waiting and text
execution will proceed.<br>
If in the next step you want to i.e. click on button that would be rendered
by <code>XhrA</code> (that hasn&#8217;t yet finished) you would get
<code>ElementNotFoundException</code>.<br>
Currently there is no way to protect against this scenario.</p>
</div>
<div class="admonitionblock note">
<table>
<tr>
<td class="icon">
<i class="fa icon-note" title="Note"></i>
</td>
<td class="content">
Request start (thus end) may be delayed (i.e. by some javascript like
a4j:queue) and the request may not end within wait period. To deal with that
you should increase wait period.
</td>
</tr>
</table>
</div>
<div class="listingblock">
<div class="content">
<pre class="CodeRay highlight"><code data-lang="java">&lt;input id=<span class="string"><span class="delimiter">&quot;</span><span class="content">buttonA</span><span class="delimiter">&quot;</span></span> type=<span class="string"><span class="delimiter">&quot;</span><span class="content">button</span><span class="delimiter">&quot;</span></span> onclick=<span class="string"><span class="delimiter">&quot;</span><span class="content">setTimeout(function(){jQuery.ajax(</span><span class="delimiter">&quot;</span></span>/<span class="string"><span class="delimiter">&quot;</span><span class="content">)},3000)</span><span class="delimiter">&quot;</span></span>/&gt;
---
guardAjax(buttonA).click();</code></pre>
</div>
</div>
<div class="admonitionblock note">
<table>
<tr>
<td class="icon">
<i class="fa icon-note" title="Note"></i>
</td>
<td class="content">
XHR may be triggered on slightly different event then the one fired by
command (i.e. sendKeys does not trigger onchange)
</td>
</tr>
</table>
</div>
<div class="listingblock">
<div class="content">
<pre class="CodeRay highlight"><code data-lang="java">&lt;input id=<span class="string"><span class="delimiter">&quot;</span><span class="content">inputA</span><span class="delimiter">&quot;</span></span> type=<span class="string"><span class="delimiter">&quot;</span><span class="content">text</span><span class="delimiter">&quot;</span></span> onchange=<span class="string"><span class="delimiter">&quot;</span><span class="content">jQuery.ajax(</span><span class="delimiter">&quot;</span></span>/<span class="string"><span class="delimiter">&quot;</span><span class="content">)</span><span class="delimiter">&quot;</span></span>/&gt;
---
guardAjax(inputA).sendKeys(<span class="string"><span class="delimiter">&quot;</span><span class="content">abc</span><span class="delimiter">&quot;</span></span>); <span class="comment">//Wrong, sendKeys triggers keyUp, keyDown, but not &quot;change&quot; event.</span>
---
inputA.sendKeys(<span class="string"><span class="delimiter">&quot;</span><span class="content">abc</span><span class="delimiter">&quot;</span></span>);   <span class="comment">//Good</span>
guardAjax(inputA).blur();</code></pre>
</div>
</div>
</div>
</div>
</div>
<div class="sect1">
<h2 id="_page_abstractions"><a class="anchor" href="#_page_abstractions"></a>7. Page Abstractions</h2>
<div class="sectionbody">
<div class="paragraph">
<p><strong>Page Abstractions enhance the way your tests are written. They make your
tests more robust and therefore more reliable.</strong></p>
</div>
<div class="paragraph">
<p>Page Abstractions included here are:</p>
</div>
<div class="olist arabic">
<ol class="arabic">
<li>
<p><a href="#page-objects">Page Objects</a></p>
</li>
<li>
<p><a href="#page-fragments">Page Fragments</a></p>
</li>
<li>
<p><a href="#location-of-pages">Location of Pages</a></p>
</li>
</ol>
</div>
<div class="paragraph">
<p>To see their power let&#8217;s start with a little bit of motivation. Do you
often see Graphene (or Selenium Webdriver) tests like this:</p>
</div>
<div class="listingblock">
<div class="title">UglyGrapheneTests.java</div>
<div class="content">
<pre class="CodeRay highlight"><code data-lang="java"><span class="directive">public</span> <span class="type">class</span> <span class="class">TestAutocompleteWidgets</span> <span class="directive">extends</span> AbstractGrapheneTest {

    <span class="directive">private</span> <span class="directive">final</span> By firstAutocompleteInput =<span class="error"> </span>
                               By.css(<span class="string"><span class="delimiter">&quot;</span><span class="content">input[type=</span><span class="char">\&quot;</span><span class="content">text</span><span class="char">\&quot;</span><span class="content">]:nth-of-type(1)</span><span class="delimiter">&quot;</span></span>);
    <span class="directive">private</span> <span class="directive">final</span> By secondAutocompleteInput =<span class="error"> </span>
                               By.css(<span class="string"><span class="delimiter">&quot;</span><span class="content">input[type=</span><span class="char">\&quot;</span><span class="content">text</span><span class="char">\&quot;</span><span class="content">]:nth-of-type(2)</span><span class="delimiter">&quot;</span></span>);
    <span class="directive">private</span> <span class="directive">final</span> By thirdAutocompleteInput =<span class="error"> </span>
                               By.css(<span class="string"><span class="delimiter">&quot;</span><span class="content">input[type=</span><span class="char">\&quot;</span><span class="content">text</span><span class="char">\&quot;</span><span class="content">]:nth-of-type(3)</span><span class="delimiter">&quot;</span></span>);
    <span class="directive">private</span> <span class="directive">final</span> By suggestion =<span class="error"> </span>
                               By.className(<span class="string"><span class="delimiter">&quot;</span><span class="content">rf-au-itm</span><span class="delimiter">&quot;</span></span>);

    <span class="annotation">@Test</span>
    <span class="directive">public</span> <span class="type">void</span> testFirstAutocomplete() {
        WebElement autocomplete = driver.findElement(firstAutocompleteInput);

        autocomplete.sendKeys(<span class="string"><span class="delimiter">&quot;</span><span class="content">Ar</span><span class="delimiter">&quot;</span></span>);
        waitForSuggestions();

        <span class="predefined-type">List</span>&lt;WebElement&gt; suggestions = driver.findElements(suggestion);

        assertEquals(suggestions.size(), <span class="integer">2</span>,<span class="error"> </span>
                           <span class="string"><span class="delimiter">&quot;</span><span class="content">There should be two suggestions!</span><span class="delimiter">&quot;</span></span>);
        assertEquals(suggestions.get(<span class="integer">0</span>).getText(), <span class="string"><span class="delimiter">&quot;</span><span class="content">Arizona</span><span class="delimiter">&quot;</span></span>,
                           <span class="string"><span class="delimiter">&quot;</span><span class="content">The first suggestion is wrong!</span><span class="delimiter">&quot;</span></span>);
        assertEquals(suggestion.get(<span class="integer">1</span>).getText(), <span class="string"><span class="delimiter">&quot;</span><span class="content">Arkansas</span><span class="delimiter">&quot;</span></span>,
                           <span class="string"><span class="delimiter">&quot;</span><span class="content">The second suggestion is wrong!</span><span class="delimiter">&quot;</span></span>);
    }


    <span class="annotation">@Test</span>
    <span class="directive">public</span> <span class="type">void</span> testSecondAutocomplete() {
        <span class="comment">//other similar interactions with the other two Autocomplete widgets</span>
    }

    <span class="directive">private</span> waitForSuggestions() {
        <span class="comment">//some wait method to wait for suggestions becoming visible</span>
    }
}</code></pre>
</div>
</div>
<div class="paragraph">
<p>In the previous example you can notice that tests are tightly coupled
with the HTML structure of the tested page. So once the structure of the
page changes (it can be even slight change in class attribute of
some element) tests are affected as well. These small changes can
effectively break a lot of tests, in other words increase the time spent
on the tests maintenance.</p>
</div>
<div class="sect2">
<h3 id="_there_comes_page_objects_pattern_to_improve_this"><a class="anchor" href="#_there_comes_page_objects_pattern_to_improve_this"></a>7.1. There Comes Page Objects Pattern To Improve This.</h3>
<div class="paragraph">
<p>Basically it is an encapsulation of the tested page structure into one
class, which will contain all the page fragments (parts, components,
widgets) together with all handy methods which you will find useful
while testing the encapsulated page.</p>
</div>
<div class="paragraph">
<p>Very simple Page Object which results from the previous test example is
below:</p>
</div>
<div class="listingblock">
<div class="title">TestingPage.java</div>
<div class="content">
<pre class="CodeRay highlight"><code data-lang="java"><span class="directive">public</span> <span class="type">class</span> <span class="class">TestPage</span> {

    <span class="annotation">@FindBy</span>(css = <span class="string"><span class="delimiter">&quot;</span><span class="content">input[type=</span><span class="char">\&quot;</span><span class="content">text</span><span class="char">\&quot;</span><span class="content">]:nth-of-type(1)</span><span class="delimiter">&quot;</span></span>)
    <span class="directive">private</span> WebElement firstAutocompleteInput;

    <span class="annotation">@FindBy</span>(css = <span class="string"><span class="delimiter">&quot;</span><span class="content">input[type=</span><span class="char">\&quot;</span><span class="content">text</span><span class="char">\&quot;</span><span class="content">]:nth-of-type(2)</span><span class="delimiter">&quot;</span></span>)
    <span class="directive">private</span> WebElement secondAutocompleteInput;

    <span class="annotation">@FindBy</span>(css = <span class="string"><span class="delimiter">&quot;</span><span class="content">input[type=</span><span class="char">\&quot;</span><span class="content">text</span><span class="char">\&quot;</span><span class="content">]:nth-of-type(3)</span><span class="delimiter">&quot;</span></span>)
    <span class="directive">private</span> WebElement thirdAutocompleteInput;

    <span class="annotation">@FindBy</span>(className = <span class="string"><span class="delimiter">&quot;</span><span class="content">rf-au-itm</span><span class="delimiter">&quot;</span></span>)
    <span class="directive">private</span> <span class="predefined-type">List</span>&lt;WebElement&gt; suggestions;

    <span class="comment">//getters for all fields of this Page Object</span>

    <span class="directive">private</span> waitForSuggestions() {
        <span class="comment">//some wait method to wait for suggestions becoming visible</span>
    }

    <span class="comment">//other handy methods used with testing of the page</span>
}</code></pre>
</div>
</div>
<div class="paragraph">
<p>The test can be now be decoupled from the underlying HTML structure of the
tested page. Once the structure changes, the only modification will be
needed in Page Object. The test would look like below snippet:</p>
</div>
<div class="listingblock">
<div class="title">NicerGrapheneTests.java</div>
<div class="content">
<pre class="CodeRay highlight"><code data-lang="java"><span class="directive">public</span> <span class="type">class</span> <span class="class">TestAutocompleteWidgets</span> <span class="directive">extends</span> AbstractGrapheneTest {

    <span class="directive">private</span> TestingPage testingPage;

    <span class="annotation">@Before</span>
    <span class="directive">public</span> <span class="type">void</span> initializeTestingPage() {
        testingPage = PageFactory.initElements(driver, TestingPage.class);
    }

    <span class="annotation">@Test</span>
    <span class="directive">public</span> <span class="type">void</span> testFirstAutocomplete() {

        testingPage.getFirstAutocompleteInput().sendKeys(<span class="string"><span class="delimiter">&quot;</span><span class="content">Ar</span><span class="delimiter">&quot;</span></span>);
        testingPage.waitForSuggestions();

        <span class="predefined-type">List</span>&lt;WebElement&gt; suggestions = testingPage.getSuggestions();

        assertEquals(suggestions.size(), <span class="integer">2</span>,<span class="error"> </span>
                    <span class="string"><span class="delimiter">&quot;</span><span class="content">There should be two suggestions!</span><span class="delimiter">&quot;</span></span>);
        assertEquals(suggestions.get(<span class="integer">0</span>).getText(), <span class="string"><span class="delimiter">&quot;</span><span class="content">Arizona</span><span class="delimiter">&quot;</span></span>,<span class="error"> </span>
                    <span class="string"><span class="delimiter">&quot;</span><span class="content">The first suggestion is wrong!</span><span class="delimiter">&quot;</span></span>);
        assertEquals(suggestion.get(<span class="integer">1</span>).getText(), <span class="string"><span class="delimiter">&quot;</span><span class="content">Arkansas</span><span class="delimiter">&quot;</span></span>,<span class="error"> </span>
                    <span class="string"><span class="delimiter">&quot;</span><span class="content">The second suggestion is wrong!</span><span class="delimiter">&quot;</span></span>);
    }


    <span class="annotation">@Test</span>
    <span class="directive">public</span> <span class="type">void</span> testSecondAutocomplete() {
        <span class="comment">//other similar interactions with the other two Autocomplete widgets</span>
    }
}</code></pre>
</div>
</div>
<div class="paragraph">
<p>To read more about how Graphene helps with utilization of this concept,
please follow <a href="#page-objects">Page Objects</a>.</p>
</div>
<div class="paragraph">
<p>Page Objects pattern is a well known concept, which greatly improves
tests robustness. However, is there more space for improvement ?</p>
</div>
<div class="paragraph">
<p>Consider the previous example, where we were testing three autocomplete
widgets. Each of the test had to deal with the interaction between
driver and that component on its own. Unfortunately not only tests in
that one test class, but all the tests which interact with the same
autocomplete widget get implemented with the same UI framework. It is a huge
DRY violation.</p>
</div>
</div>
<div class="sect2">
<h3 id="_therefore_graphene_introduces_a_new_concept_called_page_fragments_to_improve_this"><a class="anchor" href="#_therefore_graphene_introduces_a_new_concept_called_page_fragments_to_improve_this"></a>7.2. Therefore Graphene introduces a new concept, called Page Fragments to improve this.</h3>
<div class="paragraph">
<p><em>What are Page Fragments in short ?</em></p>
</div>
<div class="ulist">
<ul>
<li>
<p>Page Fragments stands for any part of the tested page, any widget, web
component, etc.</p>
</li>
<li>
<p>A concept of encapsulation of these parts into completely reusable
pieces across all your tests.</p>
</li>
<li>
<p>Powerful mechanism for creating own page fragments, like Autocomplete
(Calendar, Login, etc.) page fragment.</p>
</li>
<li>
<p>A concept which differentiates each fragment by its root element and
make other parts reference from it.</p>
</li>
<li>
<p>A solution which leverages Selenium WebDriver under the hood together
with all Graphene killer features.</p>
</li>
<li>
<p>Set of utilities which simplify using of this feature in tests,
together with better support for Page Objects pattern.</p>
</li>
</ul>
</div>
<div class="paragraph">
<p>So we already know that autocomplete widget from the previous example
can be encapsulated into one object. As it is part of the page, its
fragment, let&#8217;s call that object Page Fragment. Better than words, let&#8217;s
see an example of such encapsulation below.</p>
</div>
<div class="listingblock">
<div class="title">AutocompleteFragment.java</div>
<div class="content">
<pre class="CodeRay highlight"><code data-lang="java"><span class="directive">public</span> <span class="type">class</span> <span class="class">AutocompleteFragment</span>&lt;T&gt; {

    <span class="annotation">@Root</span>
    WebElement root;

    <span class="annotation">@FindBy</span>(css = <span class="string"><span class="delimiter">&quot;</span><span class="content">input[type='text']</span><span class="delimiter">&quot;</span></span>)
    WebElement inputToWrite;

    <span class="directive">public</span> <span class="directive">static</span> <span class="directive">final</span> <span class="predefined-type">String</span> CLASS_NAME_SUGGESTION = <span class="string"><span class="delimiter">&quot;</span><span class="content">rf-au-itm</span><span class="delimiter">&quot;</span></span>;

    <span class="directive">public</span> <span class="predefined-type">List</span>&lt;Suggestion&lt;T&gt;&gt; getAllSuggestions(SuggestionParser&lt;T&gt; parser) {
        <span class="predefined-type">List</span>&lt;Suggestion&lt;T&gt;&gt; allSugg =<span class="error"> </span><span class="keyword">new</span> <span class="predefined-type">ArrayList</span>&lt;Suggestion&lt;T&gt;&gt;();

        <span class="keyword">if</span> (areSuggestionsAvailable()) {
            WebElement rightSuggList = getRightSuggestionList();
           <span class="error"> </span>
            <span class="predefined-type">List</span>&lt;WebElement&gt; suggestions =<span class="error"> </span>
                 rightSuggList.findElements(
                    By.className(CLASS_NAME_SUGGESTION));

            <span class="keyword">for</span> (WebElement suggestion : suggestions) {
                allSugg.add(parser.parse(suggestion));
            }
        }

        <span class="keyword">return</span> allSugg;
    }

    <span class="directive">public</span> <span class="predefined-type">List</span>&lt;Suggestion&lt;T&gt;&gt; type(<span class="predefined-type">String</span> value, SuggestionParser&lt;T&gt; parser) {
        <span class="predefined-type">List</span>&lt;Suggestion&lt;T&gt;&gt; suggestions = <span class="keyword">new</span> <span class="predefined-type">ArrayList</span>&lt;Suggestion&lt;T&gt;&gt;();

        inputToWrite.sendKeys(value);
        <span class="keyword">try</span> {
            waitForSuggestions();
        } <span class="keyword">catch</span> (<span class="exception">TimeoutException</span> ex) {
            <span class="comment">// no suggestions available</span>
            <span class="keyword">return</span> suggestions;
        }

        suggestions = getAllSuggestions(parser);
        <span class="keyword">return</span> suggestions;
    }

    <span class="comment">//other handy encapsulation of Autocomplete services</span>
}</code></pre>
</div>
</div>
<div class="paragraph">
<p>It is nothing special. The only difference between Page Objects and Page
Fragments is the element annotated with the <code>@Root</code> annotation. All
other <code>WebElement</code> fields annotated with <code>@FindBy</code> are referenced from
that root element. It makes such implementation pretty generic and
reusable across all tests which need to interact with the encapsulated
Page Fragment.</p>
</div>
<div class="admonitionblock note">
<table>
<tr>
<td class="icon">
<i class="fa icon-note" title="Note"></i>
</td>
<td class="content">
The <code>@Root</code> annotation is optional, you typically use it when you need
to directly invoke methods on it in your fragment&#8217;s code. Therefore, you
do not need to declare such element. Graphene will take care of it. You
denote whether it is a Page Fragment or a Page Object in the way you use it
(a particular Page Object is annotated with <code>@Page</code>, a Page Fragment
with <code>@FindBy</code> annotation).
</td>
</tr>
</table>
</div>
<div class="paragraph">
<p>To introduce Page Fragments into previous test example, one need to do
for example following:</p>
</div>
<div class="olist arabic">
<ol class="arabic">
<li>
<p>Move autocomplete specific methods from <code>TestingPage</code> to the
<code>AutocompleteFragment&lt;T&gt;</code> implementation, so they can be reused in other
tests for different applications or pages too.</p>
</li>
<li>
<p>Declare Page Fragments into Page Object (<code>TestingPage</code>, preferred
option) or directly into the tests (this again couples tests with the
structure of the testing page, less preferred).</p>
</li>
<li>
<p>Rewrite Page Object methods so they will interact with the Page
Fragments instead of plain WebElements.</p>
</li>
</ol>
</div>
<div class="paragraph">
<p>Following snippet shows that:</p>
</div>
<div class="listingblock">
<div class="title">ImprovedTestingPage.java</div>
<div class="content">
<pre class="CodeRay highlight"><code data-lang="java"><span class="directive">public</span> <span class="type">class</span> <span class="class">TestPage</span> {

    <span class="annotation">@FindBy</span>(css = <span class="string"><span class="delimiter">&quot;</span><span class="content">div[class=</span><span class="char">\&quot;</span><span class="content">rf-au</span><span class="char">\&quot;</span><span class="content">]:nth-of-type(1)</span><span class="delimiter">&quot;</span></span>)
    <span class="directive">private</span> AutocompleteFragment&lt;<span class="predefined-type">String</span>&gt; autocomplete1;

    <span class="annotation">@FindBy</span>(css = <span class="string"><span class="delimiter">&quot;</span><span class="content">div[class=</span><span class="char">\&quot;</span><span class="content">rf-au</span><span class="char">\&quot;</span><span class="content">]:nth-of-type(2)</span><span class="delimiter">&quot;</span></span>)
    <span class="directive">private</span> AutocompleteFragment&lt;<span class="predefined-type">String</span>&gt; autocomplete2;

    <span class="annotation">@FindBy</span>(css = <span class="string"><span class="delimiter">&quot;</span><span class="content">div[class=</span><span class="char">\&quot;</span><span class="content">rf-au</span><span class="char">\&quot;</span><span class="content">]:nth-of-type(3)</span><span class="delimiter">&quot;</span></span>)
    <span class="directive">private</span> AutocompleteFragment&lt;<span class="predefined-type">String</span>&gt; autocomplete3;

    <span class="comment">// getters for all fields of this Page Object</span>

    <span class="comment">// other handy methods used with testing </span>
    <span class="comment">// of the page now using the methods called from Page Fragments</span>
}</code></pre>
</div>
</div>
<div class="paragraph">
<p>For more information about how Page Fragments are declared, initialized
and more, please continue with <a href="#page-fragments">Page Fragments</a>.</p>
</div>
</div>
<div class="sect2">
<h3 id="page-objects"><a class="anchor" href="#page-objects"></a>7.3. Page Objects</h3>
<div class="paragraph">
<p>Page Objects pattern is very well described
<a href="http://code.google.com/p/selenium/wiki/PageObjects">here</a>.</p>
</div>
<div class="paragraph">
<p><strong>Graphene comes with support for this pattern.</strong> The main additions are:</p>
</div>
<div class="ulist">
<ul>
<li>
<p>Better support for initialization of the Page Objects. Graphene
automatically enriches the Page Object&#8217;s injection points (e.g.
<code>@FindBy</code>).</p>
</li>
<li>
<p>Page Objects can contain <a href="#page-fragments">Page Fragments</a> and they are
also properly initialized.</p>
</li>
<li>
<p>Page Objects can contain any injection point which Arquillian supports.</p>
<div class="ulist">
<ul>
<li>
<p>e.g. <code>@Drone WebDriver</code> for injecting browser instance</p>
</li>
</ul>
</div>
</li>
<li>
<p>Page Objects can <a href="#location-of-pages">encapsulate
their location</a>.</p>
</li>
</ul>
</div>
<div class="paragraph">
<p>You have already seen the default way of initializing Page Objects in
<a href="#page-abstractions">Page Abstractions</a>.</p>
</div>
<div class="paragraph">
<p><strong>Let&#8217;s showcase Graphene way of doing this!</strong></p>
</div>
<div class="olist arabic">
<ol class="arabic">
<li>
<p>Implement a Page Object.</p>
</li>
<li>
<p>Declare it in the test.</p>
</li>
<li>
<p>Annotate it with
<code>org.jboss.arquillian.graphene.spi.annotations.Page</code> annotation.</p>
</li>
<li>
<p>And that&#8217;s all! No need to initialize Page Object via any factory
method.</p>
</li>
</ol>
</div>
<div class="paragraph">
<p>To see it in action, consider the code snippets below, which
demonstrate testing of a simple web page with progress bar and two
buttons.</p>
</div>
<div class="sect3">
<h4 id="implement-page-object"><a class="anchor" href="#implement-page-object"></a>7.3.1. Implement Page Object</h4>
<div class="listingblock">
<div class="title">TestingPage.java</div>
<div class="content">
<pre class="CodeRay highlight"><code data-lang="java"><span class="keyword">import</span> <span class="include">org.openqa.selenium.support.FindBy</span>;

<span class="directive">public</span> <span class="type">class</span> <span class="class">TestPage</span> {

    <span class="annotation">@Drone</span>
    <span class="directive">private</span> WebDriver browser;

    <span class="annotation">@FindBy</span>(className = <span class="string"><span class="delimiter">&quot;</span><span class="content">start-button</span><span class="delimiter">&quot;</span></span>)
    <span class="directive">private</span> WebElement startButton;

    <span class="annotation">@FindBy</span>(className = <span class="string"><span class="delimiter">&quot;</span><span class="content">stop-button</span><span class="delimiter">&quot;</span></span>)
    <span class="directive">private</span> WebElement stopButton;

    <span class="annotation">@FindBy</span>(id = <span class="string"><span class="delimiter">&quot;</span><span class="content">progress</span><span class="delimiter">&quot;</span></span>)
    <span class="directive">private</span> WebElement progressBar;

    <span class="annotation">@FindBy</span>(className = <span class="string"><span class="delimiter">&quot;</span><span class="content">foo-bar</span><span class="delimiter">&quot;</span></span>)
    <span class="directive">private</span> <span class="predefined-type">List</span>&lt;WebElement&gt; listOfElements;

    <span class="comment">//getters for all fields of this Page Object</span>

    <span class="directive">public</span> <span class="type">long</span> start() {
        startButton.click();

        <span class="keyword">return</span> <span class="predefined-type">System</span>.currentTimeMillis();
    }

    <span class="directive">public</span> <span class="type">void</span> stop() {
        stopButton.click();
    }

    <span class="comment">/**
    * Returns the progress, that is, on how many percents it is completed.
    */</span>
    <span class="directive">public</span> <span class="type">int</span> getProgress() {
        <span class="comment">//parse string which contains % sign to an int value</span>
        <span class="comment">//you may use also injected browser instance</span>
    }

    <span class="directive">public</span> <span class="type">long</span> waitUntilCompleted() {
        <span class="keyword">while</span>(getProgress() != <span class="integer">100</span>) {
            <span class="comment">//do nothing</span>
        }

        <span class="keyword">return</span> <span class="predefined-type">System</span>.currentTimeMillis();
    }

    <span class="comment">//other handy methods used with testing of the page</span>
}</code></pre>
</div>
</div>
<div class="admonitionblock note">
<table>
<tr>
<td class="icon">
<i class="fa icon-note" title="Note"></i>
</td>
<td class="content">
Page Objects can be declared also as nested classes. However, to better
decouple test logic from the structure of the tested page, it is
recommended to declare Page Objects as standalone classes.
</td>
</tr>
</table>
</div>
<div class="admonitionblock note">
<table>
<tr>
<td class="icon">
<i class="fa icon-note" title="Note"></i>
</td>
<td class="content">
Your are not limited just with injecting <code>WebElement</code> instances. You can
in the same way inject your <a href="#page-fragments">Page Fragments</a>, or even
<code>java.util.List</code> of Page Fragments/WebElements.
</td>
</tr>
</table>
</div>
<div class="admonitionblock note">
<table>
<tr>
<td class="icon">
<i class="fa icon-note" title="Note"></i>
</td>
<td class="content">
You have to use private fields for all Graphene initialized
<code>WebElement</code>/Page Fragments etc. Use their getters from tests.
</td>
</tr>
</table>
</div>
<div class="admonitionblock warning">
<table>
<tr>
<td class="icon">
<i class="fa icon-warning" title="Warning"></i>
</td>
<td class="content">
<div class="title">Page Objects in Multiple Browsers Scenario</div>
<div class="paragraph">
<p>If you use page abstractions together with parallel browsers feature, be
sure to check <a href="#using-page-abstractions-with-multiple-browsers">Using Page Abstractions with Multiple Browsers</a>.</p>
</div>
</td>
</tr>
</table>
</div>
</div>
<div class="sect3">
<h4 id="declare-it-in-the-test-and-annotate-it-with-page-annotation."><a class="anchor" href="#declare-it-in-the-test-and-annotate-it-with-page-annotation."></a>7.3.2. Declare It In The Test And Annotate It With @Page Annotation.</h4>
<div class="listingblock">
<div class="title">Test.java</div>
<div class="content">
<pre class="CodeRay highlight"><code data-lang="java"><span class="keyword">import</span> <span class="include">org.jboss.arquillian.graphene.page.Page</span>;
<span class="comment">//other imports</span>

<span class="annotation">@RunWith</span>(Arquillian.class)
<span class="directive">public</span> <span class="type">class</span> <span class="class">TestClass</span> {

    <span class="comment">//ommitting all the other Arquillian related methods for deployment etc.</span>

    <span class="annotation">@Page</span>
    <span class="directive">private</span> TestingPage testingPage;

    <span class="annotation">@Test</span>
    <span class="directive">public</span> <span class="type">void</span> test1() {
        <span class="type">long</span> startedAt = testingPage.start();

        <span class="type">long</span> endedAt = testingPage.waitUntilCompleted();

        <span class="type">long</span> lastInSeconds = (endedAt - startedAt) / <span class="integer">1000</span>

        assertTrue(lastInSeconds &lt; <span class="integer">20</span>, <span class="string"><span class="delimiter">&quot;</span><span class="content">It took: </span><span class="delimiter">&quot;</span></span> + lastInSeconds + <span class="string"><span class="delimiter">&quot;</span><span class="content">, its too much!</span><span class="delimiter">&quot;</span></span>);
    }

    <span class="annotation">@Test</span>
    <span class="directive">public</span> <span class="type">void</span> test2() {
        <span class="comment">//other test which can also call methods from already initialized {{TestingPage}}</span>
    }
}</code></pre>
</div>
</div>
</div>
<div class="sect3">
<h4 id="deployment-and-browser-determination"><a class="anchor" href="#deployment-and-browser-determination"></a>7.3.3. Deployment and Browser Determination</h4>
<div class="paragraph">
<p>The deployment according to which the <code>@Location</code> value will be
resolved, and the browser into which the page will be loaded can be
determined in the following way:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="CodeRay highlight"><code data-lang="java"><span class="keyword">import</span> <span class="include">org.jboss.arquillian.container.test.api.Deployment</span>;
<span class="keyword">import</span> <span class="include">org.jboss.arquillian.container.test.api.OperateOnDeployment</span>;
<span class="keyword">import</span> <span class="include">org.jboss.arquillian.container.test.api.RunAsClient</span>;
<span class="keyword">import</span> <span class="include">org.jboss.arquillian.graphene.page.InitialPage</span>;
<span class="keyword">import</span> <span class="include">org.jboss.arquillian.graphene.page.Location</span>;
<span class="comment">//other imports</span>

<span class="annotation">@RunWith</span>(Arquillian.class)
<span class="annotation">@RunAsClient</span>
<span class="directive">public</span> <span class="type">class</span> <span class="class">TestLocation</span> {

    <span class="annotation">@Drone</span>
    <span class="directive">private</span> WebDriver browser;

    <span class="annotation">@Drone</span>
    <span class="annotation">@Browser2</span>
    <span class="directive">private</span> WebDriver browser2;

    <span class="annotation">@Deployment</span>
    <span class="directive">public</span> <span class="directive">static</span> WebArchive createTestArchive() {
        <span class="comment">//returning default war</span>
    }

    <span class="annotation">@Deployment</span>(name = <span class="string"><span class="delimiter">&quot;</span><span class="content">deployment1</span><span class="delimiter">&quot;</span></span>)
    <span class="directive">public</span> <span class="directive">static</span> WebArchive createTestArchive1() {
       <span class="comment">//returning some different war</span>
    }

    <span class="annotation">@Test</span>
    <span class="annotation">@OperateOnDeployment</span>(<span class="string"><span class="delimiter">&quot;</span><span class="content">deployment1</span><span class="delimiter">&quot;</span></span>)
    <span class="directive">public</span> <span class="type">void</span> test1(<span class="annotation">@InitialPage</span> MyPageObject1 obj) {
        <span class="comment">//testing the page with help of MyPageObject1</span>
    }

    <span class="annotation">@Test</span>
    <span class="directive">public</span> <span class="type">void</span> test2(<span class="annotation">@Browser2</span> <span class="annotation">@InitialPage</span> MyPageObject2 obj) {
        <span class="comment">//Graphene will load as the first action MyPageObject2 location value to the browser2</span>
        <span class="comment">//testing the page with help of MyPageObject2</span>
    }
}</code></pre>
</div>
</div>
<div class="paragraph">
<p>You can read more about multiple deployments Arquillian feature
<a href="http://arquillian.org/arquillian-core/#multiple-deployments">here</a>.</p>
</div>
<div class="paragraph">
<p>Graphene support for <a href="#_parallel_browsers">parallel browsers</a> for
more information about this subject.</p>
</div>
</div>
</div>
<div class="sect2">
<h3 id="page-fragments"><a class="anchor" href="#page-fragments"></a>7.4. Page Fragments</h3>
<div class="paragraph">
<p>The concept of Page Fragments and motivation behind them were already
introduced in <a href="#_page_abstractions">Page Abstractions</a>. Here you can find more
detailed info about:</p>
</div>
<div class="olist arabic">
<ol class="arabic">
<li>
<p><a href="#relation-to-page-objects">Relation to Page Objects</a></p>
</li>
<li>
<p><a href="#usage">Usage</a></p>
</li>
<li>
<p><a href="#creating-page-fragments">Creating Page Fragments</a></p>
</li>
<li>
<p><a href="#samples-of-page-fragments">Samples of Page Fragments</a></p>
<div class="olist loweralpha">
<ol class="loweralpha" type="a">
<li>
<p><a href="#autocomplete">Autocomplete</a></p>
</li>
<li>
<p><a href="#calendar">Calendar</a></p>
</li>
<li>
<p><a href="#table">Table</a></p>
</li>
<li>
<p><a href="#login-component">Login component</a></p>
</li>
</ol>
</div>
</li>
</ol>
</div>
<div class="sect3">
<h4 id="relation-to-page-objects"><a class="anchor" href="#relation-to-page-objects"></a>7.4.1. Relation to Page Objects</h4>
<div class="paragraph">
<p>Page Fragments and Page Objects are similar concepts. They both
decouple HTML structure of the tested application from the tests. They
both encapsulate some kind of page services or the interactions a user
can do with the page.</p>
</div>
<div class="paragraph">
<p>The difference is that Page Objects are encapsulating a specific page
(or its part) of specific application, while Page Fragments are dealing
with parts of the page, its widgets, components, basically fragments
which are reusable across the whole web UI framework in which the
application under test is written.</p>
</div>
</div>
<div class="sect3">
<h4 id="usage"><a class="anchor" href="#usage"></a>7.4.2. Usage</h4>
<div class="paragraph">
<p>To use Page Fragment in your tests only thing you need to do is use an
implementation class of the Page Fragment together with <code>@FindBy</code>
annotation pointing to the root of the fragment.</p>
</div>
<div class="listingblock">
<div class="title">DeclaringPageFragmentInTest.java</div>
<div class="content">
<pre class="CodeRay highlight"><code data-lang="java"><span class="annotation">@FindBy</span>(css=<span class="string"><span class="delimiter">&quot;</span><span class="content">cssLocatorOfThePageFragmentRoot</span><span class="delimiter">&quot;</span></span>)
<span class="directive">private</span> PageFragmentImplementation pageFragment;</code></pre>
</div>
</div>
<div class="paragraph">
<p>Use <code>@FindBy</code> annotation as you are used to with plain <code>WebElement</code>, so
indeed you can use other locating strategies (xpath, id, className, &#8230;&#8203;)
to reference the root of the Page fragment. The root of the fragment is
DOM element which is parent for all other elements which are part of the
Page fragment and need to be referenced from it (e.g. Calendar and its
cells).</p>
</div>
<div class="paragraph">
<p>These Page fragments and other <code>WebElement</code> fields are dynamically
initialized by Graphene so no need to initialize them via factories.</p>
</div>
<div class="admonitionblock tip">
<table>
<tr>
<td class="icon">
<i class="fa icon-tip" title="Tip"></i>
</td>
<td class="content">
<div class="title">Handy Hints</div>
<div class="ulist">
<ul>
<li>
<p>You can declare Page Fragments in the above mentioned way either
directly in your tests or you can declare them in the same way within
your Page Objects.</p>
</li>
<li>
<p>You can nest your Page Fragments in other Page Fragments and create
thus nice structure of your fragments (e.g. Page Fragment application
menu &#8594; nested menu group &#8594; nested menu item).</p>
</li>
<li>
<p>Page Fragments can be declared as nested classes, however, to better
reuse them across your test suites, it is not recommended.</p>
</li>
</ul>
</div>
</td>
</tr>
</table>
</div>
<div class="paragraph">
<p>There is another way to create Page Fragments. You can create them
dynamically with use of
<code>Graphene.createPageFragment(Class&lt;T&gt; clazz, WebElement root)</code>. This may
be particularly useful when implementing Page Fragment for e.g. Tab
Panel widget.</p>
</div>
</div>
<div class="sect3">
<h4 id="creating-page-fragments"><a class="anchor" href="#creating-page-fragments"></a>7.4.3. Creating Page Fragments</h4>
<div class="paragraph">
<p>To define own Page Fragment one needs to:</p>
</div>
<div class="olist arabic">
<ol class="arabic">
<li>
<p>Recognize a fragment of the page which can be abstracted and
encapsulated into a Page Fragment (Basically web UI components which are
rendered always with the same DOM structure.)</p>
</li>
<li>
<p>Create a class or if you find it appropriate also an interface for
it.</p>
</li>
<li>
<p>Define the parts you need for implementing the fragment&#8217;s services,
which will be referenced from the injected root. Annotate them with
<code>@FindBy</code> annotation.</p>
</li>
<li>
<p>Define the methods which are basically encapsulation of the fragment
services (Calendar services - get date, set date, &#8230;&#8203;).</p>
</li>
</ol>
</div>
<div class="admonitionblock note">
<table>
<tr>
<td class="icon">
<i class="fa icon-note" title="Note"></i>
</td>
<td class="content">
If you need to access the injected root of your Page Fragment, you can do
so by declaring a <code>WebElement</code> field with a <code>@Root</code> annotation.
</td>
</tr>
</table>
</div>
<div class="admonitionblock note">
<table>
<tr>
<td class="icon">
<i class="fa icon-note" title="Note"></i>
</td>
<td class="content">
<div class="paragraph">
<p>There are two packages from where you can import <code>@FindBy</code> annotation:</p>
</div>
<div class="olist arabic">
<ol class="arabic">
<li>
<p><code>org.openqa.selenium.support.FindBy</code> - well know <code>@FindBy</code> from
Selenium 2<br></p>
</li>
<li>
<p><code>org.jboss.arquillian.graphene.enricher.findby.FindBy</code>
which adds on top of classic <code>@FindBy</code> many useful features.</p>
</li>
</ol>
</div>
</td>
</tr>
</table>
</div>
<div class="paragraph">
<p>So the implementation can look like snippet below.</p>
</div>
<div class="listingblock">
<div class="title">PageFragmentExample.java</div>
<div class="content">
<pre class="CodeRay highlight"><code data-lang="java"><span class="keyword">import</span> <span class="include">org.jboss.arquillian.graphene.spi.annotations.Root</span>;
<span class="keyword">import</span> <span class="include">org.openqa.selenium.WebElement</span>;
<span class="keyword">import</span> <span class="include">org.openqa.selenium.support.FindBy</span>;

<span class="directive">public</span> <span class="type">class</span> <span class="class">PageFragmentExample</span> {

    <span class="annotation">@Root</span>
    <span class="directive">private</span> WebElement optionalRoot;

    <span class="annotation">@Drone</span>
    <span class="directive">private</span> WebDriver browser;

    <span class="annotation">@FindBy</span>(css=<span class="string"><span class="delimiter">&quot;</span><span class="content">relativeLocatorOfThisPageFragmentPart</span><span class="delimiter">&quot;</span></span>)
    <span class="directive">private</span> WebElement otherPageFragmentPart;

    <span class="annotation">@FindBy</span>(xpath=<span class="string"><span class="delimiter">&quot;</span><span class="content">relativeLocatorOfThisPageFragmentPart</span><span class="delimiter">&quot;</span></span>)
    <span class="directive">private</span> WebElement alsoPageFragmentPart;

    <span class="directive">public</span> <span class="type">void</span> firstServiceEncapsulated() {
        otherPageFragmentPart.click();
    }

    <span class="directive">public</span> <span class="type">void</span> secondServciceEncapsulated() {
        alsoPageFragmentPart.clear();
    }

    <span class="directive">public</span> <span class="type">void</span> thirdServiceWhichNeedsDirectAccessToRoot() {
        root.click();
    }

    <span class="directive">public</span> <span class="type">void</span> fourthServiceWhichNeedsBrowserInstance() {
        Actions builder = <span class="keyword">new</span> Actions(browser);

        builder.keyDown(Keys.CONTROL)
               .click(otherPageFragmentPart)
               .keyUp(Keys.CONTROL);
        builder.build().perform();
    }

    <span class="comment">//other services and help methods</span>
}</code></pre>
</div>
</div>
<div class="admonitionblock warning">
<table>
<tr>
<td class="icon">
<i class="fa icon-warning" title="Warning"></i>
</td>
<td class="content">
Be Careful with the xpath locators. They can be written in a way
that it does not matter from which element they are referenced.
Prefer therefore locating according to id, css or class name.
</td>
</tr>
</table>
</div>
<div class="admonitionblock tip">
<table>
<tr>
<td class="icon">
<i class="fa icon-tip" title="Tip"></i>
</td>
<td class="content">
Indeed you will need a reference for <code>WebDriver</code> instance. You can
easily inject it with <code>@Drone</code> annotation.
</td>
</tr>
</table>
</div>
<div class="admonitionblock note">
<table>
<tr>
<td class="icon">
<i class="fa icon-note" title="Note"></i>
</td>
<td class="content">
You have to use private fields for all Graphene initialized
WebElement/Page Fragments etc. Use their getters from tests.
</td>
</tr>
</table>
</div>
<div class="admonitionblock warning">
<table>
<tr>
<td class="icon">
<i class="fa icon-warning" title="Warning"></i>
</td>
<td class="content">
<div class="title">Page Fragments In Multiple Browsers Scenario</div>
<div class="paragraph">
<p>If you use page abstractions together with parallel browsers feature, be
sure to <a href="#using-page-abstractions-with-multiple-browsers">Using
Page Abstractions with Multiple Browsers</a>.</p>
</div>
</td>
</tr>
</table>
</div>
</div>
<div class="sect3">
<h4 id="samples-of-page-fragments"><a class="anchor" href="#samples-of-page-fragments"></a>7.4.4. Samples of Page Fragments</h4>
<div class="paragraph">
<p>Let&#8217;s consider following code snippets, which are reflecting some
examples of the Page Fragments to start with. In each example you can
find:</p>
</div>
<div class="ulist">
<ul>
<li>
<p>An image of the page fragment to be clear what we are speaking about.</p>
</li>
<li>
<p>HTML structure of the page fragment rendered in RichFaces framework.</p>
</li>
<li>
<p>Example of the Page Fragment encapsulation, either the implementation
or just the interface for it.</p>
</li>
</ul>
</div>
<div class="sect4">
<h5 id="autocomplete"><a class="anchor" href="#autocomplete"></a>Autocomplete</h5>
<div class="imageblock">
<div class="content">
<img src="https://raw.githubusercontent.com/arquillian/arquillian-graphene/master/docs/images/autocomplete.png" alt="autocomplete">
</div>
</div>
<div class="imageblock">
<div class="content">
<img src="https://raw.githubusercontent.com/arquillian/arquillian-graphene/master/docs/images/autocompleteHTML.png" alt="autocompleteHTML">
</div>
</div>
<div class="listingblock">
<div class="title">AutocompletePageFragment.java</div>
<div class="content">
<pre class="CodeRay highlight"><code data-lang="java"><span class="directive">public</span> <span class="type">class</span> <span class="class">AutocompletePageFragment</span>&lt;T&gt; {

    <span class="annotation">@Root</span>
    WebElement root;

    <span class="annotation">@FindBy</span>(css = CSS_INPUT)
    WebElement inputToWrite;

    <span class="directive">public</span> <span class="directive">static</span> <span class="directive">final</span> <span class="predefined-type">String</span> CLASS_NAME_SUGGESTION_LIST = <span class="string"><span class="delimiter">&quot;</span><span class="content">rf-au-lst-cord</span><span class="delimiter">&quot;</span></span>;
    <span class="directive">public</span> <span class="directive">static</span> <span class="directive">final</span> <span class="predefined-type">String</span> CLASS_NAME_SUGGESTION = <span class="string"><span class="delimiter">&quot;</span><span class="content">rf-au-itm</span><span class="delimiter">&quot;</span></span>;
    <span class="directive">public</span> <span class="directive">static</span> <span class="directive">final</span> <span class="predefined-type">String</span> CSS_INPUT = <span class="string"><span class="delimiter">&quot;</span><span class="content">input[type='text']</span><span class="delimiter">&quot;</span></span>;

    <span class="directive">private</span> <span class="predefined-type">String</span> separator = <span class="string"><span class="delimiter">&quot;</span><span class="content"> </span><span class="delimiter">&quot;</span></span>;

    <span class="directive">public</span> <span class="type">boolean</span> areSuggestionsAvailable() {

        <span class="predefined-type">List</span>&lt;WebElement&gt; suggestionLists = root.findElements(
              By.xpath(<span class="string"><span class="delimiter">&quot;</span><span class="content">//*[contains(@class,'</span><span class="delimiter">&quot;</span></span> + CLASS_NAME_SUGGESTION_LIST + <span class="string"><span class="delimiter">&quot;</span><span class="content">')]</span><span class="delimiter">&quot;</span></span>));

        WebElement suggList = getRightSuggestionList();

        <span class="keyword">return</span> suggList.isDisplayed();
    }

    <span class="directive">public</span> <span class="type">void</span> finish() {
        inputToWrite.sendKeys(<span class="string"><span class="delimiter">&quot;</span><span class="content"> </span><span class="delimiter">&quot;</span></span>);
        inputToWrite.sendKeys(<span class="string"><span class="delimiter">&quot;</span><span class="char">\b</span><span class="char">\b</span><span class="delimiter">&quot;</span></span>);
        root.click();
    }

    <span class="directive">public</span> <span class="predefined-type">List</span>&lt;Suggestion&lt;T&gt;&gt; getAllSuggestions(SuggestionParser&lt;T&gt; parser) {
        <span class="predefined-type">List</span>&lt;Suggestion&lt;T&gt;&gt; allSugg = <span class="keyword">new</span> <span class="predefined-type">ArrayList</span>&lt;Suggestion&lt;T&gt;&gt;();

        <span class="keyword">if</span> (areSuggestionsAvailable()) {
            WebElement rightSuggList = getRightSuggestionList();
            <span class="predefined-type">List</span>&lt;WebElement&gt; suggestions = rightSuggList.findElements(
                                         By.className(CLASS_NAME_SUGGESTION));

            <span class="keyword">for</span> (WebElement suggestion : suggestions) {
                allSugg.add(parser.parse(suggestion));
            }
        }

        <span class="keyword">return</span> allSugg;
    }

    <span class="directive">public</span> <span class="type">void</span> setSeparator(<span class="predefined-type">String</span> regex) {
        <span class="local-variable">this</span>.separator = regex;
    }

    <span class="directive">public</span> <span class="type">void</span> type(<span class="predefined-type">String</span> value) {
        inputToWrite.sendKeys(value);
        <span class="keyword">try</span> {
            waitForSuggestions(GUI_WAIT);
        } <span class="keyword">catch</span> (<span class="exception">TimeoutException</span> ex) {
            <span class="comment">// no suggestions available</span>

        }
    }

    <span class="directive">public</span> <span class="predefined-type">List</span>&lt;Suggestion&lt;T&gt;&gt; type(<span class="predefined-type">String</span> value, SuggestionParser&lt;T&gt; parser) {
        <span class="predefined-type">List</span>&lt;Suggestion&lt;T&gt;&gt; suggestions = <span class="keyword">new</span> <span class="predefined-type">ArrayList</span>&lt;Suggestion&lt;T&gt;&gt;();

        inputToWrite.sendKeys(value);
        <span class="keyword">try</span> {
            waitForSuggestions(GUI_WAIT);
        } <span class="keyword">catch</span> (<span class="exception">TimeoutException</span> ex) {
            <span class="comment">// no suggestions available</span>
            <span class="keyword">return</span> suggestions;
        }

        suggestions = getAllSuggestions(parser);
        <span class="keyword">return</span> suggestions;
    }

    <span class="directive">private</span> <span class="type">void</span> waitForSuggestions(<span class="type">int</span> timeout) {
        (<span class="keyword">new</span> WebDriverWait(GrapheneContext.getProxy(), timeout))
           .until(<span class="keyword">new</span> ExpectedCondition&lt;<span class="predefined-type">Boolean</span>&gt;() {

            <span class="directive">public</span> <span class="predefined-type">Boolean</span> apply(WebDriver d) {
                <span class="keyword">return</span> areSuggestionsAvailable();
            }
        });
    }

    <span class="comment">//other Autocomplete services and help methods</span>
}</code></pre>
</div>
</div>
</div>
<div class="sect4">
<h5 id="calendar"><a class="anchor" href="#calendar"></a>Calendar</h5>
<div class="imageblock">
<div class="content">
<img src="https://raw.githubusercontent.com/arquillian/arquillian-graphene/master/docs/images/calendar.png" alt="calendar">
</div>
</div>
<div class="imageblock">
<div class="content">
<img src="https://raw.githubusercontent.com/arquillian/arquillian-graphene/master/docs/images/calendarHTML.png" alt="calendarHTML">
</div>
</div>
<div class="listingblock">
<div class="title">CalendarPageFragmentImpl.java</div>
<div class="content">
<pre class="CodeRay highlight"><code data-lang="java"><span class="directive">public</span> <span class="type">class</span> <span class="class">CalendarPageFragmentImpl</span> {

    <span class="annotation">@Root</span>
    <span class="directive">private</span> WebElement root;

    <span class="annotation">@FindBy</span>(className = <span class="string"><span class="delimiter">&quot;</span><span class="content">rf-cal-inp</span><span class="delimiter">&quot;</span></span>)
    <span class="directive">private</span> WebElement input;

    <span class="annotation">@FindBy</span>(css = <span class="string"><span class="delimiter">&quot;</span><span class="content">td[class=</span><span class="char">\&quot;</span><span class="content">rf-cal-hdr-month</span><span class="char">\&quot;</span><span class="content">] &gt; div</span><span class="delimiter">&quot;</span></span>)
    <span class="directive">private</span> WebElement showYearAndMonthEditorButton;

    <span class="annotation">@FindBy</span>(css = <span class="string"><span class="delimiter">&quot;</span><span class="content">img:nth-of-type(1)</span><span class="delimiter">&quot;</span></span>)
    <span class="directive">private</span> WebElement showCalendarButton;

    <span class="annotation">@FindBy</span>(className = <span class="string"><span class="delimiter">&quot;</span><span class="content">rf-cal-day-lbl</span><span class="delimiter">&quot;</span></span>)
    <span class="directive">private</span> WebElement popupWithCalendar;

    <span class="annotation">@FindBy</span>(css = <span class="string"><span class="delimiter">&quot;</span><span class="content">div[class=</span><span class="char">\&quot;</span><span class="content">rf-cal-time-btn</span><span class="char">\&quot;</span><span class="content">]:nth-of-type(1)</span><span class="delimiter">&quot;</span></span>)
    <span class="directive">private</span> WebElement okButton;

    <span class="annotation">@FindBy</span>(css = <span class="string"><span class="delimiter">&quot;</span><span class="content">table[class=</span><span class="char">\&quot;</span><span class="content">rf-cal-monthpicker-cnt</span><span class="char">\&quot;</span><span class="content">] td:nth-of-type(4) &gt; div</span><span class="delimiter">&quot;</span></span>)
    <span class="directive">private</span> WebElement nextDecade;

    <span class="annotation">@FindBy</span>(css = <span class="string"><span class="delimiter">&quot;</span><span class="content">table[class=</span><span class="char">\&quot;</span><span class="content">rf-cal-monthpicker-cnt</span><span class="char">\&quot;</span><span class="content">] td:nth-of-type(3) &gt; div</span><span class="delimiter">&quot;</span></span>)
    <span class="directive">private</span> WebElement previousDecade;

    <span class="directive">private</span> <span class="directive">final</span> <span class="predefined-type">String</span> YEAR_AND_MONTH_LOCATOR_CSS =
                                                       <span class="string"><span class="delimiter">&quot;</span><span class="content">div[class=</span><span class="char">\&quot;</span><span class="content">rf-cal-edtr-btn</span><span class="char">\&quot;</span><span class="content">]</span><span class="delimiter">&quot;</span></span>;

    <span class="directive">private</span> <span class="directive">final</span> <span class="predefined-type">String</span> DAY_LOCATOR_CLASS = <span class="string"><span class="delimiter">&quot;</span><span class="content">rf-cal-c</span><span class="delimiter">&quot;</span></span>;

    <span class="comment">/**
     * The format of date displayed on the calendar input, default dd/M/yyhh:mma
     */</span>
    <span class="directive">private</span> <span class="predefined-type">String</span> dateFormat = <span class="string"><span class="delimiter">&quot;</span><span class="content">dd/M/yy hh:mm a</span><span class="delimiter">&quot;</span></span>;

    <span class="directive">public</span> <span class="type">void</span> showCalendar() {

        <span class="keyword">if</span> (!popupWithCalendar.isDisplayed()) {
            showCalendarButton.click();

            waitUntilPopupWithCalendarIsDisplayed();
        }
    }

    <span class="directive">private</span> <span class="type">void</span> gotoDate(<span class="predefined-type">Date</span> date) {
        showCalendar();

        <span class="predefined-type">Calendar</span> cal = <span class="keyword">new</span> <span class="predefined-type">GregorianCalendar</span>();
        cal.setTime(date);
        <span class="type">int</span> wishedYear = cal.get(<span class="predefined-type">Calendar</span>.YEAR);
        <span class="comment">// month is indexed from 0!</span>
        <span class="type">int</span> wishedMonth = cal.get(<span class="predefined-type">Calendar</span>.MONTH);
        <span class="type">int</span> wishedDay = cal.get(<span class="predefined-type">Calendar</span>.DAY_OF_MONTH);

        cal.setTime(<span class="keyword">new</span> <span class="predefined-type">Date</span>(<span class="predefined-type">System</span>.currentTimeMillis()));

        <span class="type">int</span> todayYear = cal.get(<span class="predefined-type">Calendar</span>.YEAR);
        <span class="type">int</span> todayMonth = cal.get(<span class="predefined-type">Calendar</span>.MONTH);
        <span class="comment">// int todayDay = cal.get(Calendar.DAY_OF_MONTH);</span>

        showYearAndMonthEditorButton.click();

        <span class="keyword">if</span> ((wishedYear != todayYear) || (wishedMonth != todayMonth)) {
            <span class="predefined-type">List</span>&lt;WebElement&gt; years;
            <span class="predefined-type">String</span> txt;

            <span class="keyword">if</span> (todayYear &gt; wishedYear) {
                <span class="type">int</span> howManyDecadesLessOrMore =
                                              (todayYear - wishedYear) / <span class="integer">10</span>;

                <span class="keyword">for</span> (<span class="type">int</span> i = <span class="integer">0</span>; i &lt; howManyDecadesLessOrMore; i++)
                    previousDecade.click();
            }

            <span class="keyword">if</span> (todayYear &lt; wishedYear) {
                <span class="type">int</span> howManyDecadesLessOrMore =
                                              (wishedYear - todayYear) / <span class="integer">10</span>;

                <span class="keyword">for</span> (<span class="type">int</span> i = <span class="integer">0</span>; i &lt; howManyDecadesLessOrMore; i++)
                    nextDecade.click();
            }

            selectYear(wishedYear);

            years = root.findElements(By
                    .cssSelector(YEAR_AND_MONTH_LOCATOR_CSS));

            <span class="keyword">for</span> (WebElement i : years) {
                txt = i.getText().trim();

                <span class="keyword">if</span> (txt.matches(<span class="string"><span class="delimiter">&quot;</span><span class="content">[a-zA-Z]+?</span><span class="delimiter">&quot;</span></span>)) {
                    <span class="keyword">if</span> (txt.equals(<span class="string"><span class="delimiter">&quot;</span><span class="content">Jan</span><span class="delimiter">&quot;</span></span>) &amp;&amp; wishedMonth == <span class="integer">0</span>) {
                        i.click();
                        <span class="comment">// break;</span>
                    } <span class="keyword">else</span> <span class="keyword">if</span>(txt.equals(<span class="string"><span class="delimiter">&quot;</span><span class="content">Feb</span><span class="delimiter">&quot;</span></span>) &amp;&amp; wishedMonth == <span class="integer">1</span>) {
                        i.click();
                        <span class="comment">// break;</span>
                    } <span class="keyword">else</span> <span class="keyword">if</span> (txt.equals(<span class="string"><span class="delimiter">&quot;</span><span class="content">Mar</span><span class="delimiter">&quot;</span></span>) &amp;&amp; wishedMonth == <span class="integer">2</span>){
                        i.click();
                        <span class="comment">// break;</span>
                    } <span class="keyword">else</span> <span class="keyword">if</span> (txt.equals(<span class="string"><span class="delimiter">&quot;</span><span class="content">Apr</span><span class="delimiter">&quot;</span></span>) &amp;&amp; wishedMonth == <span class="integer">3</span>){
                        i.click();
                        <span class="comment">// break;</span>
                    } <span class="keyword">else</span> <span class="keyword">if</span> (txt.equals(<span class="string"><span class="delimiter">&quot;</span><span class="content">May</span><span class="delimiter">&quot;</span></span>) &amp;&amp; wishedMonth == <span class="integer">4</span>){
                        i.click();
                        <span class="comment">// break;</span>
                    } <span class="keyword">else</span> <span class="keyword">if</span> (txt.equals(<span class="string"><span class="delimiter">&quot;</span><span class="content">Jun</span><span class="delimiter">&quot;</span></span>) &amp;&amp; wishedMonth == <span class="integer">5</span>){
                        i.click();
                        <span class="comment">// break;</span>
                    } <span class="keyword">else</span> <span class="keyword">if</span> (txt.equals(<span class="string"><span class="delimiter">&quot;</span><span class="content">Jul</span><span class="delimiter">&quot;</span></span>) &amp;&amp; wishedMonth == <span class="integer">6</span>){
                        i.click();
                        <span class="comment">// break;</span>
                    } <span class="keyword">else</span> <span class="keyword">if</span> (txt.equals(<span class="string"><span class="delimiter">&quot;</span><span class="content">Aug</span><span class="delimiter">&quot;</span></span>) &amp;&amp; wishedMonth == <span class="integer">7</span>){
                        i.click();
                        <span class="comment">// break;</span>
                    } <span class="keyword">else</span> <span class="keyword">if</span> (txt.equals(<span class="string"><span class="delimiter">&quot;</span><span class="content">Sep</span><span class="delimiter">&quot;</span></span>) &amp;&amp; wishedMonth == <span class="integer">8</span>){
                        i.click();
                        <span class="comment">// break;</span>
                    } <span class="keyword">else</span> <span class="keyword">if</span> (txt.equals(<span class="string"><span class="delimiter">&quot;</span><span class="content">Oct</span><span class="delimiter">&quot;</span></span>) &amp;&amp; wishedMonth == <span class="integer">9</span>){
                        i.click();
                        <span class="comment">// break;</span>
                    } <span class="keyword">else</span> <span class="keyword">if</span> (txt.equals(<span class="string"><span class="delimiter">&quot;</span><span class="content">Nov</span><span class="delimiter">&quot;</span></span>) &amp;&amp; wishedMonth == <span class="integer">10</span>{
                        i.click();
                        <span class="comment">// break;</span>
                    } <span class="keyword">else</span> <span class="keyword">if</span> (txt.equals(<span class="string"><span class="delimiter">&quot;</span><span class="content">Dec</span><span class="delimiter">&quot;</span></span>) &amp;&amp; wishedMonth == <span class="integer">11</span>{
                        i.click();
                        <span class="comment">// break;</span>
                    }
                }
            }

            okButton.click();
        }

        <span class="predefined-type">List</span>&lt;WebElement&gt; days = root.findElements(By
                .className(DAY_LOCATOR_CLASS));
        <span class="predefined-type">String</span> txt;
        <span class="keyword">for</span> (WebElement i : days) {
            txt = i.getText().trim();
            <span class="type">int</span> day = <span class="keyword">new</span> <span class="predefined-type">Integer</span>(txt);
            <span class="keyword">if</span> (day == wishedDay) {
                i.click();
                <span class="keyword">break</span>;
            }
        }
    }

    <span class="comment">/**
     * Selects the year on the calendar, note that the month and year editor has
     * to be shown already
     *
     * @param wishedYear
     *            the year you want to set
     * @return true if the year was successfully set, false otherwise
     */</span>
    <span class="directive">private</span> <span class="type">boolean</span> selectYear(<span class="type">int</span> wishedYear) {
        <span class="predefined-type">List</span>&lt;WebElement&gt; years = root.findElements(By
                .cssSelector(YEAR_AND_MONTH_LOCATOR_CSS));
        <span class="predefined-type">String</span> txt;

        <span class="keyword">for</span> (WebElement i : years) {

            txt = i.getText().trim();
            <span class="type">int</span> year;

            <span class="keyword">if</span> (txt.matches(<span class="string"><span class="delimiter">&quot;</span><span class="char">\\</span><span class="content">d+?</span><span class="delimiter">&quot;</span></span>)) {
                year = <span class="keyword">new</span> <span class="predefined-type">Integer</span>(txt);

                <span class="keyword">if</span> (wishedYear == year) {
                    i.click();
                    <span class="keyword">return</span> <span class="predefined-constant">true</span>;
                }
            }
        }
        <span class="keyword">return</span> <span class="predefined-constant">false</span>;
    }

    <span class="directive">public</span> <span class="type">void</span> gotoDateTime(DateTime dateTime) {
        <span class="predefined-type">Date</span> date = dateTime.toDate();
        gotoDate(date);
    }

    <span class="directive">public</span> <span class="type">void</span> gotoDateTime(DateTime dateTime, ScrollingType type) {
        <span class="keyword">throw</span> <span class="keyword">new</span> <span class="exception">UnsupportedOperationException</span>(<span class="string"><span class="delimiter">&quot;</span><span class="content">Not implemented yet!</span><span class="delimiter">&quot;</span></span>);
    }

    <span class="directive">public</span> CalendarDay gotoNextDay() {
        <span class="predefined-type">Date</span> date = getDateTime().toDate();
        <span class="predefined-type">Calendar</span> cal = <span class="keyword">new</span> <span class="predefined-type">GregorianCalendar</span>();
        cal.setTime(date);
        cal.roll(<span class="predefined-type">Calendar</span>.DAY_OF_MONTH, <span class="predefined-constant">true</span>);

        gotoDate(cal.getTime());

        <span class="comment">// CalendarDay day = new CalendarDayImpl();</span>
        <span class="keyword">return</span> <span class="predefined-constant">null</span>;
    }
}</code></pre>
</div>
</div>
</div>
<div class="sect4">
<h5 id="table"><a class="anchor" href="#table"></a>Table</h5>
<div class="imageblock">
<div class="content">
<img src="https://raw.githubusercontent.com/arquillian/arquillian-graphene/master/docs/images/table.png" alt="table">
</div>
</div>
<div class="imageblock">
<div class="content">
<img src="https://raw.githubusercontent.com/arquillian/arquillian-graphene/master/docs/images/tableHTML.png" alt="tableHTML">
</div>
</div>
<div class="listingblock">
<div class="title">Table.java</div>
<div class="content">
<pre class="CodeRay highlight"><code data-lang="java"><span class="directive">public</span> <span class="type">interface</span> <span class="class">TableComponent</span> {

    <span class="comment">/**
     * Associates this data table with a given data scroller
     *
     * @param scroller the scroller to associate this table with
     */</span>
    <span class="type">void</span> setDateScroller(DataScrollerComponent scroller);

    <span class="comment">/**
     * &lt;p&gt;
     * Returns the total number of rows in this particular table.
     * &lt;/p&gt;
     * &lt;p&gt;
     * The &lt;code&gt;rowspan&lt;/code&gt; html atribute is not considered,
     * in other words the row with &lt;code&gt;rowspan&lt;/code&gt; equals 2 is
     * considered as one row.
     * &lt;/p&gt;
     *
     * @return
     */</span>
    <span class="type">int</span> getNumberOfRows();

    <span class="comment">/**
     * &lt;p&gt;
     * Returns total number of cells in this particular table.
     * &lt;/p&gt;
     *
     * @return
     */</span>
    <span class="type">int</span> getNumberOfCells();

    &lt;T&gt; <span class="predefined-type">List</span>&lt;Cell&lt;T&gt;&gt; findCells(CellFunction&lt;T&gt; function);

    <span class="predefined-type">List</span>&lt;Row&gt; findRow(RowFunction function);

    &lt;T&gt; <span class="predefined-type">List</span>&lt;Column&lt;T&gt;&gt; findColumns(ColumnFunction&lt;T&gt; function);

    <span class="comment">/**
     * &lt;p&gt;
     * Returns the total number of columns in this particular table.
     * &lt;/p&gt;
     * &lt;p&gt;
     * The &lt;code&gt;colspan&lt;/code&gt; html atribute is not considered,
     * in other words the column with &lt;code&gt;colspan&lt;/code&gt; equals 2 is
     * considered as one column.
     * &lt;/p&gt;
     *
     * @return
     */</span>
    <span class="type">int</span> getNumberOfColumns();

    <span class="comment">/**
     * Returns the particular cell, the cell with coordinations determined
     * by given row and column.
     *
     * @param row
     * @param column
     * @return
     */</span>
    &lt;T&gt; Cell&lt;T&gt; getCell(Row row, Column&lt;T&gt; column);

    <span class="comment">/**
     * Returns the list of all header cells, in other words the whole table header.
     *
     * @return
     */</span>
    Header getTableHeader();

    <span class="comment">/**
     * Returns the list of all footer cells, in other words the whole table footer.
     *
     * @return
     */</span>
    Footer getTableFooter();

    <span class="comment">/**
     *
     * @return
     */</span>
    <span class="predefined-type">List</span>&lt;Row&gt; getAllRows();

    <span class="comment">/**
     * Returns the first row of the table, the header row if available, is not counted.
     *
     * @return
     */</span>
    Row getFirstRow();

    <span class="comment">/**
     * Returns the last row of the table, the footer row if available, is not counted.
     *
     * @return
     */</span>
    Row getLastRow();

    <span class="comment">/**
     * &lt;p&gt;
     * Returns the row with the order determined by given param &lt;code&gt;order&lt;/code&gt;.
     * &lt;/p&gt;
     * &lt;p&gt;
     * Rows are indexed from 0. The header row if available is not counted.
     * &lt;/p&gt;
     *
     * @param order the order of the row
     * @return the particular row, or null if it does not exist
     */</span>
    Row getRow(<span class="type">int</span> order);
}</code></pre>
</div>
</div>
</div>
<div class="sect4">
<h5 id="login-component"><a class="anchor" href="#login-component"></a>Login Component</h5>
<div class="listingblock">
<div class="title">LoginPageFragment.java</div>
<div class="content">
<pre class="CodeRay highlight"><code data-lang="java"><span class="directive">public</span> <span class="type">class</span> <span class="class">LoginPageFragment</span> {

    <span class="annotation">@Root</span>
    <span class="directive">private</span> WebElement root;

    <span class="annotation">@FindBy</span>(css=<span class="string"><span class="delimiter">&quot;</span><span class="content">input[type='text']</span><span class="delimiter">&quot;</span></span>)
    <span class="directive">private</span> WebElement loginInput;

    <span class="annotation">@FindBy</span>(css=<span class="string"><span class="delimiter">&quot;</span><span class="content">input[type='password']</span><span class="delimiter">&quot;</span></span>)
    <span class="directive">private</span> WebElement passwordInput;

    <span class="annotation">@FindBy</span>(css=<span class="string"><span class="delimiter">&quot;</span><span class="content">input[type='submit']</span><span class="delimiter">&quot;</span></span>)
    <span class="directive">private</span> WebElement loginButton;

    <span class="annotation">@FindBy</span>(className=<span class="string"><span class="delimiter">&quot;</span><span class="content">errorMsg</span><span class="delimiter">&quot;</span></span>)
    <span class="directive">private</span> WebElement errorMsg;

    <span class="directive">public</span> <span class="type">void</span> fillInLogin(<span class="predefined-type">String</span> login) {
        loginInput.sendKeys(login);
    }

    <span class="directive">public</span> <span class="type">void</span> fillInPassword(<span class="predefined-type">String</span> password) {
        passwordInput.sendKeys(password);
    }

    <span class="directive">public</span> <span class="type">void</span> login() {
        loginButton.click();
    }

    <span class="directive">public</span> <span class="predefined-type">String</span> getErrorMsg() {
        <span class="keyword">return</span> errorMsg.getText();
    }
}</code></pre>
</div>
</div>
</div>
</div>
</div>
<div class="sect2">
<h3 id="location-of-pages"><a class="anchor" href="#location-of-pages"></a>7.5. Location of Pages</h3>
<div class="sect3">
<h4 id="location-concepts"><a class="anchor" href="#location-concepts"></a>7.5.1. Location concepts</h4>
<div class="paragraph">
<p>Page object encapsulates some page. This page has its location. We can
see the location of a page as some kind of metadata logically related to
that page. In order to have this location information wired with page as
such, there is @Location annotation by which you can specify where some
page is located. Check out this simple example:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="CodeRay highlight"><code data-lang="java"><span class="annotation">@Location</span>(<span class="string"><span class="delimiter">&quot;</span><span class="content">index.html</span><span class="delimiter">&quot;</span></span>)
<span class="directive">public</span> <span class="type">class</span> <span class="class">SomePage</span>
{
  <span class="comment">// just some page object</span>
}</code></pre>
</div>
</div>
<div class="paragraph">
<p>The above location value will be treated as the relative URL to the
value of @ArquillianResource URL contextRoot - e.g.
<a href="http://localhost:8080/app/index.html" class="bare">http://localhost:8080/app/index.html</a>.</p>
</div>
<div class="admonitionblock note">
<table>
<tr>
<td class="icon">
<i class="fa icon-note" title="Note"></i>
</td>
<td class="content">
Use @Location("") to denote that page object&#8217;s location equals to the
context root of the deployed application.
</td>
</tr>
</table>
</div>
<div class="paragraph">
<p>By putting @Location annotation at page object, when you inject this
page annotated with @InitialPage annotation into a test method, that
page object will be open at that location as the very first action in a
test method. Lets see an example:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="CodeRay highlight"><code data-lang="java"><span class="annotation">@Test</span>
<span class="directive">public</span> <span class="type">void</span> testMethod(<span class="annotation">@InitialPage</span> SomePage page)
{
    <span class="comment">// here you will have your page already open, WebDriver opens index.html</span>

    <span class="comment">// other code</span>
}</code></pre>
</div>
</div>
</div>
<div class="sect3">
<h4 id="location-schemes"><a class="anchor" href="#location-schemes"></a>7.5.2. Location schemes</h4>
<div class="paragraph">
<p>Every location has some scheme. In the previous example, HTTP scheme
is used by default. There are multiple schemes as:</p>
</div>
<div class="sect4">
<h5 id="http-scheme"><a class="anchor" href="#http-scheme"></a>HTTP Scheme</h5>
<div class="paragraph">
<p>Treats location as http:// scheme. You do not have to specify <em>scheme</em>
parameter since by default it is HTTP</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="CodeRay highlight"><code data-lang="java"><span class="annotation">@Location</span>(<span class="string"><span class="delimiter">&quot;</span><span class="content">http://www.google.com</span><span class="delimiter">&quot;</span></span>) <span class="comment">// by default scheme = Scheme.HTTP.class when omitted</span>
<span class="annotation">@Location</span>(<span class="string"><span class="delimiter">&quot;</span><span class="content">https://www.google.com</span><span class="delimiter">&quot;</span></span>) <span class="comment">// works with https as well, scheme is same</span></code></pre>
</div>
</div>
<div class="admonitionblock caution">
<table>
<tr>
<td class="icon">
<i class="fa icon-caution" title="Caution"></i>
</td>
<td class="content">
<div class="paragraph">
<p>You can not do this</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="CodeRay highlight"><code data-lang="java"><span class="annotation">@Location</span>(<span class="string"><span class="delimiter">&quot;</span><span class="content">www.google.com</span><span class="delimiter">&quot;</span></span>)</code></pre>
</div>
</div>
<div class="paragraph">
<p>since it is not possible to say if this location is relative (as
index.html) or absolute. You have to use http:// scheme string
explicitly to open regular "www" page on the net.</p>
</div>
</td>
</tr>
</table>
</div>
</div>
<div class="sect4">
<h5 id="file-scheme"><a class="anchor" href="#file-scheme"></a>File Scheme</h5>
<div class="paragraph">
<p>Treats location as file:// scheme</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="CodeRay highlight"><code data-lang="java"><span class="annotation">@Location</span>(scheme = Scheme.FILE.class, value = <span class="string"><span class="delimiter">&quot;</span><span class="content">file:///full/path/to/page.html</span><span class="delimiter">&quot;</span></span>)</code></pre>
</div>
</div>
</div>
<div class="sect4">
<h5 id="resource-scheme"><a class="anchor" href="#resource-scheme"></a>Resource Scheme</h5>
<div class="paragraph">
<p>Treats location as resource:// scheme</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="CodeRay highlight"><code data-lang="java"><span class="annotation">@Location</span>(scheme = Scheme.RESOURCE.class, value = <span class="string"><span class="delimiter">&quot;</span><span class="content">resource://...</span><span class="delimiter">&quot;</span></span>)</code></pre>
</div>
</div>
<div class="admonitionblock note">
<table>
<tr>
<td class="icon">
<i class="fa icon-note" title="Note"></i>
</td>
<td class="content">
The "resource://" prefix denotes that the page is not deployed to any
container, and will be loaded from local file-system. The same you can
achieve with prefix "file".
</td>
</tr>
</table>
</div>
<div class="admonitionblock note">
<table>
<tr>
<td class="icon">
<i class="fa icon-note" title="Note"></i>
</td>
<td class="content">
Check out Graphene Utility Class documentation page, to see how you can
use Graphene.goTo(Class&lt;?&gt; pageObjectClass) method to load Page Object
location in the browser.
</td>
</tr>
</table>
</div>
</div>
</div>
<div class="sect3">
<h4 id="how-do-i-implement-my-own-scheme"><a class="anchor" href="#how-do-i-implement-my-own-scheme"></a>7.5.3. How Do I Implement My Own Scheme?</h4>
<div class="paragraph">
<p>Custom scheme is implemented e.g. in Droidium so you can open your
activities as pages. You have to extend
<a href="https://github.com/arquillian/arquillian-graphene/blob/master/spi/src/main/java/org/jboss/arquillian/graphene/spi/location/Scheme.java">org.jboss.arquillian.graphene.spi.location.Scheme</a>
and add your own scheme like this:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="CodeRay highlight"><code data-lang="java"><span class="directive">public</span> DroidiumScheme <span class="directive">extends</span> Scheme
{

    <span class="directive">private</span> <span class="directive">static</span> <span class="directive">final</span> <span class="predefined-type">String</span> scheme = <span class="string"><span class="delimiter">&quot;</span><span class="content">and-activity://</span><span class="delimiter">&quot;</span></span>;

    <span class="annotation">@Override</span>
    <span class="directive">public</span> <span class="predefined-type">String</span> toString()
    {
        <span class="keyword">return</span> scheme;
    }
}</code></pre>
</div>
</div>
<div class="paragraph">
<p>Then you have to implement your own
<a href="https://github.com/arquillian/arquillian-graphene/blob/master/spi/src/main/java/org/jboss/arquillian/graphene/spi/location/LocationDecider.java">org.jboss.arquillian.graphene.location.decider.LocationDecider</a>
which is in Graphene SPI as well. This decider resolves scheme value
to which WebDriver instance will subsequently open via get() method.</p>
</div>
<div class="paragraph">
<p>Finally you have to register this decider as a service in Arquillian&#8217;s
loadable extension.</p>
</div>
<div class="paragraph">
<p>After that, you can do this:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="CodeRay highlight"><code data-lang="java"><span class="annotation">@Location</span>(scheme = DroidiumScheme.class, value = <span class="string"><span class="delimiter">&quot;</span><span class="content">this.is.my.android.activity</span><span class="delimiter">&quot;</span></span>)
<span class="directive">public</span> <span class="type">class</span> <span class="class">SomeActivityPage</span>
{
}</code></pre>
</div>
</div>
<div class="listingblock">
<div class="content">
<pre class="CodeRay highlight"><code data-lang="java"><span class="annotation">@Test</span>
<span class="directive">public</span> <span class="type">void</span> testMyActivity(<span class="annotation">@InitialPage</span> SomeActivityPage myActivity)
{
    <span class="comment">// here your Android activity will be already open by WebDriver</span>
}</code></pre>
</div>
</div>
</div>
<div class="sect3">
<h4 id="how-to-set-default-scheme-per-project"><a class="anchor" href="#how-to-set-default-scheme-per-project"></a>7.5.4. How To Set Default Scheme Per Project?</h4>
<div class="paragraph">
<p>Imagining you are dealing only with Android activities so specifying
<em>scheme = DroidiumScheme.class</em> is not needed. You can set default
scheme in arquillian.xml like this:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="CodeRay highlight"><code data-lang="java">&lt;extension qualifier=<span class="string"><span class="delimiter">&quot;</span><span class="content">graphene</span><span class="delimiter">&quot;</span></span>&gt;
  &lt;!-- Droidium everywhere --&gt;
  &lt;property name=<span class="string"><span class="delimiter">&quot;</span><span class="content">scheme</span><span class="delimiter">&quot;</span></span>&gt;org.arquillian.droidium.native_.spi.location.DroidiumScheme&lt;/property&gt;
&lt;/extension&gt;</code></pre>
</div>
</div>
<div class="paragraph">
<p>Now you can use it like:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="CodeRay highlight"><code data-lang="java"><span class="annotation">@Location</span>(<span class="string"><span class="delimiter">&quot;</span><span class="content">this.is.my.android.activity</span><span class="delimiter">&quot;</span></span>)</code></pre>
</div>
</div>
</div>
</div>
</div>
</div>
<div class="sect1">
<h2 id="_location_strategies"><a class="anchor" href="#_location_strategies"></a>8. Location Strategies</h2>
<div class="sectionbody">
<div class="paragraph">
<p>It is a way to wire-up your tests with the elements from the tested page.
Graphene indeed supports a <code>@FindBy</code> mechanism, well-known from
<a href="http://seleniumhq.github.io/selenium/docs/api/java/org/openqa/selenium/support/FindBy.html">WebDriver</a>
project. That means support for e.g. <code>css</code>, <code>id</code>, <code>tagName</code> and other
default location strategies. Graphene adds some goodies to this
mechanism, check out <a href="#findby-annotation">FindBy annotation</a> for more
info.</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="CodeRay highlight"><code data-lang="java"><span class="annotation">@FindBy</span>(id = <span class="string"><span class="delimiter">&quot;</span><span class="content">htmlIdOfTheElement</span><span class="delimiter">&quot;</span></span>)
<span class="directive">private</span> WebElement yourElement;</code></pre>
</div>
</div>
<div class="paragraph">
<p>However, it lacks support for custom location strategies. Graphene comes
with ability to extend it, and at the same time provides an actual
extension: <code>@FindByJQuery</code> <a href="#jquery-locating-strategy">annotation</a>, which brings
JQuery selectors to your tests.</p>
</div>
<div class="sect2">
<h3 id="extending-the-location-strategy"><a class="anchor" href="#extending-the-location-strategy"></a>8.1. Extending The Location Strategy</h3>
<div class="paragraph">
<p>To introduce our own strategy, lets say for angular.js, one needs to simply:</p>
</div>
<div class="sect3">
<h4 id="extend-by-class"><a class="anchor" href="#extend-by-class"></a>8.1.1. Extend By Class</h4>
<div class="paragraph">
<p>Be inspired with
<a href="https://github.com/arquillian/arquillian-graphene/blob/master/api/src/main/java/org/jboss/arquillian/graphene/findby/ByJQuery.java">ByJQuery</a>
class.</p>
</div>
</div>
<div class="sect3">
<h4 id="implement-locationstrategy-interface"><a class="anchor" href="#implement-locationstrategy-interface"></a>8.1.2. Implement LocationStrategy Interface</h4>
<div class="paragraph">
<p>An implementation can look like following snippet:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="CodeRay highlight"><code data-lang="java"><span class="directive">public</span> <span class="directive">static</span> <span class="type">class</span> <span class="class">AngularLocationStrategy</span> <span class="directive">implements</span> LocationStrategy {

        <span class="annotation">@Override</span>
        <span class="directive">public</span> ByAngular fromAnnotation(<span class="predefined-type">Annotation</span> annotation) {
            FindByAngular findBy = (FindByAngular) annotation;
            <span class="keyword">return</span> <span class="keyword">new</span> ByAngular(findBy.value());
        }
    }</code></pre>
</div>
</div>
</div>
<div class="sect3">
<h4 id="introduce-e.g.-findbyangular-annotation"><a class="anchor" href="#introduce-e.g.-findbyangular-annotation"></a>8.1.3. Introduce e.g. @FindByAngular Annotation</h4>
<div class="listingblock">
<div class="content">
<pre class="CodeRay highlight"><code data-lang="java"><span class="annotation">@Retention</span>(<span class="predefined-type">RetentionPolicy</span>.RUNTIME)
<span class="annotation">@Target</span>(<span class="predefined-type">ElementType</span>.FIELD)
<span class="annotation">@ImplementsLocationStrategy</span>(ByAngular.AngularLocationStrategy.class)
<span class="directive">public</span> <span class="annotation">@interface</span> FindByAngular {

    <span class="predefined-type">String</span> value();
}</code></pre>
</div>
</div>
</div>
<div class="sect3">
<h4 id="use-it-in-the-tests"><a class="anchor" href="#use-it-in-the-tests"></a>8.1.4. Use It In The Tests</h4>
<div class="listingblock">
<div class="content">
<pre class="CodeRay highlight"><code data-lang="java"><span class="annotation">@FindByAngular</span>(<span class="string"><span class="delimiter">&quot;</span><span class="content">modelProperty</span><span class="delimiter">&quot;</span></span>)
<span class="directive">private</span> WebElement foo;</code></pre>
</div>
</div>
</div>
</div>
<div class="sect2">
<h3 id="delegate-to-webelement"><a class="anchor" href="#delegate-to-webelement"></a>8.2. Delegate to WebElement</h3>
<div class="paragraph">
<p>It is easy to add all <code>WebElement</code> methods to your custom page fragment,
because Graphene supports delegate pattern.</p>
</div>
<div class="sect3">
<h4 id="basic-usage"><a class="anchor" href="#basic-usage"></a>8.2.1. Basic Usage</h4>
<div class="paragraph">
<p>Suppose following page fragment, which implements <code>WebElement</code>.</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="CodeRay highlight"><code data-lang="java"><span class="keyword">import</span> <span class="include">org.jboss.arquillian.graphene.fragment.Root</span>;
<span class="keyword">import</span> <span class="include">org.openqa.selenium.WebElement</span>;

<span class="directive">public</span> <span class="directive">abstract</span> <span class="type">class</span> <span class="class">MyInputFragment</span> <span class="directive">implements</span> WebElement {

    <span class="annotation">@Root</span>
    <span class="directive">private</span> WebElement input;

    <span class="directive">public</span> <span class="predefined-type">String</span> getInputText() {
        <span class="keyword">return</span> input.getAttribute(<span class="string"><span class="delimiter">&quot;</span><span class="content">value</span><span class="delimiter">&quot;</span></span>);
    }

    <span class="directive">public</span> <span class="predefined-type">String</span> getStyleClass() {
        <span class="keyword">return</span> input.getAttribute(<span class="string"><span class="delimiter">&quot;</span><span class="content">class</span><span class="delimiter">&quot;</span></span>);
    }
}</code></pre>
</div>
</div>
<div class="paragraph">
<p>Graphene will ensure that you can call on such a page fragment all
<code>WebElement</code> and all your custom methods.</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="CodeRay highlight"><code data-lang="java"><span class="keyword">import</span> <span class="include">org.openqa.selenium.support.FindBy</span>;
<span class="keyword">import</span> <span class="include">org.openqa.selenium.WebDriver</span>;
<span class="keyword">import</span> <span class="include">org.junit.Test</span>;
<span class="keyword">import</span> <span class="include">org.junit.runner.RunWith</span>;
<span class="keyword">import</span> <span class="include">org.jboss.arquillian.junit.Arquillian</span>;
<span class="keyword">import</span> <span class="include">org.jboss.arquillian.container.test.api.RunAsClient</span>;
<span class="keyword">import</span> <span class="include">org.jboss.arquillian.drone.api.annotation.Drone</span>;

<span class="annotation">@RunWith</span>(Arquillian.class)
<span class="annotation">@RunAsClient</span>
<span class="directive">public</span> <span class="type">class</span> <span class="class">Test</span> {

    <span class="annotation">@Drone</span>
    <span class="directive">private</span> WebDriver browser;

    <span class="annotation">@FindBy</span>(css = <span class="string"><span class="delimiter">&quot;</span><span class="content">.foo-bar</span><span class="delimiter">&quot;</span></span>)
    <span class="directive">private</span> MyInputFragment input;

    <span class="annotation">@Test</span>
    <span class="directive">public</span> <span class="type">void</span> testPageFragmentMethodIsDelegatingCorrectly() {
        <span class="comment">//page loading, etc.</span>

        <span class="comment">//WebDriver methods</span>
        input.sendKeys(<span class="string"><span class="delimiter">&quot;</span><span class="content">Graphene rulez!</span><span class="delimiter">&quot;</span></span>);

        <span class="comment">//Custom fragment methods</span>
        <span class="predefined-type">String</span> value = input.getInputText();
    }
}</code></pre>
</div>
</div>
</div>
</div>
<div class="sect2">
<h3 id="findby-annotation"><a class="anchor" href="#findby-annotation"></a>8.3. FindBy annotation</h3>
<div class="paragraph">
<p>Graphene comes with support for Selenium 2, <code>@FindBy</code>
<a href="http://seleniumhq.github.io/selenium/docs/api/java/org/openqa/selenium/support/FindBy.html">annotation</a>,
which can be used to locate your elements in your
<a href="#page-objects">Page Objects</a>, <a href="#page-fragments">Page
Fragments</a> and in tests as well.</p>
</div>
<div class="sect3">
<h4 id="basic-usage-1"><a class="anchor" href="#basic-usage-1"></a>8.3.1. Basic Usage</h4>
<div class="listingblock">
<div class="content">
<pre class="CodeRay highlight"><code data-lang="java"><span class="keyword">import</span> <span class="include">org.openqa.selenium.support.FindBy</span>;

<span class="directive">public</span> <span class="type">class</span> <span class="class">TestClassOrPageObjectOrPageFragment</span> {

  <span class="annotation">@FindBy</span>(id = <span class="string"><span class="delimiter">&quot;</span><span class="content">myButton</span><span class="delimiter">&quot;</span></span>)
  <span class="directive">private</span> WebElement button;

  <span class="annotation">@FindBy</span>(className = <span class="string"><span class="delimiter">&quot;</span><span class="content">foo-bar</span><span class="delimiter">&quot;</span></span>)
  <span class="directive">private</span> MyPageFragmentImpl myFragment;

  <span class="annotation">@FindBy</span>(css = <span class="string"><span class="delimiter">&quot;</span><span class="content">.blah-class</span><span class="delimiter">&quot;</span></span>)
  <span class="directive">private</span> <span class="predefined-type">List</span>&lt;WebElement&gt; myListOfWebElements;

  <span class="annotation">@FindBy</span>(css = <span class="string"><span class="delimiter">&quot;</span><span class="content">.foo-bar</span><span class="delimiter">&quot;</span></span>)
  <span class="directive">private</span> <span class="predefined-type">List</span>&lt;MyPageFragmentImpl&gt; myListOfPageFragments;

  <span class="annotation">@FindBy</span>(id = <span class="string"><span class="delimiter">&quot;</span><span class="content">select</span><span class="delimiter">&quot;</span></span>)
  <span class="directive">private</span> Select select;
}</code></pre>
</div>
</div>
<div class="paragraph">
<p>As you can see, the <code>@FindBy</code> annotation usage is pretty the same as
with the Selenium 2.</p>
</div>
<div class="paragraph">
<p>Graphene allows you to annotate these fields:</p>
</div>
<div class="ulist">
<ul>
<li>
<p><code>WebElement</code>,</p>
</li>
<li>
<p>Page Fragment,</p>
</li>
<li>
<p>list of <code>WebElements</code>,</p>
</li>
<li>
<p>list of Page Fragments,</p>
</li>
<li>
<p>and also any <code>WebElement</code> wrappers, such as
<code>org.openqa.selenium.support.ui.Select</code></p>
</li>
</ul>
</div>
<div class="admonitionblock note">
<table>
<tr>
<td class="icon">
<i class="fa icon-note" title="Note"></i>
</td>
<td class="content">
No need to initialize those fields with any Page Factory. Graphene will
do so for you automatically.
</td>
</tr>
</table>
</div>
<div class="admonitionblock note">
<table>
<tr>
<td class="icon">
<i class="fa icon-note" title="Note"></i>
</td>
<td class="content">
Graphene supports also the <code>@FindBy&#8217;s</code> annotation and the <code>How</code> usage.
</td>
</tr>
</table>
</div>
</div>
<div class="sect3">
<h4 id="default-locating-strategy-for-locating-elements-with-empty-findby"><a class="anchor" href="#default-locating-strategy-for-locating-elements-with-empty-findby"></a>8.3.2. Default Locating Strategy For Locating Elements With Empty @FindBy</h4>
<div class="paragraph">
<p>You can often find this pattern in your tests when locating elements
with use of <code>@FindBy</code>:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="CodeRay highlight"><code data-lang="java"><span class="annotation">@FindBy</span>(id = <span class="string"><span class="delimiter">&quot;</span><span class="content">loginButton</span><span class="delimiter">&quot;</span></span>)
WebElement loginButton;</code></pre>
</div>
</div>
<div class="paragraph">
<p>When using <code>@FindBy</code> annotation with Graphene, the following is equal to
the above:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="CodeRay highlight"><code data-lang="java"><span class="annotation">@FindBy</span>
WebElement loginButton;</code></pre>
</div>
</div>
<div class="paragraph">
<p>Graphene by default automatically infers the element by using
<code>ByIdOrName</code> location strategy and the field name as the locator.<br>
It can be configured with the <code>defaultElementLocatingStrategy</code> property
in arquillian.xml. The possible values are the lowercase values of
<a href="http://seleniumhq.github.io/selenium/docs/api/java/org/openqa/selenium/support/How.html">How</a>
enum.</p>
</div>
</div>
</div>
<div class="sect2">
<h3 id="jquery-locating-strategy"><a class="anchor" href="#jquery-locating-strategy"></a>8.4. JQuery Locating Strategy</h3>
<div class="paragraph">
<p>You can leverage <a href="http://api.jquery.com/category/selectors">JQuery
Selectors</a> API to locate your elements.</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="CodeRay highlight"><code data-lang="java"><span class="keyword">import</span> <span class="include">org.jboss.arquillian.graphene.findby.FindByJQuery</span>;

<span class="annotation">@FindByJQuery</span>(<span class="string"><span class="delimiter">&quot;</span><span class="content">.foo-class:eq(0)</span><span class="delimiter">&quot;</span></span>)
<span class="directive">private</span> WebElement customElement;</code></pre>
</div>
</div>
<div class="paragraph">
<p>The above code will locate the the first element with the class
<em>'foo-class'</em>.</p>
</div>
<div class="admonitionblock note">
<table>
<tr>
<td class="icon">
<i class="fa icon-note" title="Note"></i>
</td>
<td class="content">
This locating strategy requires JQuery to be installed to the page.
Graphene installs it in a no conflict way automatically if it is needed
(jquery locating strategy is used and it has not been installed yet).
Note that it can have small performance impact, because the installation
of the JQuery library can take some time. Therefore, locating by <em>id</em>,
<em>css</em>, or <em>className</em> is preferred if possible or when you care about
that 1 sec which it takes usually.
</td>
</tr>
</table>
</div>
<div class="sect3">
<h4 id="inferring-the-element-from-the-root-of-the-document"><a class="anchor" href="#inferring-the-element-from-the-root-of-the-document"></a>8.4.1. Inferring The Element From The Root Of The Document</h4>
<div class="paragraph">
<p>Sometimes it is handy to locate your elements which are inferred from
the root of the document. It can be especially used in Page Fragments,
where all defined <code>@FindBy</code> and the <code>@FindByJQuery</code> annotations are
inferred from the root of that Page Fragment.</p>
</div>
<div class="paragraph">
<p>To infer them from the root of the document just start their locators
with <strong>html</strong>, <strong>head</strong>, or <strong>body</strong> expression. For example:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="CodeRay highlight"><code data-lang="java"><span class="annotation">@FindByJQuery</span>(<span class="string"><span class="delimiter">&quot;</span><span class="content">body div:visible</span><span class="delimiter">&quot;</span></span>)
<span class="directive">private</span> WebElement firstVisibleDiv;</code></pre>
</div>
</div>
</div>
</div>
<div class="sect2">
<h3 id="grapheneelement"><a class="anchor" href="#grapheneelement"></a>8.5. GrapheneElement</h3>
<div class="paragraph">
<p>To extend <code>WebElement</code> interface with some methods, Graphene comes with
its <code>GrapheneElement</code> implementation.</p>
</div>
<div class="paragraph">
<p>It supports all <code>WebElement</code> methods, and currently adds only support
for <code>boolean isPresent()</code> method.</p>
</div>
<div class="paragraph">
<p><code>GrapheneElement</code> can be used in the same places as <code>WebElement</code>.</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="CodeRay highlight"><code data-lang="java"><span class="annotation">@FindBy</span>(tagName = <span class="string"><span class="delimiter">&quot;</span><span class="content">input</span><span class="delimiter">&quot;</span></span>)
<span class="directive">private</span> GrapheneElement button;</code></pre>
</div>
</div>
</div>
<div class="sect2">
<h3 id="inframe-annotation"><a class="anchor" href="#inframe-annotation"></a>8.6. InFrame Annotation</h3>
<div class="paragraph">
<p>To facilitate the
<a href="https://code.google.com/p/selenium/wiki/FrequentlyAskedQuestions#Q:_How_do_I_type_into_a_contentEditable_iframe?">tedious
process</a> of switching to and from a particular frame/iframe you can now
just use the @InFrame annotation to specify in which frame the element
should be located. The details are handled by Graphene.</p>
</div>
<div class="sect3">
<h4 id="usage"><a class="anchor" href="#usage"></a>8.6.1. Usage</h4>
<div class="listingblock">
<div class="content">
<pre class="CodeRay highlight"><code data-lang="java"><span class="annotation">@Page</span>
<span class="annotation">@InFrame</span>(index = <span class="integer">0</span>)
<span class="directive">private</span> PageObject page;

<span class="annotation">@FindBy</span>(id = <span class="string"><span class="delimiter">&quot;</span><span class="content">foo-bar</span><span class="delimiter">&quot;</span></span>)
<span class="annotation">@InFrame</span>(nameOrId = <span class="string"><span class="delimiter">&quot;</span><span class="content">second</span><span class="delimiter">&quot;</span></span>)
<span class="directive">private</span> PageFragment myFragment;

<span class="annotation">@FindBy</span>(tagName = <span class="string"><span class="delimiter">&quot;</span><span class="content">div</span><span class="delimiter">&quot;</span></span>)
<span class="annotation">@InFrame</span>(index = <span class="integer">1</span>)
<span class="directive">private</span> WebElement plainWebElement;</code></pre>
</div>
</div>
<div class="paragraph">
<p>You can determine the iframe/frame by its index (zero based), or by
<code>nameOrId</code> strategy. Graphene will automatically switch to a particular
iframe/frame when a method is invoked on such annotated field.</p>
</div>
<div class="paragraph">
<p>When using <code>@InFrame</code> together with Page Object, all elements declared
in such Page Object will be treated as they are annotated with the same
<code>@InFrame</code>.</p>
</div>
</div>
</div>
</div>
</div>
<div class="sect1">
<h2 id="_dependency_injection"><a class="anchor" href="#_dependency_injection"></a>9. Dependency Injection</h2>
<div class="sectionbody">
<div class="paragraph">
<p>Following objects can be injected using @ArquillianResource annotation
to:</p>
</div>
<div class="ulist">
<ul>
<li>
<p>test case</p>
<div class="ulist">
<ul>
<li>
<p>(a test class containing @Test method when it is marked to
@RunWith(Arquillian.class))</p>
</li>
</ul>
</div>
</li>
<li>
<p>Page Objects</p>
</li>
<li>
<p>Page Fragments</p>
</li>
</ul>
</div>
<div class="paragraph">
<p>For example:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="CodeRay highlight"><code data-lang="java"><span class="annotation">@RunWith</span>(Arquillian.class)
<span class="annotation">@RunAsClient</span>
<span class="directive">public</span> <span class="type">class</span> <span class="class">MyTest</span><span class="error"> </span><span class="error">﻿</span>{

    <span class="annotation">@Drone</span>
    <span class="directive">private</span> WebDriver browser;


    <span class="annotation">@ArquillianResource</span>
    <span class="directive">private</span> JavascriptExecutor executor;


    <span class="annotation">@Test</span>
    <span class="directive">public</span> <span class="type">void</span> test() {
       browser.navigate().to(...);
       executor.executeAsync(...);
    }
}</code></pre>
</div>
</div>
<div class="paragraph">
<p>Here is a list of available resources that can be injected:</p>
</div>
<table class="tableblock frame-all grid-all spread">
<colgroup>
<col style="width: 16.6666%;">
<col style="width: 83.3334%;">
</colgroup>
<thead>
<tr>
<th class="tableblock halign-left valign-top">Class</th>
<th class="tableblock halign-left valign-top">Purpose</th>
</tr>
</thead>
<tbody>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><a href="http://seleniumhq.github.io/selenium/docs/api/java/org/openqa/selenium/WebDriver.html">WebDriver</a></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">The main interface to use for testing, which represents an idealised
web browser.</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><a href="http://seleniumhq.github.io/selenium/docs/api/java/org/openqa/selenium/html5/WebStorage.html">LocalStorage</a></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Represents the local storage for the site currently opened in the
browser. Each site has its own separate storage area.</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><a href="https://seleniumhq.github.io/selenium/docs/api/java/org/openqa/selenium/html5/SessionStorage.html">SessionStorage</a></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Represents the session storage in the browser for the site currently
opened in the browser. The session storage areas is specific to the
current top level browsing context. Each context has a unique set of
session storage, one for each origin. Sites can add data to the session
storage and it will be accessible to any page from the same site opened
in that window.</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><a href="http://seleniumhq.github.io/selenium/docs/api/java/org/openqa/selenium/html5/ApplicationCache.html">ApplicationCache</a></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Represents the application cache status.</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><a href="https://seleniumhq.github.io/selenium/docs/api/java/org/openqa/selenium/interactions/TouchScreen.html">TouchScreen</a></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Represents basic touch screen operations.</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><a href="http://seleniumhq.github.io/selenium/docs/api/java/org/openqa/selenium/Rotatable.html">Rotatable</a></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Represents rotation of the browser view for orientation-sensitive
devices. When using this with a real device, the device should not be
moved so that the built-in sensors do not interfere.</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><a href="http://seleniumhq.github.io/selenium/docs/api/java/org/openqa/selenium/html5/LocationContext.html">LocationContext</a></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Represents the physical location of the browser.</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><a href="http://seleniumhq.github.io/selenium/docs/api/java/org/openqa/selenium/interactions/Actions.html">Actions</a></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">The user-facing API for emulating complex user gestures. Use this class
rather than using the Keyboard or Mouse directly. Implements the builder
pattern: Builds a CompositeAction containing all actions specified by
the method calls.</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><a href="https://seleniumhq.github.io/selenium/docs/api/java/org/openqa/selenium/interactions/Keyboard.html">Keyboard</a></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Represents  basic keyboard operations.</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><a href="https://seleniumhq.github.io/selenium/docs/api/java/org/openqa/selenium/interactions/Mouse.html">Mouse</a></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Represents  basic mouse operations.</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><a href="http://seleniumhq.github.io/selenium/docs/api/java/org/openqa/selenium/JavascriptExecutor.html">JavascriptExecutor</a></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Executes JavaScript, providing access to the mechanism to do so.</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><a href="http://seleniumhq.github.io/selenium/docs/api/java/org/openqa/selenium/TakesScreenshot.html">TakesScreenshot</a></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Captures a screenshot and store it in different ways.</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><a href="http://seleniumhq.github.io/selenium/docs/api/java/org/openqa/selenium/Capabilities.html">Capabilities</a></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Describes a series of key/value pairs that encapsulate aspects of a
browser.</p></td>
</tr>
</tbody>
</table>
</div>
</div>
<div class="sect1">
<h2 id="_parallel_browsers"><a class="anchor" href="#_parallel_browsers"></a>10. Parallel Browsers</h2>
<div class="sectionbody">
<div class="paragraph">
<p>It is a way to use multiple <code>WebDriver</code> instances in one test.</p>
</div>
<div class="sect2">
<h3 id="usage"><a class="anchor" href="#usage"></a>10.1. Usage</h3>
<div class="paragraph">
<p>Consider testing of the server push functionality. More particularly a
scenario where:</p>
</div>
<div class="olist arabic">
<ol class="arabic">
<li>
<p>You make an update to a server from a FireFox browser.</p>
</li>
<li>
<p>The server will push the update to all registered listeners.</p>
</li>
<li>
<p>You want to check that client loaded in the Chrome will receive the
update as well.</p>
</li>
</ol>
</div>
<div class="paragraph">
<p>The Graphene support for testing of the above will look like:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="CodeRay highlight"><code data-lang="java"><span class="annotation">@Browser1</span>
<span class="annotation">@Drone</span>
<span class="directive">private</span> WebDriver browser1;

<span class="annotation">@Browser2</span>
<span class="annotation">@Drone</span>
<span class="directive">private</span> WebDriver browser2;

<span class="directive">public</span> <span class="type">void</span> testServerPushFromFirefoxToChromeAfterRegistration() {
    browser1.get(<span class="error">“</span>http:<span class="comment">//localhost:8080/myApp”);</span>
    browser2.get(<span class="error">“</span>http:<span class="comment">//localhost:8080/myApp”);</span>

    formFragment.registerUser(<span class="keyword">new</span> User(<span class="error">“</span>John<span class="error">”</span>), browser1);
    registeredUsers.assertContains(<span class="error">“</span>John<span class="error">”</span>, browser2);
}</code></pre>
</div>
</div>
<div class="paragraph">
<p><code>@Browser1</code> and <code>@Browser2</code> annotations are qualifiers, similar concept
as in CDI. Declaration of one of them may look like:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="CodeRay highlight"><code data-lang="java"><span class="keyword">import</span> <span class="include">java.lang.annotation.ElementType</span>;
<span class="keyword">import</span> <span class="include">java.lang.annotation.Retention</span>;
<span class="keyword">import</span> <span class="include">java.lang.annotation.RetentionPolicy</span>;
<span class="keyword">import</span> <span class="include">java.lang.annotation.Target</span>;
<span class="keyword">import</span> <span class="include">org.jboss.arquillian.drone.api.annotation.Qualifier</span>;

<span class="annotation">@Retention</span>(<span class="predefined-type">RetentionPolicy</span>.RUNTIME)
<span class="annotation">@Target</span>({ <span class="predefined-type">ElementType</span>.FIELD, <span class="predefined-type">ElementType</span>.PARAMETER })
<span class="annotation">@Qualifier</span>
<span class="directive">public</span> <span class="annotation">@interface</span> Browser1 {

}</code></pre>
</div>
</div>
<div class="paragraph">
<p>You can configure these browsers in <code>arquillian.xml</code>:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="CodeRay highlight"><code data-lang="xml"><span class="tag">&lt;extension</span> <span class="attribute-name">qualifier</span>=<span class="string"><span class="delimiter">&quot;</span><span class="content">webdriver-browser1</span><span class="delimiter">&quot;</span></span><span class="tag">&gt;</span>
  <span class="tag">&lt;property</span> <span class="attribute-name">name</span>=<span class="string"><span class="delimiter">&quot;</span><span class="content">browser</span><span class="delimiter">&quot;</span></span><span class="tag">&gt;</span>firefox<span class="tag">&lt;/property&gt;</span>
<span class="tag">&lt;/extension&gt;</span>
<span class="tag">&lt;extension</span> <span class="attribute-name">qualifier</span>=<span class="string"><span class="delimiter">&quot;</span><span class="content">webdriver-browser2</span><span class="delimiter">&quot;</span></span><span class="tag">&gt;</span>
  <span class="tag">&lt;property</span> <span class="attribute-name">name</span>=<span class="string"><span class="delimiter">&quot;</span><span class="content">browser</span><span class="delimiter">&quot;</span></span><span class="tag">&gt;</span>chrome<span class="tag">&lt;/property&gt;</span>
<span class="tag">&lt;/extension&gt;</span></code></pre>
</div>
</div>
</div>
<div class="sect2">
<h3 id="using-page-abstractions-with-multiple-browsers"><a class="anchor" href="#using-page-abstractions-with-multiple-browsers"></a>10.2. Using Page Abstractions With Multiple Browsers</h3>
<div class="paragraph">
<p>When you have multiple browser instances, lets say annotated with
qualifiers @Browser1 and @Browser2, and want to inject a page
abstraction, you have to specify against which browser instance you want
to get it resolved:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="CodeRay highlight"><code data-lang="java"><span class="annotation">@Browser1</span> <span class="annotation">@Drone</span> WebDriver browser1;
<span class="annotation">@Browser2</span> <span class="annotation">@Drone</span> WebDriver browser2;

<span class="annotation">@Browser1</span> <span class="annotation">@FindBy</span>(id = <span class="string"><span class="delimiter">&quot;</span><span class="content">login-box</span><span class="delimiter">&quot;</span></span>) <span class="directive">private</span> LoginFragment loginFragment;
<span class="annotation">@Browser2</span> HomePage page;</code></pre>
</div>
</div>
<div class="paragraph">
<p>Without having that fragment annotated with browser qualifier, Graphene
will resolve it against @Default browser instance.</p>
</div>
</div>
</div>
</div>
<div class="sect1">
<h2 id="_javascript_interface"><a class="anchor" href="#_javascript_interface"></a>11. JavaScript Interface</h2>
<div class="sectionbody">
<div class="paragraph">
<p>In testing of complex examples, it is often needed to perform <strong>custom
JavaScript code</strong>. For this purposes, there is implemented JavaScript
interface mechanism providing you a mapping of Java interfaces on
JavaScript objects.</p>
</div>
<div class="sect2">
<h3 id="basic-usage"><a class="anchor" href="#basic-usage"></a>11.1. Basic Usage</h3>
<div class="sect3">
<h4 id="preparation"><a class="anchor" href="#preparation"></a>11.1.1. Preparation</h4>
<div class="paragraph">
<p>First, you need to create a file containing needed JavaScript code.
The code has to create an object and store it to a global scoped
variable (e.g. <code>window</code> object property) and the file has to be
available on the test classpath. Here is an example of such file:</p>
</div>
<div class="listingblock">
<div class="title">helloworld.js</div>
<div class="content">
<pre class="CodeRay highlight"><code data-lang="java">window.helloworld = {};
window.helloworld.hello = function() {
  <span class="keyword">return</span> <span class="string"><span class="delimiter">&quot;</span><span class="content">Hello World!</span><span class="delimiter">&quot;</span></span>;
};</code></pre>
</div>
</div>
<div class="paragraph">
<p>Now you can create a Java interface:</p>
</div>
<div class="listingblock">
<div class="title">HelloWorld.java</div>
<div class="content">
<pre class="CodeRay highlight"><code data-lang="java"><span class="annotation">@JavaScript</span>(<span class="string"><span class="delimiter">&quot;</span><span class="content">window.helloworld</span><span class="delimiter">&quot;</span></span>)
<span class="annotation">@Dependency</span>(sources = <span class="string"><span class="delimiter">&quot;</span><span class="content">helloworld.js</span><span class="delimiter">&quot;</span></span>)
<span class="directive">public</span> <span class="type">interface</span> <span class="class">HelloWorld</span> {

    <span class="predefined-type">String</span> hello();

}</code></pre>
</div>
</div>
<div class="ulist">
<ul>
<li>
<p><code>@JavaScript</code> defines a JavaScript object used for mapping,
<code>window.helloworld</code> and <code>helloworld</code> represent the same object in this
context.</p>
</li>
<li>
<p><code>@Depedency</code> defines dependencies on files containg JavaScript code.
In this case we want to ensure that the <code>helloworld.js</code> file is loaded
to the page.</p>
<div class="ulist">
<ul>
<li>
<p>source files are resolved from the test classpath, so in a Maven
project, you want to put those in <code>src/test/resources/helloworld.js</code></p>
</li>
<li>
<p>The <code>@Dependency</code> is indeed optional, you can map the objects from
the application under test JavaScript objects.</p>
</li>
</ul>
</div>
</li>
</ul>
</div>
</div>
<div class="sect3">
<h4 id="construction-and-usage"><a class="anchor" href="#construction-and-usage"></a>11.1.2. Construction and Usage</h4>
<div class="paragraph">
<p>To use your JavaScript interface put an attribute annotated by
@JavaScript annotation to your test class:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="CodeRay highlight"><code data-lang="java"><span class="annotation">@RunWith</span>(Arquillian.class)
<span class="directive">public</span> <span class="type">class</span> <span class="class">TestCase</span> {

    <span class="comment">// Required browser injection</span>
<span class="error"> </span><span class="error"> </span><span class="error"> </span> <span class="annotation">@Drone</span>
<span class="error"> </span><span class="error"> </span><span class="error"> </span> <span class="directive">private</span> WebDriver browser;

<span class="error"> </span>   <span class="annotation">@JavaScript</span>
    <span class="directive">private</span> HelloWorld helloWorld;

    <span class="annotation">@Test</span>
    <span class="directive">public</span> <span class="type">void</span> testHelloWorld() {
        assertEquals(<span class="string"><span class="delimiter">&quot;</span><span class="content">Hello World!</span><span class="delimiter">&quot;</span></span>, helloWorld.hello());
    }


}</code></pre>
</div>
</div>
</div>
<div class="sect3">
<h4 id="default-getters-and-setters"><a class="anchor" href="#default-getters-and-setters"></a>11.1.3. Default Getters And Setters</h4>
<div class="paragraph">
<p>JS interfaces functionality is often used for retrieving custom values
of custom JavaScript objects. Therefore, there is a reasonable default
in the form of getters and setters methods implemented for you.</p>
</div>
<div class="paragraph">
<p>That is why you can do just following in order to retrieve the
<strong>someVariable</strong> value:</p>
</div>
<div class="listingblock">
<div class="title">someJS.js</div>
<div class="content">
<pre class="CodeRay highlight"><code data-lang="java">document.someVariable = <span class="string"><span class="delimiter">'</span><span class="delimiter">'</span></span>;</code></pre>
</div>
</div>
<div class="listingblock">
<div class="title">GetterAndSettersShowcase.java</div>
<div class="content">
<pre class="CodeRay highlight"><code data-lang="java"><span class="annotation">@JavaScript</span>(<span class="string"><span class="delimiter">&quot;</span><span class="content">document</span><span class="delimiter">&quot;</span></span>)
<span class="directive">public</span> <span class="type">interface</span> <span class="class">GetterAndSettersShowcase</span> {

  <span class="predefined-type">String</span> getSomeVariable();

  <span class="type">void</span> setSomeVariable(<span class="predefined-type">String</span> valueToSet);
}</code></pre>
</div>
</div>
<div class="paragraph">
<p>No need to implement get/set in the JavaScript code. Graphene will do it
automatically.</p>
</div>
</div>
</div>
<div class="sect2">
<h3 id="more-advanced-stuff"><a class="anchor" href="#more-advanced-stuff"></a>11.2. More Advanced Stuff</h3>
<div class="paragraph">
<p>You may need to execute some code after the JavaScript file is loaded to
the page. Just place it into the <code>install()</code> method of your JavaScript
object and extend <code>InstallableJavaScript</code> in your Java interface. Also
you can define  dependencies on other interfaces. Graphene ensures the
<code>install()</code> method is invoked and all dependencies are loaded before you
invoke a method of your interface.</p>
</div>
<div class="listingblock">
<div class="title">greeting.js</div>
<div class="content">
<pre class="CodeRay highlight"><code data-lang="java"><span class="comment">// object registration</span>
window.greeting = {
  install: function() {
    <span class="comment">// installation setups the greeting value accessed later by helloworld object</span>
    window.greeting.value = <span class="string"><span class="delimiter">&quot;</span><span class="content">Hello World!</span><span class="delimiter">&quot;</span></span>;
  }
};</code></pre>
</div>
</div>
<div class="listingblock">
<div class="title">helloworld.js</div>
<div class="content">
<pre class="CodeRay highlight"><code data-lang="java">window.helloworld = {
  <span class="comment">// return a greeting value</span>
  hello: function() {
    <span class="keyword">return</span> window.greeting.value;
  }

};</code></pre>
</div>
</div>
<div class="listingblock">
<div class="title">Greeting.java</div>
<div class="content">
<pre class="CodeRay highlight"><code data-lang="java"><span class="annotation">@JavaScript</span>(<span class="string"><span class="delimiter">&quot;</span><span class="content">greeting</span><span class="delimiter">&quot;</span></span>)
<span class="annotation">@Dependency</span>(sources = {<span class="string"><span class="delimiter">&quot;</span><span class="content">greeting.js</span><span class="delimiter">&quot;</span></span>})
<span class="directive">public</span> <span class="type">interface</span> <span class="class">Greeting</span> <span class="directive">extends</span> InstallableJavaScript {
}</code></pre>
</div>
</div>
<div class="listingblock">
<div class="title">HelloWorld.java</div>
<div class="content">
<pre class="CodeRay highlight"><code data-lang="java"><span class="annotation">@JavaScript</span>(<span class="string"><span class="delimiter">&quot;</span><span class="content">helloworld</span><span class="delimiter">&quot;</span></span>)
<span class="annotation">@Dependency</span>(sources = {<span class="string"><span class="delimiter">&quot;</span><span class="content">helloworld.js}, interfaces = {Greeting.class})
public interface HelloWorld {

    String hello();

}</span></span></code></pre>
</div>
</div>
<div class="admonitionblock warning">
<table>
<tr>
<td class="icon">
<i class="fa icon-warning" title="Warning"></i>
</td>
<td class="content">
Graphene uses <a href="#page-extensions-technique">Page
Extensions</a> to install needed dependencies for your <code>@JavaScript</code>
interface before each method invocation. Before the installation is
processed, it checks whether the object used for mapping is defined. If
so, the installation is skipped. It means if you use (for example)
<code>document</code> object for your mapping, dependencies won&#8217;t be installed
(including sources).
</td>
</tr>
</table>
</div>
<div class="admonitionblock warning">
<table>
<tr>
<td class="icon">
<i class="fa icon-warning" title="Warning"></i>
</td>
<td class="content">
When a page is reloaded, all installed JavaScript code is dropped and
installed again if needed. It means the state of JavaScript objects is
not preserved.
</td>
</tr>
</table>
</div>
</div>
<div class="sect2">
<h3 id="customization"><a class="anchor" href="#customization"></a>11.3. Customization</h3>
<div class="paragraph">
<p>If you are not satisfied with installation via
<a href="#page-extensions-technique">Page Extensions</a>,
you can implement your own <code>ExecutionResolver</code> containing
the following method:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="CodeRay highlight"><code data-lang="java"><span class="predefined-type">Object</span> execute(JSCall call);</code></pre>
</div>
</div>
<div class="paragraph">
<p>Don&#8217;t forget to reference it in your <code>@JavaScript</code> interfeaces:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="CodeRay highlight"><code data-lang="java"><span class="annotation">@JavaScript</span>(value = <span class="string"><span class="delimiter">&quot;</span><span class="content">mapped.object</span><span class="delimiter">&quot;</span></span>, methodResolver = YourOwnExecutionResolver.java)
...</code></pre>
</div>
</div>
</div>
</div>
</div>
<div class="sect1">
<h2 id="_guardajax_input_sendkeys_abc"><a class="anchor" href="#_guardajax_input_sendkeys_abc"></a>12. guardAjax(input).sendKeys("abc");</h2>
<div class="sectionbody">
<div class="sect2">
<h3 id="issue"><a class="anchor" href="#issue"></a>12.1. Issue</h3>
<div class="ulist">
<ul>
<li>
<p>The guard does not work correctly - i.e.</p>
<div class="ulist">
<ul>
<li>
<p>it <strong>timeouts</strong></p>
</li>
<li>
<p>or it <strong>ends prematurely</strong> (when page is partially updated)</p>
</li>
</ul>
</div>
</li>
</ul>
</div>
</div>
<div class="sect2">
<h3 id="analysis"><a class="anchor" href="#analysis"></a>12.2. Analysis</h3>
<div class="ulist">
<ul>
<li>
<p><code>sendKeys</code> behaves as you would expect from a real user interaction -
<strong>several characters are typed sequentially</strong>, which is accompanied by
appropriate number of <strong>keydown/keypress/keyup events</strong> and it does not
fire any blur event</p>
</li>
<li>
<p>guard actually <strong>wraps exactly one XHR request</strong>, which is triggered
by appropriate user interaction</p>
</li>
</ul>
</div>
</div>
<div class="sect2">
<h3 id="solution"><a class="anchor" href="#solution"></a>12.3. Solution</h3>
<div class="ulist">
<ul>
<li>
<p>If your application triggers AJAX request when <strong>blur</strong> happens, then
you need to guard blur event (either click to another input or to body
element):</p>
<div class="ulist">
<ul>
<li>
<p><code>input.sendKeys("abc"); ``guardAjax(body).click();</code></p>
</li>
</ul>
</div>
</li>
<li>
<p>If your application triggers AJAX request when keydown/keyup happens,
then you need to wait for a last update: </p>
<div class="ulist">
<ul>
<li>
<p><code>input.sendKeys("ab"); guardAjax(input).sendKeys("c");</code></p>
</li>
</ul>
</div>
</li>
</ul>
</div>
</div>
</div>
</div>
<div class="sect1">
<h2 id="_advanced_techniques"><a class="anchor" href="#_advanced_techniques"></a>13. Advanced Techniques</h2>
<div class="sectionbody">
<div class="paragraph">
<p>Advanced techniques covered in this section include:</p>
</div>
<div class="olist arabic">
<ol class="arabic">
<li>
<p><a href="#graphene-context-and-proxy">Graphene Context And Proxy</a></p>
</li>
<li>
<p><a href="#page-extensions-technique">Page Extensions</a></p>
</li>
<li>
<p><a href="#graphene-interceptors">Graphene Interceptors</a></p>
</li>
</ol>
</div>
<div class="sect2">
<h3 id="graphene-context-and-proxy"><a class="anchor" href="#graphene-context-and-proxy"></a>13.1. Graphene Context And Proxy</h3>
<div class="paragraph">
<p>Graphene stores WebDriver instance in the thread-local context,
distinguished by browser qualifier.</p>
</div>
<div class="paragraph">
<p>It enables you to write framework-like features where context of the browser
is injected just when you need it:</p>
</div>
<div class="sect3">
<h4 id="accessing"><a class="anchor" href="#accessing"></a>13.1.1. Accessing</h4>
<div class="paragraph">
<p>To access a browser session, you can obtain proxy of the context,
which is proxy object which delegates the methods you call on an
instance which is at the time available in the context of current
thread.</p>
</div>
<div class="paragraph">
<p>The most generic form is by obtaining instance of the WebDriver:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="CodeRay highlight"><code data-lang="java">WebDriver browser = GrapheneContext.getContextFor(Default.class).getWebDriver();</code></pre>
</div>
</div>
<div class="paragraph">
<p>The Default.class representas a browser&#8217;s qualifier - in this case we
are requesting default browser (when no qualifier is specified on Drone
instances). Read more <a href="#_parallel_browsers">Parallel browsers</a>.</p>
</div>
<div class="paragraph">
<p>You can also use alternative methods, most notably the method which
provides proxy object implementing given extension interfaces:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="CodeRay highlight"><code data-lang="java">JavascriptExecutor executor = (JavascriptExecutor) GrapheneContext.getContextFor(Default.class).getWebDriver(JavascriptExecutor.class)</code></pre>
</div>
</div>
</div>
</div>
<div class="sect2">
<h3 id="page-extensions-technique"><a class="anchor" href="#page-extensions-technique"></a>13.2. Page Extensions</h3>
<div class="admonitionblock note">
<table>
<tr>
<td class="icon">
<i class="fa icon-note" title="Note"></i>
</td>
<td class="content">
The Page Extensions SPI is not yet available for public use, we
discourage you to use it yet.
</td>
</tr>
</table>
</div>
<div class="paragraph">
<p>Page extensions mechanism provides a way to easily install your
JavaScript code into the page. Page extensions are used mainly in
cooperation with <a href="#_javascript_interface">JavaScript Interface</a>,
but they can be used independently too.</p>
</div>
<div class="sect3">
<h4 id="basic-usage"><a class="anchor" href="#basic-usage"></a>13.2.1. Basic Usage</h4>
<div class="sect4">
<h5 id="own-extensions"><a class="anchor" href="#own-extensions"></a>Own Extensions</h5>
<div class="paragraph">
<p>Extensions has to implement <code>PageExtension</code> interface to define:</p>
</div>
<div class="ulist">
<ul>
<li>
<p>name,</p>
</li>
<li>
<p>JavaScript code to be executed when the extension is installed,</p>
</li>
<li>
<p>JavaScript code returning true if the extension is already installed,
false otherwise,</p>
</li>
<li>
<p>dependencies.</p>
</li>
</ul>
</div>
<div class="sect5">
<h6 id="spi"><a class="anchor" href="#spi"></a>SPI</h6>
<div class="paragraph">
<p>To provide your own extensions you can use <code>PageExtensionProvider</code>
service containing the following method:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="CodeRay highlight"><code data-lang="java"><span class="comment">// returns a list of extension for the given test class</span>
<span class="predefined-type">List</span>&lt;PageExtension&gt; getPageExtensions(TestClass testClass);</code></pre>
</div>
</div>
</div>
<div class="sect5">
<h6 id="registry"><a class="anchor" href="#registry"></a>Registry</h6>
<div class="paragraph">
<p>The second way to provide your own extension is to use
<code>PageExtensionRegistry</code>:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="CodeRay highlight"><code data-lang="java">PageExtension pageExtension = <span class="keyword">new</span> MyCoolPageExtension(...);
GraphenePageExtensionsContext.getRegistryProxy().register(pageExtension);</code></pre>
</div>
</div>
<div class="paragraph">
<p>The registry can be also used to check whether the given extension is
available:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="CodeRay highlight"><code data-lang="java"><span class="comment">// returns page extension with the given name, or null if there is no extension with the given name</span>
GraphenePageExtensionsContext.getRegistryProxy().getExtension(<span class="string"><span class="delimiter">&quot;</span><span class="content">my cool extension</span><span class="delimiter">&quot;</span></span>);</code></pre>
</div>
</div>
</div>
</div>
<div class="sect4">
<h5 id="installation"><a class="anchor" href="#installation"></a>Installation</h5>
<div class="paragraph">
<p>Each extensions is defined with its name. When you want to install the
extension just ask for its installator and install it. All defined
dependencies will be installed too. When the extension is detected as
already installed, the installation is skipped (including installation
of all dependencies).</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="CodeRay highlight"><code data-lang="java">GraphenePageExtensionsContext.getInstallatorProviderProxy().installator(<span class="string"><span class="delimiter">&quot;</span><span class="content">extension name</span><span class="delimiter">&quot;</span></span>).install();</code></pre>
</div>
</div>
<div class="admonitionblock warning">
<table>
<tr>
<td class="icon">
<i class="fa icon-warning" title="Warning"></i>
</td>
<td class="content">
The installator is available only for extensions already registered via
SPI or registry.
</td>
</tr>
</table>
</div>
<div class="admonitionblock warning">
<table>
<tr>
<td class="icon">
<i class="fa icon-warning" title="Warning"></i>
</td>
<td class="content">
When a page is reloaded, all injected JavaScript code is lost, so the
extension has to be installed again.
</td>
</tr>
</table>
</div>
</div>
</div>
</div>
<div class="sect2">
<h3 id="graphene-interceptors"><a class="anchor" href="#graphene-interceptors"></a>13.3. Graphene Interceptors</h3>
<div class="admonitionblock note">
<table>
<tr>
<td class="icon">
<i class="fa icon-note" title="Note"></i>
</td>
<td class="content">
Interceptors are not officially part of 2.0 and thus they are not
available for production use yet.
</td>
</tr>
</table>
</div>
<div class="paragraph">
<p>Graphene Interceptors concept is inspired by Java EE Interceptors
feature. It is a way how to create interceptor classes and methods that
interpose on method invocations.</p>
</div>
<div class="sect3">
<h4 id="basic-usage-1"><a class="anchor" href="#basic-usage-1"></a>13.3.1. Basic Usage</h4>
<div class="paragraph">
<p>An example of interceptor usage can be a need to take a screenshot of
the browser window and its saving after the every method invocation on
the injected <code>WebDriver</code> instance. Building an interceptor is simply
a matter of writing a Java class that implements
the <code>org.jboss.arquillian.graphene.proxy.Interceptor</code> interface.</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="CodeRay highlight"><code data-lang="java"><span class="keyword">import</span> <span class="include">org.jboss.arquillian.graphene.proxy.Interceptor</span>;
<span class="keyword">import</span> <span class="include">org.jboss.arquillian.graphene.proxy.InvocationContext</span>;
<span class="keyword">import</span> <span class="include">org.foo.bar.ScreenshotTaker</span>;

<span class="directive">public</span> <span class="type">class</span> <span class="class">ScreenshotTakerInterceptor</span> <span class="directive">implements</span> Interceptor {

    <span class="annotation">@Override</span>
    <span class="directive">public</span> <span class="predefined-type">Object</span> intercept(<span class="directive">final</span> InvocationContext context) {
        ScreenshotTaker.takeScreenshot();
        <span class="keyword">return</span> context.invoke();
    }
}</code></pre>
</div>
</div>
<div class="admonitionblock warning">
<table>
<tr>
<td class="icon">
<i class="fa icon-warning" title="Warning"></i>
</td>
<td class="content">
Each implementor must satisfy, that in the <code>intercept</code> method body will
be called at least once method from current context:
<code>InvocationContext#invoke()</code>.
</td>
</tr>
</table>
</div>
<div class="paragraph">
<p>Secondly, the interceptor needs to be registered. Currently this can be
achieved like in the following listing:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="CodeRay highlight"><code data-lang="java"><span class="annotation">@Drone</span>
WebDriver browser;

<span class="directive">public</span> <span class="type">void</span> beforeSomething() {
    GrapheneProxyInstance proxy = (GrapheneProxyInstance) browser;
    proxy.registerInterceptor(<span class="keyword">new</span> ScreenshotTakerInterceptor());
}</code></pre>
</div>
</div>
<div class="admonitionblock note">
<table>
<tr>
<td class="icon">
<i class="fa icon-note" title="Note"></i>
</td>
<td class="content">
In the example above the interceptor was registered to the <code>WebDriver</code>
instance, thus all method invocations on that object will be
intercepted. Note that you can register the interceptor to any object
which can be casted to <code>GrapheneProxyInstance</code>. For instance to Page
Objects.
</td>
</tr>
</table>
</div>
<div class="admonitionblock note">
<table>
<tr>
<td class="icon">
<i class="fa icon-note" title="Note"></i>
</td>
<td class="content">
You can use <code>GrapheneProxyInstance#unregisterInterceptor</code> method to
unregister previously registered interceptor.
</td>
</tr>
</table>
</div>
<div class="paragraph">
<p>Have an inspiration in <code>StaleElementInterceptor</code>
(<a href="https://github.com/arquillian/arquillian-graphene/blob/master/impl/src/main/java/org/jboss/arquillian/graphene/enricher/StaleElementInterceptor.java">here</a>),
Graphene way of protecting the elements from
<code>StaleElementReferenceException</code>.</p>
</div>
</div>
</div>
</div>
</div>
<div class="sect1">
<h2 id="project-info"><a class="anchor" href="#project-info"></a>14. Project Info</h2>
<div class="sectionbody">
<table class="tableblock frame-all grid-all spread">
<colgroup>
<col style="width: 50%;">
<col style="width: 50%;">
</colgroup>
<tbody>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">Type:</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Maven</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">Source Code:</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"><a href="https://github.com/arquillian/arquillian-graphene" class="bare">https://github.com/arquillian/arquillian-graphene</a></p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">Issue tracking:</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"><a href="https://issues.jboss.org/browse/ARQGRA" class="bare">https://issues.jboss.org/browse/ARQGRA</a></p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">Forums:</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"><a href="http://community.jboss.org/en/arquillian?view=discussions" class="bare">http://community.jboss.org/en/arquillian?view=discussions</a></p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">License:</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">LGPL v2.1 or ASL v2.0 (dual-licensed)</p></td>
</tr>
</tbody>
</table>
<div class="sect2">
<h3 id="getting-started"><a class="anchor" href="#getting-started"></a>14.1. Getting Started Guide</h3>
<div class="paragraph">
<p>Apart from the documentation available here, there is also a
comprehensive guide
<a href="http://arquillian.org/guides/functional_testing_using_graphene/">Functional
Testing using Drone and Graphene</a> to help you leverage the benefits of
Graphene for writing robust functional tests.</p>
</div>
</div>
</div>
</div>
<div class="sect1">
<h2 id="contributing"><a class="anchor" href="#contributing"></a>15. Contributing</h2>
<div class="sectionbody">
<div class="paragraph">
<p>Community contributions are essential for maintaining the vitality of
the Arquillian project.</p>
</div>
<div class="paragraph">
<p>Contributing to the project helps to deliver functionality you need and
allows you to share your code with other contributors and users.</p>
</div>
<div class="paragraph">
<p>We want to keep it as easy as possible to contribute your changes and we
will work hard to deliver your contributions in an upcoming release.</p>
</div>
<div class="paragraph">
<p>Please refer to
<a href="https://github.com/arquillian/arquillian-graphene/blob/master/CONTRIBUTING.md">How
to Contribute</a> to find related instructions.</p>
</div>
</div>
</div>
<div class="sect1">
<h2 id="building-the-project"><a class="anchor" href="#building-the-project"></a>16. Building the Project</h2>
<div class="sectionbody">
<div class="sect2">
<h3 id="prerequisities"><a class="anchor" href="#prerequisities"></a>16.1. Prerequisites</h3>
<div class="ulist">
<ul>
<li>
<p>JDK 1.6+</p>
</li>
<li>
<p>Maven 3.0.3+</p>
</li>
</ul>
</div>
</div>
<div class="sect2">
<h3 id="how-to-build-project"><a class="anchor" href="#how-to-build-project"></a>16.2. How-to build Project</h3>
<div class="literalblock">
<div class="content">
<pre>mvn clean install</pre>
</div>
</div>
</div>
<div class="sect2">
<h3 id="running-integration-tests"><a class="anchor" href="#running-integration-tests"></a>16.3. Running Integration Tests</h3>
<div class="literalblock">
<div class="content">
<pre>mvn clean install

cd ftest/
mvn clean verify -Dbrowser=firefox
mvn clean verify -Dbrowser=chrome
mvn clean verify -Dbrowser=phantomjs</pre>
</div>
</div>
</div>
</div>
</div>
</div>
<div id="footer">
<div id="footer-text">
Last updated 2019-05-06 11:14:17 UTC
</div>
</div>
</body>
</html>